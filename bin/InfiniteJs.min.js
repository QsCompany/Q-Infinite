var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__decorate=this&&this.__decorate||function(n,t,i,r){var f=arguments.length,u=f<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(e=n[o])&&(u=(f<3?e(u):f>3?e(t,i,u):e(t,i))||u);return f>3&&u&&Object.defineProperty(t,i,u),u},__metadata=this&&this.__metadata||function(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)};define("sys/System",["require","exports","sys/Corelib","context"],function(n,t,i,r){"use strict";var u,f,e,o,s,h,c;Object.defineProperty(t,"__esModule",{value:!0});u={};e=new i.collection.Dictionary("Apis",!1),function(n){function l(n){Object.freeze(n);Object.defineProperty(u,n.Name,{configurable:!1,enumerable:!1,value:n,writable:!1})}function a(n){return n}var o,s,h,t,c;n.Register=l;n.decorator=a;o=function(){function n(){this._methodsShema={};e.Set(this.GetType(),this)}return n.prototype.Register=function(n){n.Name=n.Name.toUpperCase();typeof n.ParamsFormat=="string"&&(n.ParamsFormat=i.basic.CompileString(n.ParamsFormat));this._methodsShema[n.Name]=n},n.prototype.ERegister=function(n,t,r,u){this.Register({Method:n,Name:t,ParamsFormat:r&&i.basic.CompileString(r),SendData:u})},n.prototype.GetMethodShema=function(n){var r,u,t;if(typeof n=="string")return this._methodsShema[n.toUpperCase()];if(typeof n=="number"){if(r=this._methodsShema[i.net.WebRequestMethod[n].toUpperCase()],r!=null)return r;for(t in this._methodsShema)if(u=this._methodsShema[t],u.Method===n)return u;return}if(n&&!n.Name)return n;for(t in this._methodsShema)return this._methodsShema[t]},n}();n.Api=o;s=function(n){function t(t,i,r){var u=n.call(this)||this;return u._type=t,u._getRequest=i,u._onResponse=r,u}return __extends(t,n),t.prototype.GetType=function(){return this._type},t.prototype.GetRequest=function(n){return this._getRequest(n)},t.prototype.OnResponse=function(n,t){return this._onResponse(n,t)},t}(o);n.CostumeApi=s;t=function(n){function t(t,i,r,u,f,e){var o=n.call(this,null,t,!0)||this;return o.param=i,o.api=r,o.context=u,o.callBack=f,o.method=e,o}return __extends(t,n),t.parse=function(n){if(n==null||n.trim()=="")return null;try{return JSON.parse(n)}catch(t){return null}},t.prototype.Callback=function(n,r){var o=!0,f,e,s;try{if(f=n.Request.IsSuccess?t.parse(r.Response):null,f&&f.hasOwnProperty("__service__")){if(e=f,e.__service__&&(s=u[e.__service__],s&&s.OnResponse(this,n,e),e.dropRequest))return;o=e.iss;f=e.rdata}this.api&&this.api.OnResponse(f,this.data,this.context||i.encoding.SerializationContext.GlobalContext)}catch(h){o=!1}this.callBack&&this.callBack(this,f,o&&this.IsSuccess,r)},t.prototype.OutputData=function(){if("string"==typeof this.data||this.data instanceof ArrayBuffer)return this.data;var n=this.context==null,t=n?new i.encoding.SerializationContext(!0):this.context.reset(),r=t.ToJson(this.data);return n&&t.Dispose(),JSON.stringify(r)},t}(i.net.RequestParams);n.ProxyCallback=t;c=function(){function n(n,t){if(this.quee=[],f!=null)throw null;this.http=new i.net.QueeDownloader(n);this.apis=t?new i.collection.Dictionary("Apis",!1):e}return n.prototype.SetAuth=function(n,t){this.http.Uid=n;this.http.Pwd=t},Object.defineProperty(n.prototype,"Crypto",{set:function(n){this.http.Crypto=n},enumerable:!0,configurable:!0}),n.prototype.Register=function(n){this.apis.Set(n.GetType(),n)},n.getMethod=function(n,t){if(typeof t=="number")return t;if(typeof t=="string"){var r=n.GetMethodShema(t);return r?r.Method:0}return r.Name?i.net.WebRequestMethod[t.Name]||0:0},n.prototype.Costume=function(n,r,u,f,e){return this.http.Push(n,new t(r,e,void 0,i.encoding.SerializationContext.GlobalContext,f),u)},n.prototype.Request=function(r,u,f,e,o,s,h,c){var l=this.apis.Get(r!=null?r:f.constructor),v=new t(f,c,l,i.encoding.SerializationContext.GlobalContext,o,n.getMethod(l,u)),a=l.GetRequest(f,u,e);a.beforRequest=h;s&&s(a,v);this.http.Push(a,v,null)},n.prototype.Push=function(n,r,u,f,e,o,s,h,c){var a=this.apis.Get(n!=null?n:r.constructor),v=new t(r,u,a,s||new i.encoding.SerializationContext(!0)||i.encoding.SerializationContext.GlobalContext,f),l=a.GetRequest(r,null,c);l.HasBody=!0;l.beforRequest=h;e!=undefined&&(l.Method=e);o&&o(l,v);this.http.Push(l,v,c)},n.prototype.Post=function(n,r,u,f,e,o,s){var c=this.apis.Get(n!=null?n:r.constructor),l=new t(r,u,c,o||i.encoding.SerializationContext.GlobalContext,f),h=c.GetRequest(r,null,s);h.HasBody=!0;h.Method=i.net.WebRequestMethod.Post;e&&e(h,l);this.http.Push(h,l,s)},n.prototype.Put=function(n,r,u,f,e,o,s){var c=this.apis.Get(n!=null?n:r.constructor),l=new t(r,u,c,o||i.encoding.SerializationContext.GlobalContext,f),h=c.GetRequest(r,null,s);h.HasBody=!0;h.Method=i.net.WebRequestMethod.Put;e&&e(h,l);this.http.Push(h,l,s)},n.prototype.Get=function(n,r,u,f,e,o,s){var c=this.apis.Get(n!=null?n:r.constructor),l=new t(r,u,c,o||i.encoding.SerializationContext.GlobalContext,f),h=c.GetRequest(r,null,s);h.Method=i.net.WebRequestMethod.Get;e&&e(h,l);this.http.Push(h,l,s)},n.prototype.Delete=function(n,r,u,f,e,o,s){var c=this.apis.Get(n!=null?n:r.constructor),l=new t(r,u,c,o||i.encoding.SerializationContext.GlobalContext,f),h=c.GetRequest(r,null,s);return h.Method=i.net.WebRequestMethod.Delete,e&&e(h,l),this.http.Push(h,l,s),h},Object.defineProperty(n,"Default",{get:function(){return f||(f=new n(i.basic.Crypto,!1))},enumerable:!0,configurable:!0}),n}();n.ProxyData=c}(o=t.Controller||(t.Controller={})),function(n){var t,f,u,e,s,h;(function(n){n[n.IsNew=0]="IsNew";n[n.Modified=1]="Modified";n[n.Saved=2]="Saved";n[n.Updating=4]="Updating";n[n.Uploading=8]="Uploading";n[n.Updated=16]="Updated";n[n.Frozed=32]="Frozed"})(t=n.DataStat||(n.DataStat={}));f=new i.collection.Dictionary("sd");u=function(n){function u(t){var i=n.call(this)||this,r=i.getStore();if(t&&r){if(r.Get(t)!=null)return r.Get(t);i.set(u.DPId,t)}return i}return __extends(u,n),Object.defineProperty(u.prototype,"Stat",{get:function(){return this.get(u.DPStat)},set:function(n){this.set(u.DPStat,n)},enumerable:!0,configurable:!0}),u.CreateFromJson=function(n,t,i){var u,r,e;return i?null:(u=typeof n=="number"?n:n.Id,i||typeof u=="number"&&(r=t.getById(u,t)),r||(e=f.Get(t),e&&(r=e.CreateNew(u)),r||(r=new t(u))),r)},u.prototype.OnIdChanged=function(n,t){var i=this.getStore();n&&i.Remove(n);t&&i.Set(t,this)},Object.defineProperty(u.prototype,"Id",{get:function(){return this.get(u.DPId)},set:function(n){this.set(u.DPId,n)},enumerable:!0,configurable:!0}),u.__fields__=function(){return[u.DPId,this.DPLastModified,u.DPStat]},u.getById=function(){return undefined},u.prototype.FromJson=function(i,r,f){var e=this;if(typeof i=="number"){if(this.Stat>=t.Updating)return this;this.Id=i;this.set(u.DPStat,t.Updating);o.ProxyData.Default.Request(this.constructor,"UPDATE",this,this,function(){return e.Stat>t.Updating?!1:!0})}else this.set(u.DPStat,t.Updated),n.prototype.FromJson.call(this,i,r,f),i!=null&&i.IsFrozen==!0&&this.Freeze();return this},Object.defineProperty(u.prototype,"TableName",{get:function(){return r.context.NameOf(this.constructor).replace("models.","")},enumerable:!0,configurable:!0}),u.DPId=i.bind.DObject.CreateField("Id",Number,0,function(n){n.__this.OnIdChanged(n._old,n._new)},function(n){(n._new==null||n._new===0)&&(n._new=i.basic.New())},i.bind.PropertyAttribute.IsKey),u.DPStat=i.bind.DObject.CreateField("Stat",Number,0,null,null,i.bind.PropertyAttribute.Private|i.bind.PropertyAttribute.NonSerializable),u.DPLastModified=i.bind.DObject.CreateField("LastModified",Date),u}(i.bind.DObject);n.DataRow=u;e=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.__fields__=function(){return[]},t.prototype.GenType=function(){return t},Object.defineProperty(t,"QueryApi",{get:function(){return this._QueryApi},enumerable:!0,configurable:!0}),t.prototype.Update=function(){},t.prototype.Upload=function(){},t}(n.DataRow);n.QShopRow=e;s=function(r){function f(n,t,i,u){var f=r.call(this,t,u)||this;return f._parent=n,f.ctor=i,f.Owner=n,f}return __extends(f,r),f.__fields__=function(){return[f.DPOwner]},Object.defineProperty(f.prototype,"Owner",{get:function(){return this.get(f.DPOwner)},set:function(n){this.set(f.DPOwner,n)},enumerable:!0,configurable:!0}),f.prototype.CreateNewItem=function(n){return u.getById(n,this.ArgType)||this.ctor(n)},f.prototype.FromJson=function(i,u,e,o){if(this.Stat!=n.DataStat.Frozed){this.set(f.DPStat,t.Updating);var s=r.prototype.FromJson.call(this,i,u,e,o);return(this.set(f.DPStat,t.Updated),i==null)?this:(i!=null&&i.IsFrozen==!0&&this.Freeze(),this)}},f.prototype.GetById=function(n){for(var i=this.AsList(),r=u.DPId,t=0,f=i.length;t<f;t++)if(i[t].GetValue(r)===n)return i[t];return undefined},f.prototype.Update=function(){},f.prototype.Upload=function(){},f.prototype.Add=function(n){return this._list.indexOf(n)==-1?r.prototype.Add.call(this,n):this},f.prototype.FromCsv=function(n,t,r){var u=new i.encoding.CSV(n,!0,!0),f=u.ColumnIndex("Id"),e,o,s;for(f==-1&&(f=void 0),t=t||i.encoding.SerializationContext.GlobalContext,e=[];u.Next(r);)o=u.Current,s=this.CreateNewItem(f===void 0?i.basic.New():o.Id||i.basic.New()),e.push(s.FromJson(o,t));this.AddRange(e)},f.DPOwner=f.CreateField("Owner",u,null,null,null,i.bind.PropertyAttribute.SerializeAsId),f.DPStat=i.bind.DObject.CreateField("Stat",Number,0,null,null,i.bind.PropertyAttribute.Private),f}(i.collection.List);n.DataTable=s;h=!0}(s=t.sdata||(t.sdata={})),function(n){var r=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),Object.defineProperty(t.prototype,"From",{get:function(){return this.get(t.DPFrom)},set:function(n){this.set(t.DPFrom,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"To",{get:function(){return this.get(t.DPTo)},set:function(n){this.set(t.DPTo,n)},enumerable:!0,configurable:!0}),t.__fields__=function(){return[t.DPFrom,t.DPTo]},t.prototype.Check=function(n){if(!s)return!0;var t=this.From,i=this.To,r=n.getTime();return(t==null||t.getTime()<=r)&&(i==null||i.getTime()>=r)},t.DPFrom=i.bind.DObject.CreateField("From",Date),t.DPTo=i.bind.DObject.CreateField("To",Date),t}(i.bind.DObject),t;n.DateVecteur=r;t=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),Object.defineProperty(t.prototype,"From",{get:function(){return this.get(t.DPFrom)},set:function(n){this.set(t.DPFrom,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"To",{get:function(){return this.get(t.DPTo)},set:function(n){this.set(t.DPTo,n)},enumerable:!0,configurable:!0}),t.__fields__=function(){return[t.DPFrom,t.DPTo]},t.prototype.Check=function(n){return n?(this.From==null||this.From<=n)&&(this.To==null||this.To>=n):!0},t.DPFrom=i.bind.DObject.CreateField("From",Number),t.DPTo=i.bind.DObject.CreateField("To",Number),t}(i.bind.DObject);n.NumberVecteur=t}(h=t.base||(t.base={})),function(){var n,t=function(){function t(){}return t.prototype.toHex=function(t,i){t=parseInt(t,10);for(var r="";t>0;)r=n[t%16]+r,t=Math.floor(t/16);for(;r.length<i;)r="0"+r;return r},t.prototype.hexToDec=function(n){return parseInt(n,16)},t.prototype.toRgb=function(n){var t,i,r,u;return"string"!=typeof n?(t=n[0],i=n[1],r=n[2]):-1!=n.indexOf("rgb")?(u=n.substr(n.indexOf("(")+1,n.lastIndexOf(")")-n.indexOf("(")-1).split(","),t=u[0],i=u[1],r=u[2]):("#"==n.substr(0,1)&&(n=n.substr(1)),t=this.hexToDec(n.substr(0,2)),i=this.hexToDec(n.substr(2,2)),r=this.hexToDec(n.substr(4,2))),t=parseInt(t,10)||0,i=parseInt(i,10)||0,r=parseInt(r,10)||0,(0>t||t>255)&&(t=0),(0>i||i>255)&&(i=0),(0>r||r>255)&&(r=0),[t,i,r]},t.prototype.hsvToRgb=function(n,t,i){var h,c,e,o,s,r,u,f;switch(h=Math.floor(n/60)%6,c=n/60-h,e=i*(1-t),o=i*(1-c*t),s=i*(1-(1-c)*t),r=0,u=0,f=0,h){case 0:r=i;u=s;f=e;break;case 1:r=o;u=i;f=e;break;case 2:r=e;u=i;f=s;break;case 3:r=e;u=o;f=i;break;case 4:r=s;u=e;f=i;break;case 5:r=i;u=e;f=o}return r=Math.floor(255*r),u=Math.floor(255*u),f=Math.floor(255*f),[r,u,f]},t.prototype.rgbToHsv=function(n,t,i){var e,u,f,o,r,h,s,c;return e=n/255,u=t/255,f=i/255,o=Math.min(e,u,f),r=Math.max(e,u,f),s=0,h=0===r?0:1-o/r,c=r,r==o?s=0:r==e&&u>=f?s=60*(u-f)/(r-o)+0:r==e&&f>u?s=60*(u-f)/(r-o)+360:r==u?s=60*(f-e)/(r-o)+120:r==f&&(s=60*(e-u)/(r-o)+240),[s,h,c]},t}()}(c=t.System||(t.System={}))});define("sys/Filters",["require","exports","sys/Corelib"],function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r;(function(n){var r,t;(function(n){var r=function(n){function r(t,i,r,u){var f=n.call(this,t,1)||this;return f.p=r,f.fl=u,f}return __extends(r,n),r.prototype.getFilter=function(){return null},r.prototype.getSource=function(n){return n instanceof Array&&(this.fl.Source=new i.collection.List(Object,n),this.isConst=!0),null},r.prototype.getPatent=function(n){return n},r.prototype.Convert=function(n){if(!this.isConst)return this.fl==null&&(this.fl=new i.collection.ExList(Object)),this.fl.Source=n,this.fl},r.prototype.ConvertBack=function(n){return n.Source},r.prototype.Initialize=function(){var r=this.fl,e=this.p,f,u;if(r||(this.fl=r=new i.collection.ExList(Object)),e){f=JSON.parse(decodeURI(e));for(u in f)u==="filter"&&(r.Filter=this.getFilter(f[u])),u==="source"&&(r.Source=this.getSource(f[u])),u==="patent"&&(r.Filter==null&&(r.Filter=new t.LStringFilter),r.Filter.Patent=this.getPatent(f[u])),u==="max"&&(r.MaxResult=parseInt(u)),u==="shift"&&(r.Shift=parseInt(u))}r.Filter==null&&(r.Filter=new t.LStringFilter);r.Source==null&&this.source&&(r.Source=this.source.Value);n.prototype.Initialize.call(this)},r}(i.bind.Filter);n.ListFilter=r;i.bind.RegisterFilter({BindingMode:1,Name:"listfilter",CreateNew:function(n,t,i){return new r(n,t,i)}})})(r=n.scopic||(n.scopic={})),function(t){function b(t,i){function o(){var n=t.Count/i;return n%1==0?n:Math.floor(n)+1}function f(){var t=o();return r=Math.max(0,Math.min(r,t-1)),new n.list.SubListPatent(r*i,(r+1)*i-1)}var u=new n.list.SubListFilter,r=0,e=t.Filtred(u);return u.Patent=f(),{update:function(){u.Patent=f()},reset:function(){r=0;u.Patent=f()},next:function(){++r;u.Patent=f()},previouse:function(){--r;u.Patent=f()},get List(){return e},get numPages(){var n=t.Count/i;return n%1==0?n:n+1},get Index(){return r},set Index(n){r=n;u.Patent=f()},get CountPerPage(){return i},set CountPerPage(n){i=n;u.Patent=f()}}}var f=function(){function n(n,t){n>t?(this.Start=t,this.End=n):(this.Start=n,this.End=t)}return n.prototype.Check=function(n){return n<=this.End&&n>=this.Start},n.prototype.equals=function(n){return this.Start==n.Start&&this.End==n.End},n}(),r,e,o,s,h,c,l,u,a,v,y,p,w;t.SubListPatent=f;r=function(){function n(n){this.o=n=n.trim().toLowerCase();this.p=n===""?[]:n.split(" ")}return n.prototype.Check=function(n){var i,t,r;if(!n)return!0;for(i=this.p,n=n.toLowerCase(),t=0,r=i.length;t<r;t++)if(n.indexOf(i[t])===-1)return!1;return!0},n.prototype.equals=function(n){return n.o===this.o},n}();t.StringPatent=r;e=function(){function n(n){this.s=n}return n.prototype.Check=function(n){return this.s===undefined?!0:n===this.s},n.prototype.equals=function(n){return n.s===this.s},n}();t.PropertyPatent=e;o=function(n){function t(t){var i=n.call(this)||this;return i.DP=t,i}return __extends(t,n),t.prototype.Begin=function(){this._patent||(this._skip=!0);this._patent.s||(this._skip=!0);this._skip=!1},t.prototype.IsMatch=function(n,t){return this._skip||!t||this._patent.Check(t.GetValue(this.DP))},t.prototype.convertFromString=function(){return null},t}(i.utils.Filter);t.PropertyFilter=o;s=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.Begin=function(){},t.prototype.IsMatch=function(n,t){return this._patent==null||this._patent.Check(t.toString())},t.prototype.convertFromString=function(n){var t=new r(n);return this._patent&&this._patent.equals(t)?this._patent:t},t}(i.utils.Filter);t.StringFilter=s;h=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.Begin=function(n,t){this.deb=n;this.fin=n+t},t.prototype.IsMatch=function(n,t){return n>=this.deb&&n<this.fin?this._patent==null||this._patent.Check(t.toString()):null},t.prototype.convertFromString=function(n){var t=new r(n);return this._patent&&this._patent.equals(t)?this._patent:t},t}(i.utils.Filter);t.BoundStringFilter=h;c=function(){function n(n){this.o=n=n.trim().toLowerCase();this.p=n===""?[]:n.split(" ")}return n.prototype.Check=function(n){if(!n)return!0},n.prototype.equals=function(n){return n.o===this.o},n}();t.DObjectPatent=c;l=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.Begin=function(){},t.prototype.IsMatch=function(n,t){return this._patent==null||this._patent.Check(t.toString())},t.prototype.convertFromString=function(n){var t=new r(n);return this._patent&&this._patent.equals(t)?this._patent:t},t}(i.utils.Filter);t.DObjectFilter=l;u=function(){function n(n,t){this.left=n;this.right=t}return n.prototype.equals=function(n){var t=n,i,r;return(t&&(i=t.left,r=t.right),!n||n instanceof this.constructor)?this.areEquals(this.left,i)&&this.areEquals(this.right,r):!1},n.prototype.areEquals=function(n,t){return n==null&&t==null?!0:n==null?t.equals(n):n.equals(t)},n}();t.PatentGroup=u;a=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.Check=function(n){var i=!this.left||this.left.Check(n),t;return i==null?null:(t=!this.right||this.right.Check(n),t==null)?null:i&&t},t.prototype.Clone=function(){return new t(this.left,this.right)},t}(u);t.ANDPatentGroup=a;v=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.Clone=function(){return new t(this.left,this.right)},t.prototype.Check=function(n){var i=!!this.left&&this.left.Check(n),t;return i==null?null:(t=!!this.right&&this.right.Check(n),t==null)?null:t||i},t}(u);t.ORPatentGroup=v;y=function(n){function t(t){var i=n.call(this)||this;if(!t)throw"";return i.Patent=t,i}return __extends(t,n),t.prototype.Begin=function(){},t.prototype.IsMatch=function(n,t){return this._patent==null||this._patent.Check(t)},t.prototype.convertFromString=function(){throw"null";},Object.defineProperty(t.prototype,"LeftPatent",{set:function(n){this.Patent.left=n;this.Patent=this.Patent.Clone()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"RightPatent",{set:function(n){this.Patent.right=n;this.Patent=this.Patent.Clone()},enumerable:!0,configurable:!0}),t}(i.utils.Filter);t.FilterGroup=y;p=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.Begin=function(n,t){this.deb=n||0;this.count=t},t.prototype.IsMatch=function(n,t){if(this.deb===0){if(this.count>0)return(this._patent==null||this._patent.Check(t.toString()))?(this.count--,!0):!1}else this.deb--;return!1},t.prototype.convertFromString=function(n){var t=new r(n);return this._patent&&this._patent.equals(t)?this._patent:t},t}(i.utils.Filter);t.LStringFilter=p;w=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.deb=0,t.count=50,t}return __extends(t,n),t.prototype.Begin=function(n,t){this.deb=n;this.count=t},t.prototype.IsMatch=function(n){var t=this._patent==null||this._patent.Check(n);return t?this.deb>0?(this.deb--,!1):this.count>0?(this.count--,!0):null:!1},t.prototype.convertFromString=function(n){var t=n.split(/[\s|\\|\.|\/]+/),i=0,u=0,r;return t.length>0&&(i=parseFloat(t[0])),u=t.length>1?parseFloat(t[1]):i+(this._patent==null?10:this._patent.End-this._patent.Start),r=new f(i,u),this._patent&&this._patent.equals(r)?this._patent:r},t}(i.utils.Filter);t.SubListFilter=w;t.indexdFilter=b}(t=n.list||(n.list={}))})(r=t.filters||(t.filters={}))});define("sys/Syntaxer",["require","exports"],function(n,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),function(n){n[n.None=0]="None";n[n.EndOfFile=1]="EndOfFile";n[n.Semicolon=2]="Semicolon";n[n.RightCurly=3]="RightCurly";n[n.LeftCurly=4]="LeftCurly";n[n.Debugger=5]="Debugger";n[n.Var=6]="Var";n[n.If=7]="If";n[n.For=8]="For";n[n.Do=9]="Do";n[n.While=10]="While";n[n.Continue=11]="Continue";n[n.Break=12]="Break";n[n.Return=13]="Return";n[n.With=14]="With";n[n.Switch=15]="Switch";n[n.Throw=16]="Throw";n[n.Try=17]="Try";n[n.Function=18]="Function";n[n.Else=19]="Else";n[n.ConditionalCommentStart=20]="ConditionalCommentStart";n[n.ConditionalCommentEnd=21]="ConditionalCommentEnd";n[n.ConditionalCompilationOn=22]="ConditionalCompilationOn";n[n.ConditionalCompilationSet=23]="ConditionalCompilationSet";n[n.ConditionalCompilationIf=24]="ConditionalCompilationIf";n[n.ConditionalCompilationElseIf=25]="ConditionalCompilationElseIf";n[n.ConditionalCompilationElse=26]="ConditionalCompilationElse";n[n.ConditionalCompilationEnd=27]="ConditionalCompilationEnd";n[n.ConditionalCompilationVariable=28]="ConditionalCompilationVariable";n[n.Identifier=29]="Identifier";n[n.Null=30]="Null";n[n.True=31]="True";n[n.False=32]="False";n[n.This=33]="This";n[n.StringLiteral=34]="StringLiteral";n[n.IntegerLiteral=35]="IntegerLiteral";n[n.NumericLiteral=36]="NumericLiteral";n[n.TemplateLiteral=37]="TemplateLiteral";n[n.LeftParenthesis=38]="LeftParenthesis";n[n.LeftBracket=39]="LeftBracket";n[n.AccessField=40]="AccessField";n[n.ArrowFunction=41]="ArrowFunction";n[n.RestSpread=42]="RestSpread";n[n.FirstOperator=43]="FirstOperator";n[n.Delete=43]="Delete";n[n.Increment=44]="Increment";n[n.Decrement=45]="Decrement";n[n.Void=46]="Void";n[n.TypeOf=47]="TypeOf";n[n.LogicalNot=48]="LogicalNot";n[n.BitwiseNot=49]="BitwiseNot";n[n.FirstBinaryOperator=50]="FirstBinaryOperator";n[n.Plus=50]="Plus";n[n.Minus=51]="Minus";n[n.Multiply=52]="Multiply";n[n.Divide=53]="Divide";n[n.Modulo=54]="Modulo";n[n.BitwiseAnd=55]="BitwiseAnd";n[n.BitwiseOr=56]="BitwiseOr";n[n.BitwiseXor=57]="BitwiseXor";n[n.LeftShift=58]="LeftShift";n[n.RightShift=59]="RightShift";n[n.UnsignedRightShift=60]="UnsignedRightShift";n[n.Equal=61]="Equal";n[n.NotEqual=62]="NotEqual";n[n.StrictEqual=63]="StrictEqual";n[n.StrictNotEqual=64]="StrictNotEqual";n[n.LessThan=65]="LessThan";n[n.LessThanEqual=66]="LessThanEqual";n[n.GreaterThan=67]="GreaterThan";n[n.GreaterThanEqual=68]="GreaterThanEqual";n[n.LogicalAnd=69]="LogicalAnd";n[n.LogicalOr=70]="LogicalOr";n[n.InstanceOf=71]="InstanceOf";n[n.In=72]="In";n[n.Comma=73]="Comma";n[n.Assign=74]="Assign";n[n.PlusAssign=75]="PlusAssign";n[n.MinusAssign=76]="MinusAssign";n[n.MultiplyAssign=77]="MultiplyAssign";n[n.DivideAssign=78]="DivideAssign";n[n.ModuloAssign=79]="ModuloAssign";n[n.BitwiseAndAssign=80]="BitwiseAndAssign";n[n.BitwiseOrAssign=81]="BitwiseOrAssign";n[n.BitwiseXorAssign=82]="BitwiseXorAssign";n[n.LeftShiftAssign=83]="LeftShiftAssign";n[n.RightShiftAssign=84]="RightShiftAssign";n[n.UnsignedRightShiftAssign=85]="UnsignedRightShiftAssign";n[n.LastAssign=85]="LastAssign";n[n.ConditionalIf=86]="ConditionalIf";n[n.Colon=87]="Colon";n[n.LastOperator=87]="LastOperator";n[n.Case=88]="Case";n[n.Catch=89]="Catch";n[n.Default=90]="Default";n[n.Finally=91]="Finally";n[n.New=92]="New";n[n.RightParenthesis=93]="RightParenthesis";n[n.RightBracket=94]="RightBracket";n[n.SingleLineComment=95]="SingleLineComment";n[n.MultipleLineComment=96]="MultipleLineComment";n[n.UnterminatedComment=97]="UnterminatedComment";n[n.PreprocessorDirective=98]="PreprocessorDirective";n[n.Enum=99]="Enum";n[n.Extends=100]="Extends";n[n.Super=101]="Super";n[n.Class=102]="Class";n[n.Const=103]="Const";n[n.Export=104]="Export";n[n.Import=105]="Import";n[n.Module=106]="Module";n[n.Let=107]="Let";n[n.Implements=108]="Implements";n[n.Interface=109]="Interface";n[n.Package=110]="Package";n[n.Private=111]="Private";n[n.Protected=112]="Protected";n[n.Public=113]="Public";n[n.Static=114]="Static";n[n.Yield=115]="Yield";n[n.Native=116]="Native";n[n.Get=117]="Get";n[n.Set=118]="Set";n[n.AspNetBlock=119]="AspNetBlock";n[n.ReplacementToken=120]="ReplacementToken";n[n.EndOfLine=121]="EndOfLine";n[n.WhiteSpace=122]="WhiteSpace";n[n.Error=123]="Error";n[n.RegularExpression=124]="RegularExpression";n[n.Limit=125]="Limit"}(i=t.JSToken||(t.JSToken={})),function(n){function o(n){return function(t){for(var r,i=0;i<n.length;i++)if(r=n[i],!t.exec(r).success)return!1;return!0}}function s(n){return function(t){for(var i=0;i<n.length;i++)if(t.exec(n[i]).success)return!0;return!1}}function f(n){return function(t,i){for(var f,u,r=0;r<n.length;r++)if(f=n[r],u=t.exec(f,!0),u.success)return e(u,i);return!1}}function e(n,t){return t.tokon=n.tokon,t.resut=n.resut,t.msg=n.msg,t.children=n.children,!0}function a(t){var i=new n.syntaxer(t);return i.exec(n.parsers.composedPath)}function v(t){var i=new n.syntaxer(t);return i.exec(n.parsers.expression)}function y(t,i){var r=new n.syntaxer(t);return r.exec(i)}var t,u,r,h,c,l;(function(n){n[n.uknown=0]="uknown";n[n.alpha=1]="alpha";n[n.num=2]="num";n[n.prnt=4]="prnt";n[n.brkt=8]="brkt";n[n.dot=16]="dot";n[n.prefix=32]="prefix";n[n.filter=64]="filter";n[n.whites=128]="whites";n[n.alphanum=3]="alphanum"})(t=n.TokenType||(n.TokenType={})),function(n){n[n.whitespace=0]="whitespace";n[n.undefined=1]="undefined";n[n.boolean=2]="boolean";n[n.number=3]="number";n[n.string=4]="string";n[n.word=5]="word";n[n.keyword=6]="keyword";n[n.path=7]="path";n[n.functionCall=8]="functionCall";n[n.arrayCall=9]="arrayCall"}(u=n.CToken||(n.CToken={}));n.ands=o;n.ors=s;n._ors=f,function(n){n[n.or=0]="or";n[n.and=1]="and";n[n.xor=2]="xor";n[n.eq=3]="eq";n[n.neq=4]="neq";n[n.dot=5]="dot"}(r=n.oper||(n.oper={}));h=function(){function n(n){this.token=n;this.terms=[]}return n.prototype.and=function(n,t){return this.terms.push({oper:r.and,parser:n,neq:t}),this},n.prototype.set=function(n,t){return this.terms.push({oper:r.dot,parser:n,neq:t}),this},n.prototype.$open=function(t,i,r){var u=new n(t);return u.parent=this,this.terms.push({oper:i,neq:r,parser:u.Parser}),u},n.prototype.$close=function(){return this.parent},n.prototype.or=function(n,t){return this.terms.push({oper:r.or,parser:n,neq:t}),this},n.prototype.xor=function(n,t){return this.terms.push({oper:r.xor,parser:n,neq:t}),this},n.prototype.eq=function(n,t){return this.terms.push({oper:r.eq,parser:n,neq:t}),this},n.prototype.neq=function(n,t){return this.terms.push({oper:r.neq,parser:n,neq:t}),this},Object.defineProperty(n.prototype,"Parser",{get:function(){var n=this;return this._parser?this._parser:function(t,i){var u,e,f;if(i.tokon=n.token,n.terms.length==0)return!0;for(u=n.exect(n.terms[0],t),e=1;e<n.terms.length;e++){f=n.terms[e];switch(f.oper){case r.and:u=u&&n.exect(f,t);break;case r.or:u=u||n.exect(f,t);break;case r.eq:u=u==n.exect(f,t);break;case r.neq:case r.xor:u=u!=n.exect(f,t);break;case r.dot:u=n.exect(f,t);break;default:throw"";}}return!0}},enumerable:!0,configurable:!0}),n.prototype.exect=function(n,t){var i=t.exec(n.parser).success;return n.neq&&(i=!i),i},n}();n.parserBuilder=h;c=function(){function r(n){var t,i,u;for(this.src=n,this.stack=[],this.index=-1,t=new Array(n.length),i=0;i<n.length;i++)u=n[i],t[i]={index:i,char:u,code:u.charCodeAt(0),type:r.getToken(u)};this.Tokens=t;this.currentNode={success:null,children:[],start:t[0],end:t[t.length-1],tokon:"prg",parent:null};this.index=0}return Object.defineProperty(r.prototype,"CurrentString",{get:function(){return this.src.substring(this.currentNode.start.index,this.index)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"ShiftIndex",{get:function(){return this.index-this.currentNode.start.index},enumerable:!0,configurable:!0}),r.prototype.validate=function(n){if(!n)return this.stack.pop(),!0;var t=this.stack.indexOf(n);if(t!=-1)return this.stack.splice(t,this.stack.length-t),!0},r.prototype.save=function(){var n={index:this.index};return this.stack.push(n),n},r.prototype.restore=function(n){var t=n?this.stack.indexOf(n):this.stack.length-1;if(t!=-1)return this.stack.splice(t,this.stack.length-t),this.index=n.index,!1},Object.defineProperty(r.prototype,"current",{get:function(){return this.Tokens[this.index]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"previous",{get:function(){return this.Tokens[this.index-1]},enumerable:!0,configurable:!0}),r.prototype.next=function(){var n=this.index;if(this.index<this.Tokens.length)this.index++;else return null;return this.Tokens[this.index]},r.prototype.back=function(){var n=this.index;if(this.index>0)this.index--;else return null;return this.Tokens[this.index]},r.prototype.shift=function(){return this.index++,!0},r.prototype.unshift=function(){return this.index--,!0},r.prototype.JumpBy=function(n){this.index+=n;this.index=this.index<-1?-1:this.index>this.src.length?this.src.length:this.index},r.prototype.JumpTo=function(n){this.index=n},r.getToken=function(n){var i=n.charCodeAt(0);return i>64&&i<91||i===95||i>96&&i<123?t.alpha:i>47&&i<58?t.num:r.opers.indexOf(i)!=-1?t.prefix:i==91||i==93?t.brkt:i==124?t.filter:i===46?t.dot:r.whites.indexOf(i)!=-1?t.whites:i===40||i===41?t.prnt:t.uknown},r.prototype.exec=function(n,t){var r=this.save(),u=this.currentNode,i={success:!1,start:this.current,parent:this.currentNode,children:[]};try{if(!this.current)return i;this.currentNode=i;i.success=n(this,i);i.end=this.previous;i.success?(this.validate(r),t||u.children.push(i)):this.restore(r)}catch(f){this.restore(r)}return this.currentNode=u,i},r.prototype.fastExec=function(n,t,i){var r=this.save(),f=this.currentNode,u;try{if(!this.current)return!1;if(u=n.apply(t||this,i),u)return!0;this.restore(r)}catch(e){this.restore(r)}return!1},r.prototype.getChar=function(){var n=this.Tokens[this.index];return n&&n.char||""},r.prototype.testChar=function(n){var t=this.Tokens[this.index],i=t?t.char==n:!1;return i&&this.index++,i},r.prototype.getNextChar=function(n){var i=this.index,t;return n&&this.index++,t=this.Tokens[i+1],t?t.char:""},r.prototype.get=function(n){var t=this.Tokens[this.index+n];return t&&t.char},r.IsHexDigit=function(n){return"0"<=n&&n<="9"||"A"<=n&&n<="F"||"a"<=n&&n<="f"},r.IsDigit=function(n){return"0"<=n&&n<="9"},r.prototype.ScanNumber=function(n,t){var f=this.index-1,o="."==n,e=o?i.NumericLiteral:i.IntegerLiteral,h=!1,u,c=!1,s;if("0"==n){if(u=this.getChar(),u=="0"&&this.shift(),"x"==u||"X"==u){if(r.IsHexDigit(this.getNextChar(!1)))for(this.shift();r.IsHexDigit(this.getNextChar(!1));)this.shift();return t.value=this.src.substr(f,this.index-f),e}if("b"==u||"B"==u){if(u=this.getNextChar(!0),u=="1"||u=="0")while("0"==(u=this.getNextChar(!1))||u=="1")this.next();return t.value=this.src.substr(f,this.index-f),e}if("o"==u||"O"==u){if(u=this.getNextChar(!0),"0"<=u&&u<="7")while("0"<=(u=this.getNextChar(!1))&&u<="7")this.shift();return t.value=this.src.substr(f,this.index-f),e}if("0"<=u&&u<="7"){while("0"<=u&&u<="7")u=this.getNextChar(!0);if(r.IsDigit(u)&&"7"<u)for(c=!0;"0"<=u&&u<="9";)u=this.getNextChar(!0);return t.value=this.src.substr(f,this.index-f),e}if(u!="e"&&u!="E")return this.index=f+1,i.Error}do if(u=this.getChar(),!r.IsDigit(u))if("."==u){if(o)break;o=!0;e=i.NumericLiteral}else if("e"==u||"E"==u){if(h)break;h=o=!0;e=i.NumericLiteral}else if("+"==u||"-"==u){if(s=this.previous.char,"e"!=s&&"E"!=s)break}else break;while(this.shift());return u=this.previous.char,("+"==u||"-"==u)&&(this.index--,u=this.getChar()),("e"==u||"E"==u)&&(this.index--,u=this.getChar()),e==i.NumericLiteral&&u=="."&&(e=i.IntegerLiteral),t.value=this.src.substr(f,this.index-f),e},r.prototype.ScanString=function(n){var i=this.index-1,t=this.current;if(!t)return!1;do{if(t.char==n)return this.shift(),this.src.substr(i,this.index-i);t.char=="\\"&&this.shift()}while(t=this.next());return this.index=i+1,null},r.prototype.IsUnicode=function(){var t=this.get(0),n;if(t=="\\")return this.shift(),this.get(0)=="u"?(n={},this.ScanNumber("0",n)==i.Error)?(this.JumpBy(-2),!1):!0:(this.unshift(),!1)},r.prototype.ScanIdentifier=function(){for(var n=this.index-1,t=this.current;(t=this.next())&&(this.isChar(t)||this.fastExec(this.IsUnicode)););return this.src.substr(n,this.index-n)},r.prototype.isChar=function(n){return n.type?(n.type&t.alphanum)==n.type||n.code==36||n.code==95:!1},r.prototype.SkipToEndOfLine=function(){for(var n=this.get(0);n!=null&&n!='\0'&&n!="\n"&&n!="\r"&&n!=" 28"&&n!=" 29";)n=this.getNextChar(!0)},r.prototype.IsLineTerminator=function(n,t){switch(n){case"\r":return 10==(this.get(t)||"").charCodeAt(0)&&this.shift(),!0;case"\n":return!0;case"\u2028":return!0;case"\u2029":return!0;default:return!1}},r.prototype.SkipMultilineComment=function(){for(;;){for(var n=this.get(0);"*"==n;){if(n=this.getNextChar(!0),"/"==n){this.shift();return}if('\0'==n)break;this.IsLineTerminator(n,1)&&(n=this.getNextChar(!0))}if('\0'==n&&!n)break;this.IsLineTerminator(n,1)&&this.shift();this.shift()}},r.IsBlankSpace=function(n){switch(n){case"\t":case"\x0b":case"\f":case" ":case" ":case"﻿":return!0;default:return n<128?!1:this.spaceSeparatorsChars.indexOf(n)!==-1}},r.prototype._getNextToken=function(t){var f,u,o,e,s;for(t?t.value=void 0:t={},u="";u=this.get(0);){this.shift();switch(u){case"\n":case"\r":case"\u2028":case"\u2029":continue;case"\t":case'\v':case"\f":case" ":continue;case"!":if(this.testChar("=")){if(this.testChar("="))return i.StrictNotEqual;i.NotEqual}return i.LogicalNot;case'"':case"'":return t.value=this.ScanString(u),i.StringLiteral;case"$":case"_":return t.value=this.ScanIdentifier(),i.Identifier;case"%":return this.testChar("=")?i.ModuloAssign:i.Modulo;case"&":return(f=i.BitwiseAnd,this.testChar("&"))?i.LogicalAnd:this.testChar("=")?i.BitwiseAndAssign:i.BitwiseAnd;case"(":return i.LeftParenthesis;case")":return i.RightParenthesis;case"*":return this.testChar("=")?i.MultiplyAssign:i.Multiply;case"+":return this.testChar("+")?i.Increment:this.testChar("=")?i.PlusAssign:i.Plus;case",":return i.Comma;case"-":return this.testChar("-")?i.Decrement:this.testChar("=")?i.MinusAssign:i.Minus;case".":return(u=this.getChar(),u=="."&&this.get(1)==".")?(this.JumpBy(2),i.RestSpread):(r.IsDigit(u)&&(o={},t.value=this.ScanNumber(".",o)),i.AccessField);case"/":switch(this.getChar()){case"/":this.SkipToEndOfLine();continue;case"*":this.SkipMultilineComment();continue;case"=":return this.shift(),i.DivideAssign}return i.Divide;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.ScanNumber(u,t);case":":return i.Colon;case";":return i.Semicolon;case"<":return(f=i.LessThan,this.testChar("<")&&(f=i.LeftShift),this.testChar("="))?f==i.LessThan?i.LessThanEqual:i.LeftShiftAssign:f;case"=":if(this.testChar("=")){if(this.testChar("="))return i.StrictEqual;i.Equal}else if(this.testChar(">"))return i.ArrowFunction;return i.Assign;case">":return(f=this.testChar(">")?this.testChar(">")?i.UnsignedRightShift:i.RightShift:i.GreaterThan,this.testChar("="))?f==i.GreaterThan?i.GreaterThanEqual:f==i.RightShift?i.RightShiftAssign:f==i.UnsignedRightShift?i.UnsignedRightShiftAssign:i.Error:f;case"?":return i.ConditionalIf;case"A":case"B":case"C":case"D":case"E":case"F":case"G":case"H":case"I":case"J":case"K":case"L":case"M":case"N":case"O":case"P":case"Q":case"R":case"S":case"T":case"U":case"V":case"W":case"X":case"Y":case"Z":return t.value=this.ScanIdentifier(),i.Identifier;case"[":return i.LeftBracket;case"\\":return(t.value=this.ScanIdentifier(),t.value==null)?i.Error:i.Identifier;case"]":return i.RightBracket;case"^":return this.testChar("=")?i.BitwiseXorAssign:i.BitwiseXor;case"#":return i.Error;case"`":return t.value=this.ScanString(u),i.StringLiteral;case"a":case"b":case"c":case"d":case"e":case"f":case"g":case"h":case"i":case"j":case"k":case"l":case"m":case"n":case"o":case"p":case"q":case"r":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":return(t.value=this.ScanIdentifier(),e=n.JSKeyword.get(t.value),e)?(t.value=e,e.token):i.Identifier;case"{":return i.LeftCurly;case"|":return this.testChar("|")?i.LogicalOr:this.testChar("=")?i.BitwiseOrAssign:i.BitwiseOr;case"}":return i.RightCurly;case"~":return i.BitwiseNot;default:if(u=='\0'){if(this.index>=this.src.length-1)return i.EndOfFile;this.shift();continue}if(s=this.getNextChar(!1).charCodeAt(0),t.value=this.ScanIdentifier(),t.value!=null)return i.StringLiteral;while(r.IsBlankSpace(u=this.getChar()))this.shift();continue}}},r.opers=[36,38,42,43,45,58,60,61,62,63,64,94,126],r.whites=[0,9,10,10,13,32],r.spaceSeparators=[32,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288],r.spaceSeparatorsChars="                　",r}();n.syntaxer=c,function(n){function b(n){return n.type?(n.type&t.alphanum)==n.type||n.code==36||n.code==95:!1}function k(n,t,i,r){var f=n.current,u;for(i.tokon=r===void 0?"keyword":r,u=0,u=0;u<t.length&&f;u++){if(f.char!==t[u])return!1;if(f=n.next(),!f)return u===t.length-1}return i.resut=t,!0}function h(n,i){i.tokon=u.whitespace;var r=n.current;do if(r.type!=t.whites)break;while(r=n.next());return!0}function i(n){return l[n]?l[n]:l[n]=function(t,i){return k(t,n,i)}}function d(n,t){var f=n.current,r;if(t.tokon=u.undefined,n.exec(i("null"),!0).success)r=null;else if(n.exec(i("undefined"),!0).success)r=void 0;else return!1;return t.resut=r,!0}function g(n,t){var f=n.current,r;if(t.tokon=u.boolean,r=null,n.exec(i("true"),!0).success)r=!0;else if(n.exec(i("false"),!0).success)r=!1;else return!1;return t.resut=r,!0}function nt(n,t){var i=n.current,r;if(t.tokon=u.string,r=i.char,r==="'"||r==='"')while(i=n.next()){if(i.char==r)return n.shift(),t.resut=n.CurrentString,!0;i.char=="\\"&&n.shift()}return!1}function tt(n,t){var r=n.current;return(t.tokon=u.number,!n.exec(v).success)?!1:(n.exec(o([i("e"),v]),!0),t.resut=parseFloat(n.CurrentString),!0)}function it(n,t){var i=n.exec(nt,!0);return i.success||(i=n.exec(tt,!0)).success||(i=n.exec(g,!0)).success||(i=n.exec(d,!0)).success?e(i,t):!1}function v(n,t){var i=n.current,f,r;for(t.tokon=u.number,f=0,r=!1;i.char==="-"||i.char==="+";)i=n.next();while(i){if(i.char==="."){if(f)return f===n.ShiftIndex+1?(n.unshift(),r):(t.resut=parseFloat(n.CurrentString),!0);f=n.ShiftIndex}else{if(i.char<"0"||i.char>"9")return r?(t.resut=parseFloat(n.CurrentString),!0):!1;r===!1&&(r=!0)}i=n.next()}return!1}function yt(n,t){for(var i=n.current,r=i.char;i=n.next();){if(i.char==r)return n.shift(),t.resut=n.CurrentString,!0;i.char=="\\"&&n.shift()}return!1}function r(n,i){var r=n.current;if(i.tokon=u.word,r.char=="'"||r.char=='"')return yt(n,i);if(r.type===t.num||!b(r))return!1;while((r=n.next())&&b(r));return i.resut=n.CurrentString,!0}function rt(n,i){var r=n.current,u,f;if(i.tokon="pint",u=r.char,f=1,(u=="+"||u=="-")&&(u=="-"&&(f=-1),n.shift()),r.type!=t.num)return!1;while(r=n.next())if(r.type!=t.num)break;return i.resut=parseInt(n.CurrentString),!0}function y(n,t){var r=n.current,i;return(t.tokon="anonymousscop",r.char=="~"&&!!n.next())?(i=n.exec(rt,!0),t.resut=i.resut,i.success):!1}function p(n,t){var u=n.current,i;return(t.tokon="namedscop",u.char=="$"&&!!n.next())?(i=n.exec(r,!0),t.resut=i.resut,i.success):!1}function ut(n,t){var u=n.current,i;return(t.tokon="subscop",u.char=="*"&&!!n.next())?(i=n.exec(r,!0),t.resut=i.resut,i.success):!1}function ft(n,t){var i=n.current,r,f,u;return(t.tokon="typedscope",i.char!=="[")?!1:(i=n.next())?(i.char==":"?(r=i.char,n.next()):i.char=="="&&(r=i.char,n.next()),u=(f=n.exec(ot)).success&&n.current&&n.current.char=="]"&&n.shift(),u&&(t.resut={type:r,path:f.resut}),u):!1}function et(n,i){var u;if(i.tokon="bindscope",n.exec(h,!0),u=n.exec(r,!0),!u.success)return!1;for(i.resut=[u.resut];n.current&&n.current.type==t.dot;){if(n.next(),u=n.exec(r,!0),!u.success)return n.unshift();i.resut.push(u.resut)}return!0}function ot(n,i){n.exec(h,!0);var u=n.exec(r,!0);if(!u.success)return!1;while(n.current&&n.current.type==t.dot)if(n.next(),!n.exec(r,!0))return n.unshift();return i.resut=n.CurrentString,!0}function st(n,t){var i=n.current;t.tokon="parentscop";t.resut=0;do{if(i.char!="^")break;t.resut++}while(i=n.next());return!!t.resut}function a(n,t){n.exec(h,!0);var r=[],o=!0,f=n.exec(ht,!0),o=!f.success;for(o||r.push(f);(o?(o=!1,!0):n.exec(i("."),!0).success)&&(f=n.exec(ct,!0)).success;)r.push(f);return r.length==1?e(r[0],t):(t.tokon=u.path,t.resut=r,!!r.length)}function w(n,t){var r;return n.exec(i("("),!0).success&&(r=n.exec(c,!0)).success&&n.exec(i(")"),!0).success?e(r,t):!1}function c(n,t){var i;return(i=n.exec(f([w,lt,at,it,a]),!0)).success?e(i,t):!1}function lt(n,t){var e,f,r;if(n.exec(h,!0),e=!0,t.tokon=u.functionCall,f={args:[],caller:void 0},t.resut,(r=n.exec(a,!0)).success&&n.exec(i("("),!0).success){if(f.caller=r,r=n.exec(c,!0),r.success)for(f.args.push(r);n.exec(i(","),!0).success&&(r=n.exec(c,!0)).success;)f.args.push(r);if(n.exec(i(")"),!1).success)return t.resut=f,!0}return!1}function at(n,t){var o,e,r,f;return(n.exec(h,!0),t.tokon=u.arrayCall,o=!0,e=c,(r=n.exec(a,!0)).success&&n.exec(i("["),!0).success&&(f={index:void 0,caller:r},(r=n.exec(e,!0)).success&&n.exec(i("]")).success))?(f.index=r,t.resut=f,!0):!1}var vt,l,pt,ht,ct,wt;(function(n){function i(n,i){var r=n.current.char;return t.indexOf(r)!=-1&&n.next()&&n.current.char==r?(n.next(),i.resut=r+r,i.tokon="suffix_inc",!0):!1}function r(n,i){var r=n.current.char;if(i.tokon="suffix_inc",t.indexOf(r)!=-1){if(r!=="!")if(n.next()&&n.current.char==r)i.resut=r+r;else return!1;else i.resut=r;return!0}return!1}function u(n,t){var e=n.exec(r,!1),u,f;return u.success?(f=n.exec(i,!1),t.tokon="term",t.resut={pre:e,exp:u,suff:f},!0):!1}function f(n){if(n.current.char!="(")return!1;n.exec(o)}function e(){}function o(){return!1}function s(){}var t="+-";n.Term=u;n.parent=f;n.Expre=e;n.chain=s})(vt=n.expr||(n.expr={}));n._keyword=k;n.whitespace=h;l={};n.keyword=i;n.undefined=d;n.boolean=g;n.string=nt;n.number=tt;n.constant=it;n.digit=v;n.word=r;n.pint=rt;n.anonymouseScop=y;n.namedScop=p;n.subScop=ut;n.typedScop=ft;pt=f([r,c]);n.bindscope=et;n.stringChainedScop=ot;ht=f([i("this"),i("data"),i("window"),y,p,st]);ct=f([w,ut,ft,et]);n.composedPath=a;n.parent=w;n.expression=c;n.functionCall=lt;n.arrayCall=at,function(n){n[n.bindscope=0]="bindscope";n[n.typedscope=1]="typedscope";n[n.subscop=2]="subscop";n[n.parentscop=3]="parentscop";n[n.namedscop=4]="namedscop";n[n.anonymousscop=5]="anonymousscop";n[n.thisscope=6]="thisscope";n[n.keyword=7]="keyword"}(wt=n.coPathType||(n.coPathType={}))}(l=n.parsers||(n.parsers={}));n.parseComposePath=a;n.parseExpression=v;n.Execute=y}(r=t.Parser||(t.Parser={})),function(n){var u=function(){function n(t,i){this.token=t;this.name=i;n.keywors||n.InitKeywords();n.keywors[i]=this}return n.get=function(n){return this.keywors||this.InitKeywords(),this.keywors[n]},n.InitKeywords=function(){this.keywors={};new n(i.Break,"break");new n(i.Case,"case");new n(i.Catch,"catch");new n(i.Class,"class");new n(i.Const,"const");new n(i.Continue,"continue");new n(i.Do,"do");new n(i.Delete,"delete");new n(i.Default,"default");new n(i.Debugger,"debugger");new n(i.Else,"else");new n(i.Enum,"enum");new n(i.Export,"export");new n(i.Extends,"extends");new n(i.For,"for");new n(i.False,"false");new n(i.Finally,"finally");new n(i.Function,"function");new n(i.Get,"get");new n(i.If,"if");new n(i.In,"in");new n(i.Import,"import");new n(i.Interface,"interface");new n(i.Implements,"implements");new n(i.InstanceOf,"instanceof");new n(i.Let,"let");new n(i.New,"new");new n(i.Null,"null");new n(i.Native,"native");new n(i.Public,"public");new n(i.Package,"package");new n(i.Private,"private");new n(i.Protected,"protected");new n(i.Return,"return");new n(i.Set,"set");new n(i.Super,"super");new n(i.Static,"static");new n(i.Switch,"switch");new n(i.Try,"try");new n(i.This,"this");new n(i.True,"true");new n(i.Throw,"throw");new n(i.TypeOf,"typeof");new n(i.Var,"var");new n(i.Void,"void");new n(i.With,"with");new n(i.While,"while");new n(i.Yield,"yield")},n}(),t,r;n.JSKeyword=u;t=function(){function n(){}return n.prototype.Is=function(n){return this.Token==n},n.prototype.IsEither=function(n,t){var i=this.Token;return i==n||i==t},n.prototype.IsOne=function(){for(var r,i,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(n!=null)for(r=this.Token,i=n.length-1;i>=0;--i)if(n[i]==r)return!0;return!1},n}();r=function(n){function r(){var i=n!==null&&n.apply(this,arguments)||this;return i.currentContext=new t,i}return __extends(r,n),r.prototype.getNextToken=function(){var n={};return this.currentContext.Token=this._getNextToken(n),this.currentContext.Value=n.value,this.currentContext.Token},r.prototype.ParseStatement=function(n,t){t===void 0&&(t=!1);for(var r=this.currentContext.Token;;)switch(r){case i.EndOfFile:return null;case i.Semicolon:return this.getNextToken(),null;case i.RightCurly:this.getNextToken();break;case i.LeftCurly:case i.Debugger:return this.getNextToken(),this.currentContext.Token==i.Semicolon&&this.getNextToken(),null;case i.Var:case i.Const:case i.Let:case i.If:case i.For:case i.Do:case i.While:case i.Continue:case i.Break:case i.Return:case i.With:case i.Switch:case i.Throw:case i.Try:case i.Function:case i.Class:case i.Else:this.getNextToken();break;case i.ConditionalCommentStart:case i.ConditionalCompilationOn:this.getNextToken();case i.ConditionalCompilationSet:case i.ConditionalCompilationIf:case i.ConditionalCompilationElseIf:case i.ConditionalCompilationElse:this.getNextToken();case i.ConditionalCompilationEnd:this.getNextToken();case i.Import:case i.Export:case i.Identifier:r="default";continue;case i.Module:r="default";continue}},r}(n.syntaxer);n.AST=r}(r=t.Parser||(t.Parser={})),function(n){var t=function(){function n(){this.stack=[];this.pcurs=0;this.isCode=!1}return Object.defineProperty(n.prototype,"currentChar",{get:function(){return this.code[this.curs]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nextChar",{get:function(){return this.code[this.curs+1]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"MoveNext",{get:function(){return this.curs++,this.curs<this.len},enumerable:!0,configurable:!0}),n.prototype.init=function(n){this.code=n;this.curs=-1;this.len=n.length;this.stack=[];this.pcurs=0;this.isCode=!1},n.prototype.getString=function(){for(var i=this.currentChar,t=this.curs+1,n='\0';this.MoveNext;)if(n!=="\\"&&(n=this.currentChar,n===i))return this.code.substr(t,this.curs-t);throw"Error";},n.prototype._toStack=function(){var t=this.curs-this.pcurs,n;return t!=0&&(n=this.code.substr(this.pcurs,t),this.stack.push(this.isCode?{Code:n}:n)),this.curs<this.len?(this.curs+=1,this.pcurs=this.curs+1,this.isCode=!this.isCode):this.isCode=!1,this.stack},n.prototype.Compile=function(n){for(n[0]!=="="?this.init(n):this.init(n.substr(1));this.MoveNext;){var t=this.currentChar;this.isCode?t==='"'?this.getString():t==="'"?this.getString():t==="}"&&this.nextChar==="}"&&this._toStack():t==="{"&&this.nextChar==="{"&&this._toStack()}return this._toStack()},n.Compile=function(n){return this.default.Compile(n)},n.toRegString=function(n){for(var t,r="",i=0;i<n.length;i++)t=n[i],r+=t==='"'||t==="'"?"\\"+t:t;return r},n.GenearteString=function(n){for(var i,r=new Array(n.length),t=0;t<n.length;t++)i=n[t],r[t]=typeof i=="string"?'"'+this.toRegString(i)+'"':i.result;return r.join("")},n.default=new n,n}();n.StringTemplate=t}(r=t.Parser||(t.Parser={}));window.p=r});define("sys/UI",["require","exports","sys/Corelib","sys/Filters","context","template|../assets/templates/UITemplates.html"],function(n,t,i,r,u,f){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0});var o="px",h=Error,c=Text,e;(function(n){var t,e,r,u,f;(function(n){n[n.Handled=0]="Handled";n[n.Release=-1]="Release";n[n.ByPass=2]="ByPass"})(t=n.KeyboardControllerResult||(n.KeyboardControllerResult={}));e=function(){function n(n,t){this.element=n;this.header=t;this.pos1=0;this.pos2=0;this.pos3=0;this.pos4=0;this.closeDragElementHandler={handleEvent:function(){this.owner.closeDragElement()},owner:this};this.elementDragHandler={handleEvent:function(n){this.owner.elementDrag(n)},owner:this};this.initialize(n,t)}return n.prototype.elementDrag=function(n){n=n||window.event;n.preventDefault();this.pos1=this.pos3-n.clientX;this.pos2=this.pos4-n.clientY;this.pos3=n.clientX;this.pos4=n.clientY;this.element.style.top=this.element.offsetTop-this.pos2+"px";this.element.style.left=this.element.offsetLeft-this.pos1+"px"},n.prototype.closeDragElement=function(){document.removeEventListener("mouseup",this.closeDragElementHandler);document.removeEventListener("mousemove",this.elementDragHandler)},n.prototype.handleEvent=function(n){n=n||window.event;n.preventDefault();this.pos3=n.clientX;this.pos4=n.clientY;document.addEventListener("mouseup",this.closeDragElementHandler);document.addEventListener("mousemove",this.elementDragHandler)},n.prototype.initialize=function(n,t){this.Dispose();this.element=n;this.header=t;this.header.addEventListener("mousedown",this)},n.prototype.Dispose=function(){this.closeDragElement();this.header.removeEventListener("mousedown",this);this.element=void 0;this.header=void 0},n}();r=function(){function t(n){this.Owner=n;this.OnComined=new i.bind.EventListener(0);this.handlers={}}return t.prototype.sort=function(t){function i(n){for(var t=0;n;)t++,n=n.parentElement;return t}function r(n,t){if(n==t)return 0;while(n)if(n=n.nextSibling,n==t)return-1;return 1}t.sort(function(t,u){if(!t.target)return-1;if(!u.target)return 1;if(!t.target&&!u.target)return 0;var f=t.target instanceof n.JControl?t.target.View:t.target,e=u.target instanceof n.JControl?u.target.View:u.target,o;return f.contains(e)?1:e.contains(f)?-1:o=i(e)-i(f)>0?1:o<0?-1:r(f,e)})},t.prototype.sort1=function(n){function t(n){for(var t=0;n;)t++,n=n.parentElement;return t}function i(n,t){if(n==t)return 0;while(n)if(n=n.nextSibling,n==t)return-1;return 1}n.sort(function(n,r){var u;return n.contains(r)?1:r.contains(n)?-1:u=t(r)-t(n)>0?1:u<0?-1:i(n,r)})},Object.defineProperty(t.prototype,"KeyA",{get:function(){return this._keyA},set:function(n){this._keyA=n;this._keyB=null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"KeyB",{get:function(){return this._keyB},set:function(n){if(this._keyA==null){this._keyA=n;this._keyB=null;return}this._keyB=n;this._rise()},enumerable:!0,configurable:!0}),t.prototype.elementInViewport1=function(n){for(var t=n.offsetTop,i=n.offsetLeft,r=n.offsetWidth,u=n.offsetHeight;n.offsetParent;)n=n.offsetParent,t+=n.offsetTop,i+=n.offsetLeft;return t<window.pageYOffset+window.innerHeight&&i<window.pageXOffset+window.innerWidth&&t+u>window.pageYOffset&&i+r>window.pageXOffset},t.prototype.elementInViewport=function(n){var t;if(!this.dom.contains(n))return!1;for(var i=n.offsetTop,r=n.offsetLeft,u=n.offsetWidth,f=n.offsetHeight;n.offsetParent;)n=n.offsetParent,i+=n.offsetTop,r+=n.offsetLeft;return t=this.dom,i<t.offsetTop+t.offsetHeight&&r<t.offsetLeft+t.offsetWidth&&i+f>t.offsetTop&&r+u>t.offsetLeft},Object.defineProperty(t.prototype,"Cancel",{set:function(n){this._stopEvent=!!n},enumerable:!0,configurable:!0}),t.prototype._rise=function(){var r=this.handlers[this._keyA.key.toUpperCase()]&&this.handlers[this._keyA.key.toUpperCase()][this._keyB.key.toUpperCase()],u,t,i;if(this._stopEvent=!1,r)for(u=this.sort(r)||0;u<r.length;u++){try{if(t=r[u],i=t.target,i&&!this.elementInViewport(i instanceof n.JControl?i.View:i))continue;t.Invoke.call(t.Owner||t.target||this.Owner,this,t)}catch(f){}if(this._stopEvent)break}this._stopEvent=undefined;this.OnComined.PInvok(0,[this],this.Owner);this.reset()},t.prototype.reset=function(){this._keyB=null;this._keyA=null},t.prototype.handleEvent=function(n){if(n.preventDefault(),!this._pause&&n.ctrlKey){(n.keyCode>47&&n.keyCode<91||n.keyCode>97&&n.keyCode<123)&&(this.KeyB=n);return}this.reset()},t.prototype.isValid=function(n){if(typeof n=="string"){if(n.length==1)return n=n.charCodeAt(0),n>47&&n<91||n>97&&n<123}else if(typeof n=="number")return n>47&&n<91||n>97&&n<123;return!1},t.prototype.On=function(n,t,i,r,u){var f,e;if(this.isValid(n)&&this.isValid(t)&&typeof i=="function")return n=n.toUpperCase(),t=t.toUpperCase(),this.handlers[n]||(this.handlers[n]={}),f=this.handlers[n][t],f||(this.handlers[n][t]=f=[]),e={Invoke:i,Owner:u,target:r},f.push(e),f.sort(),e;throw"unvalide arguments";},t.prototype.Off=function(n,t,i){var r,u;if(this.isValid(n)&&this.isValid(t)){if(n=n.toUpperCase(),t=t.toUpperCase(),r=this.handlers[n]&&this.handlers[n][t],!r)return;u=r.indexOf(i);u!==-1&&r.splice(u,1)}else throw"unvalide arguments";},t.prototype.pause=function(){this._pause=!0},t.prototype.resume=function(){this._pause=!1},t.prototype.attachTo=function(n){this.dom&&this.dom.removeEventListener("keyup",this);this.dom=n;this.dom.addEventListener("keyup",this)},t.prototype.stopPropagation=function(){},t}();n.keyCominerEvent=r;u=function(n){function t(t){var i=n.call(this,t)||this;return i.desk=t,n.prototype.attachTo.call(i,t.View),i}return __extends(t,n),Object.defineProperty(t.prototype,"dom",{get:function(){var n=this.desk.CurrentApp;return(n&&n.CurrentModal||n||this.desk).View},set:function(){},enumerable:!0,configurable:!0}),t.prototype.attachTo=function(){},t}(r);n.DesktopKeyboardManager=u;f=function(){function n(n){this.Desktop=n;this._controllers=[]}return n.prototype.Current=function(){return this._current},n.prototype.GetController=function(n){if(!n)throw"Argument null exception";if(this._current==n)return!0;if(!n)throw"Argument null exception";var t=this._current,i={Controller:n};return t&&(t.stackable?t.onStop&&!t.onStop(i):t.onPause&&!t.onPause(i))?!1:n.onResume&&!n.onResume(i)?this.ResumeStack():(t&&(t.stackable||this._controllers.pop()),this._controllers.push(n),!0)},n.prototype.Release=function(n){var t=this._controllers.indexOf(n),i,n;if(t==-1)return!1;for(i=this._controllers.length-t;i-->=0;){if(n=this._controllers[this._controllers.length-1],n&&n.onStop&&!n.onStop({Controller:n}))return!1;this._controllers.pop();this._current=this._controllers[this._controllers.length-1]}return!0},n.prototype.ResumeStack=function(){for(var n=this._controllers[this._controllers.length-1],t;n&&n.onResume&&!n.onResume(t={Controller:n});)this._controllers.pop(),this._current=n=this._controllers[this._controllers.length-1];return!0},n.prototype.Invoke=function(n){for(var r,e=this._controllers.length,f=[void 0],u;r=r=this._controllers[--e];)if(f[0]={Controller:r,e:n},i.helper.TryCatch(r,r.invoke,void 0,f),u=f[0].Result||0,(u&t.Release)==t.Release&&this.Release(r),(u&t.ByPass)!==t.ByPass)return u;return u||0},n}();n.KeyboardControllerManager=f})(e=t.UI||(t.UI={})),function(n){function ui(){this.init=!0;this.initialize();this.OnFullInitialized()}function dr(n){var i=this,t;n==null||this.init||(n.init?ui.call(this):(t=this.parent,t&&!t.init&&t._onInitialize.Remove(this._id),n._onInitialize.Add(function(n){if(i.parent==n)ui.call(i);else throw"";},this._id)))}var v,t,vt,h,nt,gi,b,nr,et,k,ot,d,fi,r,p,tr,ir,ei,gr,oi,yt,f,si,l,pt,w,tt,wt,bt,rr,hi,ur,ci,st,li,it,fr,er,ht,ct,c,lt,kt,dt,e,g,gt,ni,ti,ii,or,ai,sr,vi,ut,lr,yi,ft,at,ar,pi,a,wi,bi,ri,vr,y,yr,pr,wr,br,ki,di,kr;(function(n){n[n.keydown=2]="keydown";n[n.keyup=3]="keyup";n[n.keypress=5]="keypress"})(v=n.Events||(n.Events={}));t=function(n){function t(r){var u=n.call(this,3)||this;return u._view=r,u._onInitialize=new i.bind.EventListener(u,!0),u._display=undefined,u._id=++t.counter,u.init=!1,u._events=0,r&&r.id===""&&(r.id=u._id+""),u._hasValue_()||(u.Value=u),u}return __extends(t,n),t.prototype.getParent=function(){return this.Parent||this._parentScop},t.prototype._OnValueChanged=function(){},t.prototype.setParent=function(n){if(!this.canBeParent(n))throw null;return n instanceof t?n.Add(this):this._parentScop=n,!0},t.prototype.CombinatorKey=function(n,t,i){return b.Current.KeyCombiner.On(n,t,i,this,this)},t.prototype.SearchParents=function(n){for(var t=this.Parent;t;){if(t instanceof n)return t;t=t.Parent}},t.LoadCss=function(n){var i=document.head,t=document.createElement("link");return t.setAttribute("as","style"),t.rel="stylesheet",t.type="text/css",t.href=n,t.media="all",i.appendChild(t),t},t.__fields__=function(){return[]},Object.defineProperty(t.prototype,"InnerHtml",{get:function(){return this._view.innerHTML},enumerable:!0,configurable:!0}),t.prototype.Float=function(n){this._view.style.cssFloat=n===0?"left":n===1?"initiale":"right"},t.prototype.Clear=function(){this._view.innerHTML=""},Object.defineProperty(t.prototype,"OnInitialized",{set:function(n){this.init?n(this):this._onInitialize.On=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Presenter",{get:function(){return this._presenter||this},set:function(n){this._presenter=n||this},enumerable:!0,configurable:!0}),t.prototype.setAttribute=function(n,t){return this.View.setAttribute(n,t),this},t.prototype.OnKeyDown=function(){},t.prototype.OnContextMenu=function(){},t.prototype.OnKeyCombined=function(){},t.prototype.setAttributes=function(n){var i=this.View;for(var t in n)i.setAttribute(t,n[t]);return this},t.prototype.applyStyle=function(){return this._view.classList.add.apply(this._view.classList,arguments),this},t.prototype.disapplyStyle=function(){return this._view.classList.remove.apply(this._view.classList,arguments),this},Object.defineProperty(t.prototype,"Visible",{get:function(){return this.View.style.display!="none"&&this.View.style.visibility=="visible"},set:function(n){(n=n===!0,n!==this._display)&&(this._display=this.View.style.display!=="none"?this.View.style.display:"",this.View.style.display=n?this._display:"none")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Wait",{set:function(n){n?this.applyStyle("Wait"):this.disapplyStyle("Wait")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Enable",{get:function(){return this.View.style.pointerEvents!="none"},set:function(n){this.View.style.pointerEvents=n?"all":"none"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Parent",{get:function(){return this.parent},set:function(n){this.parent=n;dr.call(this,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsInit",{get:function(){return this.init},enumerable:!0,configurable:!0}),t.prototype.OnFullInitialized=function(){this._onInitialize.PInvok(this,[this],this)},Object.defineProperty(t.prototype,"OnPaint",{set:function(n){i.PaintThread.OnPaint({args:[this],method:n,owner:this})},enumerable:!0,configurable:!0}),t.prototype.instantanyInitializeParent=function(){return!1},Object.defineProperty(t.prototype,"ToolTip",{set:function(n){this.View.title=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"View",{get:function(){return this._view},enumerable:!0,configurable:!0}),t.prototype._hasValue_=function(){return!1},t.createDiv=function(){return document.createElement("div")},t.prototype.addEventListener=function(n,r,u,f){var e=new i.basic.DomEventHandler(this._view,n,f,t._handle,{jc:this,handle:r,p:u});return e.Start(),e},t._handle=function(n,t,i){i.handle.call(this,i.jc,t,i.p)},t.prototype.AddRange=function(n){for(var t=0,i=n.length;t<i;t++)this.Add(n[t]);return this},t.prototype.Add=function(n){if(n.parent!=null){if(n.parent===this)return;n.parent.Remove(n,!1)}return n=this.getTemplate(n),n.Parent=this,this.View.appendChild(n.View),this},t.prototype.IndexOf=function(){},t.prototype.Insert=function(n,t){return n.parent!=null&&n.parent.Remove(n,!1),n=this.getTemplate(n),n.Parent=this,this.View.insertChildAtIndex(n.View,t),this},t.prototype.Remove=function(n,t){return n.parent!=this?!1:(n.Parent=null,this.View.contains(n.View)?this.View.removeChild(n.View):n._view.parentNode!=null&&n.View.remove(),t&&n.Dispose(),!0)},t.prototype.getTemplate=function(n){return n},Object.defineProperty(t.prototype,"Id",{get:function(){return this._id},enumerable:!0,configurable:!0}),t.prototype.Dispose=function(){var t=this.OnDispose();t!==null&&(this.parent&&this.parent.Remove(this,!1),this._presenter!=null&&this._presenter!=this&&this._presenter.Dispose(),this._presenter=null,this.Parent=null,this._view=null,this._display=null,this._onInitialize.Dispose(),this._presenter=null,this.parent=null,this.Presenter,i.basic.DomEventHandler.Dispose(this._view),n.prototype.Dispose.call(this),t||(this.DisposingStat=2))},t.prototype.OnHotKey=function(){},Object.defineProperty(t.prototype,"HotKey",{get:function(){return this._hotKey},set:function(n){this.isEventRegistred(v.keyup)||this.registerEvent(v.keypress);this._hotKey=n},enumerable:!0,configurable:!0}),t.prototype.handleEvent=function(n){switch(v[n.type]){case v.keyup:this._hotKey&&this._hotKey.IsPressed(n)&&this.OnHotKey()}},t.prototype.isEventRegistred=function(n){var t=typeof n=="number"?n:v[n];if(t===undefined)throw"event is not registred";return this._events/t%1==0},t.prototype.registerEvent=function(n){this._view.addEventListener(v[n],this)},t.toggleClass=function(n,t){n.classList.contains(t)?n.classList.remove(t):n.classList.add(t)},t.counter=0,t}(i.bind.Scop);n.JControl=t,function(t){function r(t){return function(u){if(!i.reflection.IsInstanceOf(u,n.JControl))throw"Attribute ContentControl cannot apply to non-UI.JControl Element";r.declare(u,t)}}function u(t){return function(r){if(!i.reflection.IsInstanceOf(r,n.JControl))throw"Attribute ChildrenProperty cannot apply to non-UI.JControl Element";u.declare(r,t)}}function f(){return function(t){if(!i.reflection.IsInstanceOf(t,n.JControl))throw"Attribute ChildrenProperty cannot apply to non-UI.JControl Element";f.declare(t,!0)}}t.ContentProperty=r;t.ChildrenProperty=u;t.SelfProcessing=f;i.Attributes.asAttribute(r,{AllowMultiple:!1,Heritable:!0,Target:i.Attributes.AttributeTargets.Class});i.Attributes.asAttribute(u,{AllowMultiple:!1,Heritable:!0,Target:i.Attributes.AttributeTargets.Class});i.Attributes.asAttribute(f,{AllowMultiple:!1,Heritable:!0,Target:i.Attributes.AttributeTargets.Class})}(vt=n.attributes||(n.attributes={}));h=function(n){function i(t){return n.call(this,t)||this}return __extends(i,n),Object.defineProperty(i.prototype,"Children",{get:function(){return this._c||(this._c=[])},enumerable:!0,configurable:!0}),i.prototype.Add=function(n){if(!this.Check(n))throw"Uncompatible";var i;return n instanceof t&&(i=n.Presenter,i===undefined&&(i=n),i.Parent!=null&&i.Parent.Remove(i,!1)),i=this.getTemplate(n),i.Parent=this,i!==n&&(n._presenter=i),this.Children.push(n),this.View.appendChild(i.View),this.OnChildAdded(n),this},i.prototype.Insert=function(n,i){if(!this.Check(n))throw"Uncompatible";var r;return n instanceof t&&(r=n.Presenter,r===undefined&&(r=n),r.Parent!=null&&r.Parent.Remove(r,!1)),r=this.getTemplate(n),r.Parent=this,this.Children.splice(i,0,n),this.View.insertChildAtIndex(n.View,i),this.OnChildAdded(n),this},i.prototype.Remove=function(n){var i=this.Children.indexOf(n),t;return i==-1?!0:(t=n.Presenter,t.Parent!=this)?!1:(t.Parent=null,this.Children.splice(i,1).length!=0&&this.View.removeChild(t.View),!0)},i.prototype.RemoveAt=function(n,t){var r=this.Children[n],i;if(r)return i=r.Presenter,i.Parent=null,this.Children.splice(n,1),this.View.removeChild(this.Presenter?i.Presenter.View:i.View),t&&r.Dispose(),!0},Object.defineProperty(i.prototype,"HasTemplate",{get:function(){return!1},enumerable:!0,configurable:!0}),i.prototype.getTemplate=function(n){return n},i.prototype.OnChildAdded=function(){},i.prototype.getChild=function(n){return this.Children[n]},i.prototype.IndexOf=function(n){return this.Children.indexOf(n)},Object.defineProperty(i.prototype,"Count",{get:function(){return this.Children.length},enumerable:!0,configurable:!0}),i.prototype.CloneChildren=function(){for(var t=this.Children,i=new Array(t.length),n=0,r=i.length;n<r;n++)i[n]=t[n]},i.prototype.Clear=function(n){for(var t=0,i=this.Count;t<i;t++)this.RemoveAt(0,n)},i.prototype.Dispose=function(){var t=this.OnDispose();t!==null&&(this.Clear(!0),this._c.length=0,this._c=null,n.prototype.Dispose.call(this),t||(this.DisposingStat=2))},i}(t);n.Control=h;gi=function(n){at.AuthStatChanged(n)};b=function(r){function u(){var t=r.call(this,document.body)||this;if(t.KeyCombiner=new n.DesktopKeyboardManager(t),t.apps=new i.collection.List(Object),t.IsSingleton=!0,t.KeyboardManager=new n.KeyboardControllerManager(t),t._keyboardControllers=[],t.focuser=new i.basic.focuser(t.View,!0),t.defaultKeys="jtpneruosdfhgkwl",t.loadApp=i.thread.Dispatcher.cretaeJob(function(n){t.CurrentApp=n},[null],t,!1),ui.call(t),at!=null)throw"";return at=t,t}return __extends(u,r),u.prototype.Logout=function(){this.AuthenticationApp?this.AuthenticationApp.Logout():this.CurrentApp.Logout()},u.prototype.OpenSignin=function(){this.CurrentApp=this.AuthenticationApp},u.ctor=function(){this.DPCurrentApp=i.bind.DObject.CreateField("CurrentApp",Object,null,function(n){n.__this.selectApp(n._old,n._new)});this.DPCurrentLayout=i.bind.DObject.CreateField("CurrentLayout",t,null,this.prototype._currentLayoutChanged)},u.prototype._currentLayoutChanged=function(){},u.prototype.selectApp=function(n,t){n&&(this.Remove(n,!1),rt=null,i.helper.TryCatch(n,n.OnDetached));t?(r.prototype.Add.call(this,t),rt=t,this.CurrentLayout=t&&t.CurrentModal||t,i.helper.TryCatch(t,t.OnAttached)):this.CurrentLayout=this;window.sessionStorage.setItem("app",t&&t.Name)},u.__fields__=function(){return[u.DPCurrentApp,u.DPCurrentLayout]},u.prototype.AuthStatChanged=function(n){n?this.Show(this.AuthenticationApp.RedirectApp):this.Show(this.AuthenticationApp)},u.prototype.initialize=function(){var n=this;document.addEventListener("keydown",this);document.addEventListener("contextmenu",this);this.KeyCombiner.attachTo(this.View);this.KeyCombiner.OnComined.Add(this.OnKeyCombined);this.observer=new i.bind.Observer(this,["CurrentApp","CurrentModal"]);this.observer.OnPropertyChanged(i.bind.Observer.DPValue,function(t,i){n.CurrentLayout=i._new||n.CurrentApp||n})},u.prototype.mouseController=function(){},Object.defineProperty(u.prototype,"KeyboardController",{get:function(){return this._keyboardController},set:function(n){this._keyboardController=n},enumerable:!0,configurable:!0}),u.prototype.GetKeyControl=function(n,t,i){this.KeyCombiner.pause();this.KeyboardController={owner:n,invoke:t,params:i}},u.prototype.ReleaseKeyControl=function(){this.KeyCombiner.resume();this.KeyboardController=null},u.prototype.handleTab=function(n,t){this.focuser.bound=t;this.focuser.focuse(!0,n.shiftKey);n.stopImmediatePropagation();n.preventDefault()},u.prototype.OnKeyCombined=function(n,t){var i=this.CurrentApp;i&&i.OnKeyCombined(n,t)},u.prototype.OnKeyDown=function(t){var u,r,e,o,f;if((t.ctrlKey&&this.defaultKeys.indexOf(t.key&&t.key.toLowerCase())!=-1||t.altKey&&t.keyCode==18)&&t.preventDefault(),u=this.KeyboardController,r=this.CurrentApp,!u||(e=u.params.slice(),e.unshift(t),o=u.invoke.apply(this.KeyboardController.owner,e),(o&n.KeyboardControllerResult.Release)==n.KeyboardControllerResult.Release&&this.ReleaseKeyControl(),(o&n.KeyboardControllerResult.ByPass)==n.KeyboardControllerResult.ByPass)){if(f=r&&r.CurrentModal,t.keyCode>111&&t.keyCode<124&&(t.stopPropagation(),t.preventDefault()),f){f.OnKeyDown(t)?(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()):t.keyCode===9&&this.handleTab(t,f.View);return}if(t.keyCode===114){t.ctrlKey?this.CurrentApp.ToggleTitle():this.CurrentApp.OnDeepSearche();t.preventDefault();t.stopPropagation();return}if(t.keyCode===it.F5)t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),this.CurrentApp.Update();else if(t.keyCode==it.F12){if(t.ctrlKey){this.Logout();t.preventDefault();t.stopImmediatePropagation();t.stopPropagation();return}r&&r.SelectedPage instanceof n.NavPage&&r.SelectedPage.ToggleNav();t.preventDefault();t.stopImmediatePropagation();t.stopPropagation()}else t.ctrlKey&&t.shiftKey&&t.keyCode==66?Date.now()-this.isReq<500?i.Api.RiseApi("Settings",{data:t,callback:function(){}}):this.isReq=Date.now():t.ctrlKey&&(t.keyCode==112||t.keyCode===80)?(r.OnPrint(),t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation()):(r&&t.ctrlKey&&t.keyCode===80&&this.CurrentApp.OnPrint(),r.OnKeyDown(t))}},u.prototype.handleEvent=function(n){switch(n.type){case"keydown":if(n.keyCode!==93)return this.OnKeyDown(n);var r=n,u=n.srcElement,t=u.clientLeft,i=u.clientTop;n={preventDefault:function(){r.preventDefault()},stopPropagation:function(){r.stopPropagation()},x:t,y:i,screenX:t,screenY:i,clientY:i,clientX:t,pageX:t,pageY:i};case"contextmenu":return this.OnContextMenu(n)}},u.prototype.OnContextMenu=function(n){n.preventDefault();var t=this.CurrentApp,i=t&&t.CurrentModal;return i?i.OnContextMenu(n):t?t.OnContextMenu(n):void 0},u.prototype.ShowStart=function(){for(var f,t=this.apps,u="Select app :",i=this.CurrentApp==null?null:this.CurrentApp.Name,n=0,r=t.Count;n<r;n++)i==null&&(i=t.Get(n).Name),u+="\r        "+t.Get(n).Name;for(f=prompt(u,i==null?"":i),n=0,r=t.Count;n<r;n++)if(t.Get(n).Name.toLowerCase()==f){this.Show(t.Get(n));return}},Object.defineProperty(u,"Current",{get:function(){return at},enumerable:!0,configurable:!0}),u.prototype.Check=function(n){return n instanceof Object},u.prototype.Show=function(n){var t=this;nt?nt.IsLogged(function(n,r){var e=t.CurrentApp,u,f;if(n)r=r&&r.IsAuthentication?r.RedirectApp:r;else{if(e&&e.IsAuthentication)return;r!==t.AuthenticationApp&&(t.AuthenticationApp.RedirectApp=r);r=t.AuthenticationApp}if(!r)for(u=0;u<t.apps.Count;u++)if(f=t.apps.Get(u),!(f&&f.IsAuthentication)){r=f;break}i.thread.Dispatcher.Push(t.loadApp.Set(r))},n):i.thread.Dispatcher.Push(this.loadApp.Set(n))},u.prototype.Add=function(n){return n.IsAuthentication?this.AuthenticationApp=n:this.Register(n),this},u.prototype.Register=function(n){this.apps.IndexOf(n)===-1&&(this.apps.Add(n),n.Parent=this)},Object.defineProperty(u.prototype,"AuthenticationApp",{get:function(){return nt},set:function(n){var t=this;if(nt||n==null)throw"";nt=n;n.OnStatStatChanged.On=function(n,i){i?t.Redirect(n):t.Show(n)}},enumerable:!0,configurable:!0}),u.prototype.Redirect=function(n){this.Show(n.RedirectApp)},u.prototype.OnUsernameChanged=function(){},u}(h);n.Desktop=b;nr=function(n){function i(){return n.call(this,document.createElement("div"))||this}return __extends(i,n),i.prototype.initialize=function(){this.applyStyle("container")},i.prototype.Check=function(n){return n instanceof t},__decorate([vt.ChildrenProperty({MethodName:"Add"}),__metadata("design:paramtypes",[])],i)}(h);n.Container=nr,function(n){n[n.Bar=0]="Bar";n[n.Next=1]="Next";n[n.Prev=2]="Prev"}(et=n.Icons||(n.Icons={})),function(n){n[n.none=0]="none";n[n.asterisk=1]="asterisk";n[n.plus=2]="plus";n[n.eur=3]="eur";n[n.euro=4]="euro";n[n.minus=5]="minus";n[n.cloud=6]="cloud";n[n.envelope=7]="envelope";n[n.pencil=8]="pencil";n[n.glass=9]="glass";n[n.music=10]="music";n[n.search=11]="search";n[n.heart=12]="heart";n[n.star=13]="star";n[n.starEmpty=14]="starEmpty";n[n.user=15]="user";n[n.film=16]="film";n[n.thLarge=17]="thLarge";n[n.th=18]="th";n[n.thList=19]="thList";n[n.ok=20]="ok";n[n.remove=21]="remove";n[n.zoomIn=22]="zoomIn";n[n.zoomOut=23]="zoomOut";n[n.off=24]="off";n[n.signal=25]="signal";n[n.cog=26]="cog";n[n.trash=27]="trash";n[n.home=28]="home";n[n.file=29]="file";n[n.time=30]="time";n[n.road=31]="road";n[n.downloadAlt=32]="downloadAlt";n[n.download=33]="download";n[n.upload=34]="upload";n[n.inbox=35]="inbox";n[n.playCircle=36]="playCircle";n[n.repeat=37]="repeat";n[n.refresh=38]="refresh";n[n.listAlt=39]="listAlt";n[n.lock=40]="lock";n[n.flag=41]="flag";n[n.headphones=42]="headphones";n[n.volumeOff=43]="volumeOff";n[n.volumeDown=44]="volumeDown";n[n.volumeUp=45]="volumeUp";n[n.qrcode=46]="qrcode";n[n.barcode=47]="barcode";n[n.tag=48]="tag";n[n.tags=49]="tags";n[n.book=50]="book";n[n.bookmark=51]="bookmark";n[n.print=52]="print";n[n.camera=53]="camera";n[n.font=54]="font";n[n.bold=55]="bold";n[n.italic=56]="italic";n[n.textHeight=57]="textHeight";n[n.textWidth=58]="textWidth";n[n.alignLeft=59]="alignLeft";n[n.alignCenter=60]="alignCenter";n[n.alignRight=61]="alignRight";n[n.alignJustify=62]="alignJustify";n[n.list=63]="list";n[n.indentLeft=64]="indentLeft";n[n.indentRight=65]="indentRight";n[n.facetimeVideo=66]="facetimeVideo";n[n.picture=67]="picture";n[n.mapMarker=68]="mapMarker";n[n.adjust=69]="adjust";n[n.tint=70]="tint";n[n.edit=71]="edit";n[n.share=72]="share";n[n.check=73]="check";n[n.move=74]="move";n[n.stepBackward=75]="stepBackward";n[n.fastBackward=76]="fastBackward";n[n.backward=77]="backward";n[n.play=78]="play";n[n.pause=79]="pause";n[n.stop=80]="stop";n[n.forward=81]="forward";n[n.fastForward=82]="fastForward";n[n.stepForward=83]="stepForward";n[n.eject=84]="eject";n[n.chevronLeft=85]="chevronLeft";n[n.chevronRight=86]="chevronRight";n[n.plusSign=87]="plusSign";n[n.minusSign=88]="minusSign";n[n.removeSign=89]="removeSign";n[n.okSign=90]="okSign";n[n.questionSign=91]="questionSign";n[n.infoSign=92]="infoSign";n[n.screenshot=93]="screenshot";n[n.removeCircle=94]="removeCircle";n[n.okCircle=95]="okCircle";n[n.banCircle=96]="banCircle";n[n.arrowLeft=97]="arrowLeft";n[n.arrowRight=98]="arrowRight";n[n.arrowUp=99]="arrowUp";n[n.arrowDown=100]="arrowDown";n[n.shareAlt=101]="shareAlt";n[n.resizeFull=102]="resizeFull";n[n.resizeSmall=103]="resizeSmall";n[n.exclamationSign=104]="exclamationSign";n[n.gift=105]="gift";n[n.leaf=106]="leaf";n[n.fire=107]="fire";n[n.eyeOpen=108]="eyeOpen";n[n.eyeClose=109]="eyeClose";n[n.warningSign=110]="warningSign";n[n.plane=111]="plane";n[n.calendar=112]="calendar";n[n.random=113]="random";n[n.comment=114]="comment";n[n.magnet=115]="magnet";n[n.chevronUp=116]="chevronUp";n[n.chevronDown=117]="chevronDown";n[n.retweet=118]="retweet";n[n.shoppingCart=119]="shoppingCart";n[n.folderClose=120]="folderClose";n[n.folderOpen=121]="folderOpen";n[n.resizeVertical=122]="resizeVertical";n[n.resizeHorizontal=123]="resizeHorizontal";n[n.hdd=124]="hdd";n[n.bullhorn=125]="bullhorn";n[n.bell=126]="bell";n[n.certificate=127]="certificate";n[n.thumbsUp=128]="thumbsUp";n[n.thumbsDown=129]="thumbsDown";n[n.handRight=130]="handRight";n[n.handLeft=131]="handLeft";n[n.handUp=132]="handUp";n[n.handDown=133]="handDown";n[n.circleArrowRight=134]="circleArrowRight";n[n.circleArrowLeft=135]="circleArrowLeft";n[n.circleArrowUp=136]="circleArrowUp";n[n.circleArrowDown=137]="circleArrowDown";n[n.globe=138]="globe";n[n.wrench=139]="wrench";n[n.tasks=140]="tasks";n[n.filter=141]="filter";n[n.briefcase=142]="briefcase";n[n.fullscreen=143]="fullscreen";n[n.dashboard=144]="dashboard";n[n.paperclip=145]="paperclip";n[n.heartEmpty=146]="heartEmpty";n[n.link=147]="link";n[n.phone=148]="phone";n[n.pushpin=149]="pushpin";n[n.usd=150]="usd";n[n.gbp=151]="gbp";n[n.sort=152]="sort";n[n.sortByAlphabet=153]="sortByAlphabet";n[n.sortByAlphabetAlt=154]="sortByAlphabetAlt";n[n.sortByOrder=155]="sortByOrder";n[n.sortByOrderAlt=156]="sortByOrderAlt";n[n.sortByAttributes=157]="sortByAttributes";n[n.sortByAttributesAlt=158]="sortByAttributesAlt";n[n.unchecked=159]="unchecked";n[n.expand=160]="expand";n[n.collapseDown=161]="collapseDown";n[n.collapseUp=162]="collapseUp";n[n.logIn=163]="logIn";n[n.flash=164]="flash";n[n.logOut=165]="logOut";n[n.newWindow=166]="newWindow";n[n.record=167]="record";n[n.save=168]="save";n[n.open=169]="open";n[n.saved=170]="saved";n[n["import"]=171]="import";n[n["export"]=172]="export";n[n.send=173]="send";n[n.floppyDisk=174]="floppyDisk";n[n.floppySaved=175]="floppySaved";n[n.floppyRemove=176]="floppyRemove";n[n.floppySave=177]="floppySave";n[n.floppyOpen=178]="floppyOpen";n[n.creditCard=179]="creditCard";n[n.transfer=180]="transfer";n[n.cutlery=181]="cutlery";n[n.header=182]="header";n[n.compressed=183]="compressed";n[n.earphone=184]="earphone";n[n.phoneAlt=185]="phoneAlt";n[n.tower=186]="tower";n[n.stats=187]="stats";n[n.sdVideo=188]="sdVideo";n[n.hdVideo=189]="hdVideo";n[n.subtitles=190]="subtitles";n[n.soundStereo=191]="soundStereo";n[n.soundDolby=192]="soundDolby";n[n.sound$5$1=193]="sound$5$1";n[n.sound$6$1=194]="sound$6$1";n[n.sound$7$1=195]="sound$7$1";n[n.copyrightMark=196]="copyrightMark";n[n.registrationMark=197]="registrationMark";n[n.cloudDownload=198]="cloudDownload";n[n.cloudUpload=199]="cloudUpload";n[n.treeConifer=200]="treeConifer";n[n.treeDeciduous=201]="treeDeciduous";n[n.cd=202]="cd";n[n.saveFile=203]="saveFile";n[n.openFile=204]="openFile";n[n.levelUp=205]="levelUp";n[n.copy=206]="copy";n[n.paste=207]="paste";n[n.alert=208]="alert";n[n.equalizer=209]="equalizer";n[n.king=210]="king";n[n.queen=211]="queen";n[n.pawn=212]="pawn";n[n.bishop=213]="bishop";n[n.knight=214]="knight";n[n.babyFormula=215]="babyFormula";n[n.tent=216]="tent";n[n.blackboard=217]="blackboard";n[n.bed=218]="bed";n[n.apple=219]="apple";n[n.erase=220]="erase";n[n.hourglass=221]="hourglass";n[n.lamp=222]="lamp";n[n.duplicate=223]="duplicate";n[n.piggyBank=224]="piggyBank";n[n.scissors=225]="scissors";n[n.bitcoin=226]="bitcoin";n[n.btc=227]="btc";n[n.xbt=228]="xbt";n[n.yen=229]="yen";n[n.jpy=230]="jpy";n[n.ruble=231]="ruble";n[n.rub=232]="rub";n[n.scale=233]="scale";n[n.iceLolly=234]="iceLolly";n[n.iceLollyTasted=235]="iceLollyTasted";n[n.education=236]="education";n[n.optionHorizontal=237]="optionHorizontal";n[n.optionVertical=238]="optionVertical";n[n.menuHamburger=239]="menuHamburger";n[n.modalWindow=240]="modalWindow";n[n.oil=241]="oil";n[n.grain=242]="grain";n[n.sunglasses=243]="sunglasses";n[n.textSize=244]="textSize";n[n.textColor=245]="textColor";n[n.textBackground=246]="textBackground";n[n.objectAlignTop=247]="objectAlignTop";n[n.objectAlignBottom=248]="objectAlignBottom";n[n.objectAlignHorizontal=249]="objectAlignHorizontal";n[n.objectAlignLeft=250]="objectAlignLeft";n[n.objectAlignVertical=251]="objectAlignVertical";n[n.objectAlignRight=252]="objectAlignRight";n[n.triangleRight=253]="triangleRight";n[n.triangleLeft=254]="triangleLeft";n[n.triangleBottom=255]="triangleBottom";n[n.triangleTop=256]="triangleTop";n[n.console=257]="console";n[n.superscript=258]="superscript";n[n.subscript=259]="subscript";n[n.menuLeft=260]="menuLeft";n[n.menuRight=261]="menuRight";n[n.menuDown=262]="menuDown";n[n.menuUp=263]="menuUp"}(k=n.Glyphs||(n.Glyphs={}));ot=function(t){function r(n,i,r){var u=t.call(this,document.createElement("span"))||this;return u.isIcon=i,i=i==!0,u.Type=n,u._view.classList.add("bgr"),u._view.title=r,u}return __extends(r,t),r.AllGlyphs=function(n){for(var t in k)isNaN(t)&&n.Add(new r(k[t],!1))},r.Test=function(){var t=(new n.Div).applyStyle("row"),i,u,f;for(i in k)isNaN(i)&&(u=new r(k[i],!1).applyStyle("col"),t.Add(u),u.ToolTip=i);return t.Parent=n.Desktop.Current,f=document.getElementById("51"),f.appendChild(t.View),t.View.style.fontSize="-webkit-xxx-large",t.View.style.padding="15px",t},r.CreateGlyphDom=function(n,t,i){var u=document.createElement("span");return u.classList.add("glyphicon",r.GetGlyphCSS(n),"bgr"),i&&u.classList.add(i),u.title=t,u},r.GetGlyphCSS=function(n){var t=i.css.toValidCssName(k[n]);return"glyphicon"+(t==null?"":"-"+t)},r.GetIconCSS=function(n){var t=et[n];return"icon-"+(t==null?"":t.toLowerCase())},r.prototype.getStyle=function(){return this.isIcon?r.GetIconCSS(this.v):r.GetGlyphCSS(this.v)},r.prototype.initialize=function(){},Object.defineProperty(r.prototype,"Type",{get:function(){return this.v},set:function(n){this.v!=null&&this.View.classList.remove(this.getStyle());this.v=n;n!=null&&this.applyStyle("glyphicon",this.getStyle())},enumerable:!0,configurable:!0}),r}(t);n.Glyph=ot;d=function(n){function t(){var t=n.call(this,document.createElement("button"))||this;return t.v=0,t}return __extends(t,n),t.prototype.Focus=function(){this._view.focus()},Object.defineProperty(t.prototype,"Style",{set:function(n){this.View.classList.remove("btn-"+wt[this.v].toLowerCase());this.applyStyle("btn-"+wt[n].toLowerCase());this.v=n},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){this.applyStyle("btn","btn-default");this.Type="button"},Object.defineProperty(t.prototype,"Text",{get:function(){return this._text&&this._text.textContent},set:function(n){if(n){if(this._text){this._text.textContent=n;return}this._text=document.createTextNode(n)}else if(this._text)this._text=null;else return;this.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Content",{get:function(){return this._content},set:function(n){if(this._content)try{this._view.removeChild(this._content)}catch(t){}this._content=n;this.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Type",{set:function(n){this.View.type=n},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.Clear();this._text&&this._view.appendChild(this._text);this._content&&this._view.appendChild(this._content)},__decorate([vt.ContentProperty("Content"),__metadata("design:paramtypes",[])],t)}(t);n.Button=d;fi=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.initialize=function(){var t=this.View;this.AddGlyphs(function(){return!0},et.Bar,et.Bar,et.Bar);n.prototype.initialize.call(this)},t.prototype.AddGlyphs=function(n){for(var t,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];for(t=0;t<r.length;t++)this.AddGlyph(r[t],n(t))},t.prototype.AddGlyph=function(t,i){if(typeof t=="number"){var r=new ot(t,i);return n.prototype.Add.call(this,r),r}return null},t.prototype.Check=function(n){return n instanceof ot},Object.defineProperty(t.prototype,"CollapsedZone",{set:function(n){var t=this.View;this.applyStyle("navbar-toggle");t.setAttribute("data-toggle","collapse");t.setAttribute("data-target","#"+n.Id);n.applyStyle("collapse")},enumerable:!0,configurable:!0}),t}(d);n.GlyphButton=fi;r=function(n){function t(t,i){var u=n.call(this,typeof t=="string"?document.createElement(t):t)||this,r;if(i)for(r=0;r<i.length;r++)u.View.classList.add(i[r]);return u}return __extends(t,n),t.prototype.initialize=function(){},t}(t);n.Dom=r;p=function(n){function i(i,r){var f=n.call(this,u=document.createElement("a"))||this,u;return r!=null&&r!="#"&&(u.href=r),i!=null&&(i instanceof t?f.Add(i):i instanceof HTMLElement?u.appendChild(i):typeof i=="string"&&(u.text=i)),f}return __extends(i,n),i.prototype.initialize=function(){},i.prototype.Add=function(t){return this.View.innerHTML="",n.prototype.Add.call(this,t),this},i.prototype.Remove=function(){return!1},Object.defineProperty(i.prototype,"Text",{get:function(){return this.View.text},set:function(n){this.View.text=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Href",{get:function(){return this.View.href},set:function(n){this.View.href=n},enumerable:!0,configurable:!0}),i}(t);n.Anchore=p;tr=function(n){function t(t){var r=n.call(this,i=document.createElement("label"))||this,i;return i.textContent=t,r}return __extends(t,n),t.prototype.initialize=function(){},Object.defineProperty(t.prototype,"Text",{get:function(){return this.View.textContent},set:function(n){this.View.textContent=n},enumerable:!0,configurable:!0}),t}(t);n.Label=tr;ir=function(n){function t(t){var r=n.call(this,i=document.createElement("div"))||this,i;return i.textContent=t,r}return __extends(t,n),t.prototype.initialize=function(){},Object.defineProperty(t.prototype,"Text",{get:function(){return this.View.textContent},set:function(n){this.View.textContent=n},enumerable:!0,configurable:!0}),t}(t);n.Text=ir;ei=function(n){function t(t){var r=n.call(this,i=document.createElement("input"))||this,i;return i.type="search",t!=void 0&&(i.value=t),r}return __extends(t,n),t.prototype.Focus=function(){this.View.focus()},t.prototype.initialize=function(){},t.prototype.Add=function(){return this},t.prototype.Remove=function(){return!1},Object.defineProperty(t.prototype,"Text",{get:function(){return this.View.value},set:function(n){this.View.value=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PlaceHolder",{get:function(){return this.View.getAttribute("placeholder")},set:function(n){this.View.setAttribute("placeholder",n)},enumerable:!0,configurable:!0}),t}(t);n.Textbox=ei,function(n){n[n.Ordred=0]="Ordred";n[n.UnOrdred=1]="UnOrdred"}(gr=n.ListType||(n.ListType={}));oi=function(n){function i(t){var i=n.call(this,document.createElement(t===undefined?"div":t===0?"ol":t===1?"ul":"ul"))||this;return i._si=-1,i}return __extends(i,n),i.prototype.initialize=function(){var n=this;this._view.addEventListener("keydown",function(t){t.keyCode===it.Down?n.SelectedIndex++:t.keyCode===it.Up&&n.SelectedIndex--})},i.prototype.Check=function(n){return n instanceof t},Object.defineProperty(i.prototype,"HasTemplate",{get:function(){return!0},enumerable:!0,configurable:!0}),i.prototype.getTemplate=function(n){var i=new r("li"),u;return n instanceof t?i.Add(n):n instanceof HTMLElement?i.View.appendChild(n):(u=new p(n,"#"),i.Add(u)),i},i.prototype.AddText=function(n){var t=new f;return t.View.textContent=n,this.Add(t),t},i.prototype.OnChildAdded=function(){this._si==-1&&(this.SelectedIndex=0)},Object.defineProperty(i.prototype,"SelectedIndex",{get:function(){return this._si},set:function(n){var i=this.getChild(this._si),t;i&&(i.Presenter?i.Presenter.View.classList.remove("active"):i.Parent&&i.Parent.disapplyStyle("active"));t=this.getChild(n);t&&(t.Presenter?t.Presenter.applyStyle("active"):t.Parent&&t.Parent.applyStyle("active"))},enumerable:!0,configurable:!0}),i}(h);n.List=oi;yt=function(n){function i(t){return n.call(this,typeof t=="string"?document.createElement(t||"div"):t)||this}return __extends(i,n),i.prototype.initialize=function(){},i.prototype.Check=function(n){return n instanceof t},i}(h);n.DivControl=yt;f=function(n){function t(){return n.call(this,document.createElement("div"))||this}return __extends(t,n),t.prototype.initialize=function(){},t.prototype.Check=function(){return!0},t}(h);n.Div=f;si=function(t){function i(n,i){var r=t.call(this,document.createElement("div"))||this;return r.App=n,r.autoInitializePanels=i,r.services=[],r._services=[],r.OnClick=r.OnClick.bind(r),r.serviceNotified=r.serviceNotified.bind(r),r}return __extends(i,t),i.prototype.initialize=function(){this.autoInitializePanels&&(this.LeftTabs=this._lefttabs||new l,this.RightTabs=this._righttabs||new l,delete this.autoInitializePanels);this.applyStyle("navbar","navbar-fixed-bottom","appFoot","uncolapsed")},Object.defineProperty(i.prototype,"LeftTabs",{set:function(n){var i=this;this._lefttabs!==n&&(this._lefttabs&&(t.prototype.Remove.call(this,this._lefttabs),this._lefttabs.OnSelectedItem.Remove(this)),n&&(t.prototype.Add.call(this,n),n.OnSelectedItem.Add(function(n){i.OnPageSelected&&i.OnPageSelected(n)},this),n.Float(c.Left)),this._lefttabs=n)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"RightTabs",{set:function(n){var i=this;this._righttabs!==n&&(this._righttabs&&(t.prototype.Remove.call(this,this._righttabs),this._righttabs.OnSelectedItem.Remove(this)),n&&(t.prototype.Add.call(this,n),n.OnSelectedItem.Add(function(n){i.OnPageSelected&&i.OnPageSelected(n)},this),n.Float(c.Right)),this._righttabs=n)},enumerable:!0,configurable:!0}),i.prototype.createItem=function(n){var t=new w(n);return t.OnClick=this.OnClick,t},i.prototype.OnClick=function(n){this.OnPageSelected&&this.OnPageSelected(n)},i.prototype.Add=function(){throw"Not Allowed";},i.prototype.AddRange=function(){throw"Not Allowed";},i.prototype.Remove=function(n){if(n===this._lefttabs)this.LeftTabs=null;else if(n===this._righttabs)this.RightTabs=null;else throw"Not Allowed";return!0},i.prototype.serviceNotified=function(n,t){this.App===ut.CurrentApp&&(t===yi.Focuse?this.Push(n):t===yi.UnFocus&&this.Pop(n))},Object.defineProperty(i.prototype,"currentStack",{get:function(){return this.services[this.services.length-1]},enumerable:!0,configurable:!0}),i.prototype.CurrentService=function(){var n=this.services[this.services.length-1];return n?n.Current:null},i.prototype.PushGBar=function(n){this.HideCurrentService();this.services.push(new ct(n));this.ShowCurrentService()},i.prototype.PopGBar=function(n){this.HideCurrentService();this.services.pop();this.Add(n.GetLeftBar())},i.prototype.ExitBar=function(){this.HideCurrentService();this.currentStack.Exit();this.ShowCurrentService()},i.prototype.PushBar=function(n){this.HideCurrentService();this.currentStack.Push(n);this.ShowCurrentService()},i.prototype.PopBar=function(){this.HideCurrentService();this.currentStack.Pop();this.ShowCurrentService()},i.prototype.HideCurrentService=function(){var i=this.currentStack,n,t;i&&(n=i.Current.GetLeftBar(),t=i.Current.GetRightBar(),n&&(n instanceof l?this.LeftTabs=null:this.Remove(n)),t&&(t instanceof l?this.RightTabs=null:this.Remove(t)))},i.prototype.ShowCurrentService=function(){var r=this.currentStack,t,i;r&&(t=r.Current.GetLeftBar(),i=r.Current.GetRightBar(),n.MenuItem,t&&(t instanceof l?this.LeftTabs=t:this.Add(t)),i&&(i instanceof l?this.RightTabs=i:this.Add(i)),this.Visible=t!=null||i!=null)},i.prototype.Push=function(n){var t,i;n&&n!==this.CurrentService()&&(this.HideCurrentService(),t=this.CurrentService(),t&&t.ServiceType==ft.Instantany&&this.currentStack.Pop(),n.ServiceType==ft.Main?this.services.push(new ct(n)):(i=this.currentStack,i==null?this.services.push(new ct(n)):this.currentStack.Push(n)),this.ShowCurrentService())},i.prototype.Has=function(n){for(var f,r=this.services,i,u=r.length,t=u-1;t>=0;t--)if(f=r[t],(i=f.Has(n))!==0)return{stack:u-t+(i===-1?0:-1),serv:i};return null},i.prototype.Pop=function(n){var t,r,i;if(this.HideCurrentService(),n){if(t=this.Has(n),t){while(t.stack>0)this.services.pop(),t.stack--;for(r=this.currentStack;t.serv>0;)r.Pop(),t.serv--}}else i=this.CurrentService(),i&&(i.ServiceType===ft.Main?this.services.pop():this.currentStack.Pop());this.ShowCurrentService()},i.prototype.Register=function(n){n.Handler&&!n.Handled()&&(n.Handler.addEventListener("pointerenter",function(){ut.CurrentApp.Foot.Push(n)}),n.Handler.addEventListener("pointerout",function(){ut.CurrentApp.Foot.Pop(n)}));n.Notify&&(n.Notify.On=this.serviceNotified)},i}(t);n.ServiceNavBar=si;l=function(n){function t(){var t=n.call(this)||this;return t._items=new i.collection.ExList(Object),t.oicd={Owner:t,Invoke:t.ItemsChanged},t.selectable=!0,t.OnSelectedItem=new i.bind.EventListener(t),t}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this.onClick=this.onClick.bind(this);this.applyStyle("nav","navbar-nav");this._items.Listen=this.oicd;this.ItemsChanged(i.utils.ListEventArgs.ResetEvent)},t.prototype.ItemsChanged=function(n){var r,e,t,u,f;if(this.IsInit!==!1){r=this;e=this._items;switch(n.event){case i.collection.CollectionEvent.Added:r.Add(this.createItem(n.newItem));break;case i.collection.CollectionEvent.Cleared:this.CClear(r);break;case i.collection.CollectionEvent.Removed:for(t=0,u=r.Count;t<u;t++)if(f=r.getChild(t),f.Source==n.oldItem){r.RemoveAt(t+1,!0);break}break;case i.collection.CollectionEvent.Replace:for(t=0,u=r.Count;t<u;t++)if(f=r.getChild(t),f.Source==n.oldItem){r.RemoveAt(t+1,!0);break}r.Add(new w(n.newItem));break;case i.collection.CollectionEvent.Reset:for(this.CClear(r),t=0,u=e.Count;t<u;t++)f=e.Get(0),r.Add(new w(f))}}},t.prototype.createItem=function(n){var t=new w(n);return t.OnClick=this.onClick,t},Object.defineProperty(t.prototype,"SelectedItem",{get:function(){return this._selectedItem},enumerable:!0,configurable:!0}),t.prototype.onClick=function(n,t){var i;this._selectedItem!=null&&(i=this._selectedItem.Presenter,i.disapplyStyle("active"));t!=null&&(i=t.Presenter,this._selectedItem=t,i.applyStyle("active"));this.selectable||setTimeout(function(n,t){return t.Presenter.disapplyStyle("active")},500,this,t);this.OnSelectedItem.Invok(this,function(t){return t(n)})},t.prototype.Float=function(n){n==c.Right?(this.disapplyStyle("pull-left"),this.applyStyle("pull-right")):n==c.Left?(this.applyStyle("pull-left"),this.disapplyStyle("pull-right")):(this.disapplyStyle("pull-left"),this.disapplyStyle("pull-right"))},t.prototype.CClear=function(n){for(var t=2,i=n.Count;t<i;t++)n.RemoveAt(t,!0)},Object.defineProperty(t.prototype,"Items",{get:function(){return this._items},enumerable:!0,configurable:!0}),t}(oi);n.Navbar=l;pt=function(n){function t(){return n.call(this,document.createElement("div"))||this}return __extends(t,n),Object.defineProperty(t.prototype,"Title",{get:function(){return this._brand.Text},set:function(n){this._brand.Text=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Brand",{get:function(){return this._brandContainer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ToggleButton",{get:function(){return this._toggleButton},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){var t=this.View,n;this.applyStyle("navbar-header");this._brand=new p("QShop","#");this._brandContainer=new f;this._brandContainer.Add(this._brand);this._brandContainer.applyStyle("navbar-brand");i.bind.NamedScop.Create("GlobalPatent",{});n=this._toggleButton=new fi;this.Add(this._brandContainer);this.Add(this._toggleButton)},Object.defineProperty(t.prototype,"IsFixedTop",{set:function(n){n?this.applyStyle("navbar-fixed-top"):this.View.classList.remove("navbar-fixed-top")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsHeader",{set:function(n){n?this.applyStyle("navbar-header"):this.View.classList.remove("navbar-header")},enumerable:!0,configurable:!0}),t}(t);n.NavbarHeader=pt;w=function(n){function t(t){var i=n.call(this,t.Content,t.Url)||this;return i.Source=t,i.View.addEventListener("click",i),i}return __extends(t,n),t.prototype.propChanged=function(n,t){t.prop==ht.DPTitle?this.Text=t._new:t.prop==ht.DPUrl&&(this.Href=t._new)},t.prototype.handleEvent=function(){this.OnClick&&this.OnClick(this.Source,this);this.Source.OnItemSelected(this)},t.prototype.Dispose=function(){var t=this.OnDispose();t!==null&&(this.View.removeEventListener("click",this),this.Source=null,this.OnClick=null,n.prototype.Dispose.call(this),t||(this.DisposingStat=2))},t}(p);n.MenuItem=w;tt=function(n){function t(t){return n.call(this,t||document.createElement("div"))||this}return __extends(t,n),t.prototype.initialize=function(){},Object.defineProperty(t.prototype,"Content",{get:function(){return this._content},set:function(n){this._content!=n&&(this._content&&this.Remove(this._content),this._content=n,n&&this.Add(n))},enumerable:!0,configurable:!0}),t.prototype.OnKeyDown=function(n){return this._content&&this._content.OnKeyDown(n)},t.prototype.OnContextMenu=function(n){return this._content&&this._content.OnContextMenu(n)},__decorate([vt.ContentProperty("Content"),__metadata("design:paramtypes",[HTMLElement])],t)}(t);n.ContentControl=tt,function(n){n[n.Default=0]="Default";n[n.Primary=1]="Primary";n[n.success=2]="success";n[n.Info=3]="Info";n[n.Warning=4]="Warning";n[n.Danger=5]="Danger";n[n.Link=6]="Link";n[n.Block=7]="Block"}(wt=n.ButtonStyle||(n.ButtonStyle={}));bt=function(t){function i(n){return t.call(this,n||document.createElement("input"))||this}return __extends(i,t),i.prototype.Disable=function(n){for(var i=$("input",this._view),t=0;t<i.length;t++)i[t].disabled=n},i.prototype.initialize=function(){this.applyStyle("input","form-control");this._view instanceof HTMLInputElement&&(this._view.addEventListener("focusout",this),this._view.addEventListener("focusin",this))},Object.defineProperty(i.prototype,"Placeholder",{set:function(n){this.View.placeholder=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Text",{get:function(){return this.View.value},set:function(n){this.View.value=n},enumerable:!0,configurable:!0}),i.prototype.Blur=function(){this._view&&this._view.blur()},i.prototype.handleEvent=function(n){n.type==="focusout"?this.OnFocusOut(n):n.type==="focusin"&&this.OnFocusIn(n)},i.prototype.OnFocusIn=function(){n.Desktop.Current.GetKeyControl(this,this.OnKeyPressed,[])},i.prototype.OnKeyPressed=function(t){return(t.keyCode==27||t.keyCode==13)&&this.Blur(),n.KeyboardControllerResult.Handled},i.prototype.OnFocusOut=function(){n.Desktop.Current.ReleaseKeyControl()},i}(t);n.Input=bt,function(n){n[n.None=0]="None";n[n.Validated=1]="Validated";n[n.Instantany=2]="Instantany";n[n.NoSearch=3]="NoSearch"}(rr=n.SearchActionMode||(n.SearchActionMode={}));hi=function(n){function t(t){var r=n.call(this,document.createElement("div"))||this;return r.OnAction=new i.bind.EventListener(r.Id),r.ia=0,r.tout=-1,r.job=i.thread.Dispatcher.cretaeJob(r.txtChanged,[null],r,!0),r.ls="",r.txtInput=new bt(t),r}return __extends(t,n),Object.defineProperty(t.prototype,"Box",{get:function(){return this.txtInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Icon",{get:function(){return this.btn_ok},enumerable:!0,configurable:!0}),t.prototype.Bur=function(){this.txtInput.Blur()},t.prototype.initialize=function(){var n,i,t;this.applyStyle("csTB","input-group");n=(new d).applyStyle("form-control","glyphicon","glyphicon-search");n.Style=wt.Primary;n.Text="";i=new r("span");i.applyStyle("input-group-btn");t=this.txtInput;t.ToolTip="Entrer you email";t.Placeholder="Entrer you email";this.Add(t);this.Add(i);i.Add(n);this.btn_ok=n;this.txtInput=t;this.btnClicked=this.btnClicked.bind(this);n.View.addEventListener("click",this.btnClicked)},Object.defineProperty(t.prototype,"AutoAction",{get:function(){return this.ia},set:function(n){if(n!=this.ia){switch(n){case 3:case 0:this.txtInput.View.removeEventListener("change",this);this.txtInput.View.removeEventListener("keyup",this);break;case 1:this.txtInput.View.addEventListener("change",this);this.txtInput.View.removeEventListener("keyup",this);break;case 2:this.txtInput.View.removeEventListener("change",this);this.txtInput.View.addEventListener("keyup",this)}var t=this.txtInput.View[n?"addEventListener":"removeEventListener"]("change",this);this.ia=n}},enumerable:!0,configurable:!0}),t.prototype.btnClicked=function(){var n=this.txtInput.Text,i=this.ls,t;this.ls=n;t=this;this.OnAction.Invok(this.Id,function(r){r(t,i,n)})},t.prototype.txtChanged=function(){var n=this.txtInput.Text,t=this.ls,i;n!=t&&(this.ls=n,i=this,this.OnAction.Invok(this.Id,function(r){r(i,t,n)}))},t.prototype.handleEvent=function(t){var i=this;switch(t.type){case"click":this.txtChanged(t);break;case"change":if(t.srcElement===this.txtInput.View)return this.txtChanged(t);break;case"keyup":if(t.srcElement===this.txtInput.View){if(this.isExecuting)return;this.isExecuting=!0;this.tout=setTimeout(function(n){i.isExecuting=!1;n.txtChanged(t)},500,this,t);return}default:n.prototype.handleEvent.call(this,t)}},Object.defineProperty(t.prototype,"Text",{get:function(){return this.txtInput.View.value},set:function(n){this.txtInput.View.value=n},enumerable:!0,configurable:!0}),t.prototype.Focus=function(){this.Box.View.focus()},t}(t);n.ActionText=hi;ur=function(){function n(n,t,i,r){this.Tag=n;this.Content=t;this.Url=i;this.onselect=r;this.Content=new p(t)}return n.prototype.OnPropertyChanged=function(){},n.prototype.OnItemSelected=function(n){this.onselect&&this.onselect.Invoke.call(this.onselect.Owner,n)},n}();n.CItem=ur;ci=function(n){function t(t){var i=n.call(this,document.createElement("ul"))||this;return i.top=t,i.OnClick=i.OnClick.bind(i),i}return __extends(t,n),Object.defineProperty(t.prototype,"LeftTabs",{set:function(n){var t=this;this._lefttabs&&(this._colapsedZone.Remove(this._lefttabs,!1),this._lefttabs.OnSelectedItem.Remove(this));n&&(this._colapsedZone.Add(n),n.OnSelectedItem.Add(function(n){t.OnPageSelected&&t.OnPageSelected(n)},this));this._lefttabs=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"RightTabs",{set:function(n){var t=this;this._righttabs&&(this._colapsedZone.Remove(this._righttabs,!1),this._righttabs.OnSelectedItem.Remove(this));n&&(this._colapsedZone.Add(n),n.OnSelectedItem.Add(function(n){t.OnPageSelected&&t.OnPageSelected(n)},this),n.Float(c.Right));this._righttabs=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Header",{get:function(){return this._header},enumerable:!0,configurable:!0}),t.prototype.createItem=function(n){var t=new w(n);return t.OnClick=this.OnClick,t},t.prototype.initialize=function(){var n=this;this.bi=!0;this.applyStyle("navbar",this.top?"navbar-fixed-top":"navbar-fixed-bottom");this._header=new pt;this._container=new f;this._colapsedZone=new r("div").applyStyle("collapse","navbar-collapse");this.Add(this._container.AddRange([this._header,this._colapsedZone]));this.bi=!1;this._header.OnInitialized=function(t){return t.ToggleButton.CollapsedZone=n._colapsedZone};this._header.ToggleButton.addEventListener("click",function(n,t,i){return i.Open()},this)},t.prototype.Open=function(n){var t=this._colapsedZone.View.classList;t[(n==undefined?t.contains("in"):!n)?"remove":"add"]("in")},t.prototype.OnClick=function(n){this.OnPageSelected&&this.OnPageSelected(n)},t.prototype.Add=function(t){return this.bi?n.prototype.Add.call(this,t):this._colapsedZone.Add(t),this},t.prototype.Remove=function(n){return this._colapsedZone.Remove(n)},t}(t);n.QBar=ci;st=function(n){function t(t){var i=n.call(this,document.createElement("ul"))||this;return i.top=t,i.OnClick=i.OnClick.bind(i),i}return __extends(t,n),Object.defineProperty(t.prototype,"Menu",{get:function(){return this._tabs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SubsMenu",{get:function(){return this._tabs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Header",{get:function(){return this._header},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Container",{get:function(){return this._container},enumerable:!0,configurable:!0}),t.prototype.createItem=function(n){var t=new w(n);return t.OnClick=this.OnClick,t},t.__fields__=function(){return[this.DPSelectedItem]},t.prototype.Clear=function(){this._tabs.Clear();this._stabs.Clear()},t.prototype.CClear=function(n){for(var t=2,i=n.Count;t<i;t++)n.RemoveAt(t,!0)},t.prototype.initialize=function(){var n=this;this._header=new pt;this._container=new f;this._colapsedZone=new r("div").applyStyle("collapse","navbar-collapse");this._tabs=new l;this._stabs=new l;this._stabs.Float(c.Right);this._stabs.OnSelectedItem.Add(function(t){return n.SelectedItem=t},this);this._tabs.OnSelectedItem.Add(function(t){return n.SelectedItem=t},this);this.Add(this._container.AddRange([this._header,this._colapsedZone.AddRange([this._tabs])]));this._header.OnInitialized=function(t){return t.ToggleButton.CollapsedZone=n._colapsedZone};this._header.ToggleButton.addEventListener("click",function(n,t,i){var r=i._colapsedZone.View.classList;r[r.contains("in")?"remove":"add"]("in")},this)},t.prototype.OnClick=function(n){this.SelectedItem=n},t.DPSelectedItem=i.bind.DObject.CreateField("SelectedItem",Object),t}(t);n.Head=st;li=function(n){function i(){return n.call(this,document.createElement("div"))||this}return __extends(i,n),i.prototype.initialize=function(){this.applyStyle("navbar","navbar-fixed-bottom");this.View.style.width="100%"},i.prototype.Check=function(n){return n instanceof t},i}(t);n.Foot=li,function(n){n[n.Enter=13]="Enter";n[n.Tab=9]="Tab";n[n.Esc=27]="Esc";n[n.Escape=27]="Escape";n[n.Up=38]="Up";n[n.Down=40]="Down";n[n.Left=37]="Left";n[n.Right=39]="Right";n[n.PgDown=34]="PgDown";n[n.PageDown=34]="PageDown";n[n.PgUp=33]="PgUp";n[n.PageUp=33]="PageUp";n[n.End=35]="End";n[n.Home=36]="Home";n[n.Insert=45]="Insert";n[n.Delete=46]="Delete";n[n.Backspace=8]="Backspace";n[n.Space=32]="Space";n[n.Meta=91]="Meta";n[n.Win=91]="Win";n[n.Mac=91]="Mac";n[n.Multiply=106]="Multiply";n[n.Add=107]="Add";n[n.Subtract=109]="Subtract";n[n.Decimal=110]="Decimal";n[n.Divide=111]="Divide";n[n.Scrollock=145]="Scrollock";n[n.Pausebreak=19]="Pausebreak";n[n.Numlock=144]="Numlock";n[n["5numlocked"]=12]="5numlocked";n[n.Shift=16]="Shift";n[n.Capslock=20]="Capslock";n[n.F1=112]="F1";n[n.F2=113]="F2";n[n.F3=114]="F3";n[n.F4=115]="F4";n[n.F5=116]="F5";n[n.F6=117]="F6";n[n.F7=118]="F7";n[n.F8=119]="F8";n[n.F9=120]="F9";n[n.F10=121]="F10";n[n.F11=122]="F11";n[n.F12=123]="F12";n[n.AltLeft=18]="AltLeft";n[n.AltRight=18]="AltRight";n[n.ShiftLeft=18]="ShiftLeft";n[n.ShiftRight=18]="ShiftRight";n[n.ControlLeft=17]="ControlLeft";n[n.ControlRight=17]="ControlRight";n[n.MetaLeft=91]="MetaLeft";n[n.MetaRight=91]="MetaRight"}(it=n.Keys||(n.Keys={})),function(n){n[n.Alt=18]="Alt";n[n.Shift=16]="Shift";n[n.Control=17]="Control";n[n.Meta=91]="Meta"}(fr=n.Controlkeys||(n.Controlkeys={}));er=function(){function n(){}return Object.defineProperty(n.prototype,"Key",{get:function(){return this._key},set:function(n){if(it[n]===undefined)throw"controls key is uncorrect";this._key=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Control",{get:function(){return this.__ctrl},set:function(n){if(fr[n]===undefined)throw"controls key is uncorrect";this.__ctrl=n},enumerable:!0,configurable:!0}),n.prototype.IsPressed=function(n){return this.checkKey(n)&&this.checkControl(n)},n.prototype.checkKey=function(n){var t=this.Key;return t==null?!0:n.keyCode==t},n.prototype.checkControl=function(n){switch(this.Control){case 18:return n.altKey;case 16:return n.shiftKey;case 17:return n.ctrlKey;case 91:return n.metaKey}return!0},n}();n.HotKey=er;ht=function(n){function r(t,r,u){var f=n.call(this,document.createElement("div"))||this;return f.app=t,f.Name=u,f._fl=!0,f.ServiceType=ft.Main,f.Notify=new i.bind.EventListener(f),f._onSelected=new i.bind.EventListener(f,!1),f.Content=r,f}return __extends(r,n),r.prototype.Callback=function(){},Object.defineProperty(r.prototype,"FloatLeft",{get:function(){return this._fl},set:function(n){this._fl=n},enumerable:!0,configurable:!0}),r.prototype.getDPTitle=function(){return r.DPTitle},r.prototype.getDPUrl=function(){return r.DPUrl},Object.defineProperty(r.prototype,"Content",{get:function(){return this.get(r.DPTitle)},set:function(n){this.set(r.DPTitle,n)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Url",{get:function(){return this.get(r.DPUrl)},set:function(n){this.set(r.DPUrl,n)},enumerable:!0,configurable:!0}),r.__fields__=function(){return[r.DPTitle,r.DPUrl]},r.prototype.getSuggessions=function(){return cr},r.prototype.OnSearche=function(){},r.prototype.initialize=function(){},r.prototype.Update=function(){},Object.defineProperty(r.prototype,"intern",{get:function(){return!0},enumerable:!0,configurable:!0}),r.prototype.Check=function(n){return this.intern&&n instanceof t},r.prototype.Dispose=function(){this.Parent.Remove(this);i.bind.DObject.prototype.Dispose.call(this)},r.prototype.GetLeftBar=function(){return null},r.prototype.GetRightBar=function(){return null},r.prototype.OnItemSelected=function(){var n=this;this.OnSelected.Invok(this,function(t){return t(n)})},Object.defineProperty(r.prototype,"OnSelected",{get:function(){return this._onSelected},enumerable:!0,configurable:!0}),r.prototype.Handled=function(){return!0},r.prototype.OnKeyCombined=function(n,i){var r=this.Content;if(r instanceof t)return r.OnKeyCombined(n,i)},r.prototype.OnKeyDown=function(n){if(this.Content instanceof t)return this.Content.OnKeyDown(n)},r.prototype.OnPrint=function(){},r.prototype.OnDeepSearche=function(){},r.prototype.OnContextMenu=function(n){if(this.Content instanceof t&&this.Content.OnContextMenu(n))return!0;if(this.ContextMenu)this.ContextMenu.Show(n.pageX,n.pageY);else return;return!0},r.DPTitle=r.CreateField("Title",Object,"Page",function(n){var t=n.__this}),r.DPUrl=r.CreateField("Url",String,"#"),r}(h);n.Page=ht;ct=function(){function n(n){this.others=[];this._current=n}return Object.defineProperty(n.prototype,"Current",{get:function(){return this.others.length==0?this._current:this.others[this.others.length-1]},enumerable:!0,configurable:!0}),n.prototype.Push=function(n){this.others.push(n)},n.prototype.Pop=function(){return this.others.pop()},n.prototype.Has=function(n){var i=this.others,r=i.length,t,u;if(this._current==n)return-1;for(t=r-1;t>=0;t--)if(u=i[t],u==n)return r-t;return 0},n.prototype.Exit=function(){this.others.length=0},n}();n.BarStack=ct,function(n){n[n.Left=0]="Left";n[n.Center=1]="Center";n[n.Right=2]="Right"}(c=n.HorizontalAlignement||(n.HorizontalAlignement={})),function(n){n[n.Top=0]="Top";n[n.Center=1]="Center";n[n.Bottom=2]="Bottom"}(lt=n.VerticalAlignement||(n.VerticalAlignement={}));kt=function(){function n(n,t){this.x=n;this.y=t}return n}();n.Point=kt;dt=["px","%","in","em"],function(n){n[n.Pixel=0]="Pixel";n[n.Percentage=1]="Percentage";n[n.Inch=2]="Inch";n[n.Em=3]="Em"}(e=n.MetricType||(n.MetricType={}));g=function(){function n(n,t){typeof n=="string"?this.fromString(n):(this.Value=n,this.Type=t)}return n.prototype.minus=function(t){return this.Type==e.Pixel?new n(this.Value-t,e.Pixel):this.Type==e.Percentage?new n(this.Value-t,e.Percentage):this.Type==e.Em?new n(this.Value-t,e.Em):this.Type==e.Inch?new n(this.Value-t,e.Inch):void 0},n.prototype.toString=function(){return this.Value+dt[this.Type||0]},n.prototype.fromString=function(n){for(var t=0;t<dt.length;t++)if(n.endsWith(dt[t])){this.Value=parseFloat(n);this.Type=t;return}},n}();n.Metric=g;gt=function(n){function t(){return n.call(this,document.createElement("div"))||this}return __extends(t,n),Object.defineProperty(t.prototype,"Message",{get:function(){return this._text},set:function(n){this._text=n;this.container&&(this.container.textContent=n)},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){this.applyStyle(this.IsInfo?"webix_info":"webix_error");this.container=document.createElement("div");this.container.innerHTML=this._text;this._view.appendChild(this.container);this._view.addEventListener("mousedown",this)},t.prototype.handleEvent=function(t){t.type=="mousedown"?(this._view.removeEventListener("mousedown",this),this.Pop()):n.prototype.handleEvent.call(this,t)},t.prototype.Push=function(){ti.Default.Add(this);this.timeout=setTimeout(function(n){n.Pop()},this.Expire||3e3,this)},t.prototype.Pop=function(){this.applyStyle("ihidden");var n={};clearTimeout(this.timeout);n.id=setTimeout(function(n,t){clearTimeout(t.id);ti.Default.Remove(n);n.Dispose()},2e3,this,n)},t.prototype.Dispose=function(){this.container=null;this._text=null;n.prototype.Dispose.call(this)},t}(t);n.Error=gt;ti=function(n){function t(){var t=n.call(this,document.createElement("div"))||this;return t.initialize(),t}return __extends(t,n),Object.defineProperty(t,"Default",{get:function(){return ni||(ni=new t,ni.Parent=b.Current),ni},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){this.applyStyle("webix_message_area");document.body.appendChild(this._view)},t.prototype.Check=function(n){return n instanceof gt},t.push=function(n,t,i){var r=new gt;r.Message=n;r.IsInfo=t;r.Expire=i;r.Push()},t}(h);n.InfoArea=ti;ii=function(){function n(n,t){this.w=typeof n=="number"||typeof n=="string"?new g(n,0):n;this.h=typeof t=="number"||typeof t=="string"?new g(t,0):t}return n}();n.Size=ii;or=function(n){function t(){return n.call(this,document.createElement("span"))||this}return __extends(t,n),t.prototype.initialize=function(){this.applyStyle("badge")},Object.defineProperty(t.prototype,"Content",{set:function(n){this.Clear();n instanceof HTMLElement?this.Add(new yt(n)):this.View.innerText=n.toString()},enumerable:!0,configurable:!0}),t}(t);n.Badge=or;ai=function(){function n(n,t){this.handler=n;this.target=t;this.loc=new kt(0,0);this.mouseloc={x:undefined,y:undefined};this.cntloc={x:this.loc.x,y:this.loc.y};this.RelocationJob=i.thread.Dispatcher.cretaeJob(this.reLocation,[],this,!0);n.View.addEventListener("dragstart",this);this.handler.View.draggable=!0;this.View=t.View}return n.prototype.handleEvent=function(n){if(n.type=="dragstart")this.mouseloc={x:n.x,y:n.y},this.cntloc={x:this.target.View.offsetLeft,y:this.target.View.offsetTop},this.handler.View.addEventListener("dragend",this);else if(n.type=="dragend"){var t=this.cntloc,r=this.mouseloc;this.Location={x:t.x+(n.x-r.x),y:Math.max(0,t.y+(n.y-r.y))};this.handler.View.removeEventListener("dragend",this)}n.type==="resize"&&i.thread.Dispatcher.Push(this.RelocationJob.Set(!0,!0))},Object.defineProperty(n.prototype,"Location",{set:function(n){this.loc=n;this.RelocationJob[0]=!0;this.RelocationJob[1]=!0;i.thread.Dispatcher.Push(this.RelocationJob.Set(!0,!0))},enumerable:!0,configurable:!0}),n.prototype.reLocation=function(n,t){var u=this.View,i=u.style,r=this.loc,f=window;n&&(i.left=r.x+o);t&&(i.top=r.y+o)},n}();n.DragManager=ai;sr=function(n){function u(t){var r=n.call(this,t||document.createElement("div"))||this;return r.loc=new kt(0,0),r.size=new ii(window.screen.availWidth/2,window.screen.availHeight/2),r.mouseloc={x:undefined,y:undefined},r.cntloc={x:r.loc.x,y:r.loc.y},r.RelocationJob=i.thread.Dispatcher.cretaeJob(r.reLocation,[],r,!0),r}return __extends(u,n),u.prototype.initialize=function(){var i=this,t;window.addEventListener("resize",this);this.body=new r("div");t=this.View.style;t.display="block";t.background="radial-gradient( #222,black)";t.position="fixed";t.border="2px gray solid";this.HorizontalAlignement=c.Center;this.VerticalAlignement=lt.Center;this.Location={x:200,y:200};this.Size=new ii(new g(90,e.Percentage),new g(90,e.Percentage));this.body.OnInitialized=function(){var n=i.Height;i.Height=new g(89,e.Percentage)};this.body.View.style.marginTop="50px";this.body.View.style.overflow="auto";n.prototype.Add.call(this,this.body)},u.prototype.Check=function(n){return n instanceof t},u.prototype.handleEvent=function(n){if(n.type=="dragstart")this.mouseloc={x:n.x,y:n.y},this.cntloc={x:this.View.offsetLeft,y:this.View.offsetTop},window.document.styleSheets.item(0);else if(n.type=="dragend"){var t=this.cntloc,r=this.mouseloc;this.Location={x:t.x+(n.x-r.x),y:t.y+(n.y-r.y)}}n.type==="resize"&&i.thread.Dispatcher.Push(this.RelocationJob.Set(!0,!0))},Object.defineProperty(u.prototype,"Height",{set:function(n){var t=n.toString();this.View.style.maxHeight=t;this.View.style.minHeight=t;i.thread.Dispatcher.Push(this.RelocationJob.Set(undefined,!0));i.thread.Dispatcher.Push(u.resizeBody,[this])},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"Width",{set:function(n){var t=n.toString();this.View.style.maxWidth=t;this.View.style.minWidth=t;this.body.View.style.width=n.minus(5).toString();i.thread.Dispatcher.Push(this.RelocationJob.Set(!0,undefined));i.thread.Dispatcher.Push(u.resizeBody,[this])},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"HorizontalAlignement",{set:function(n){this.ha=n||0;i.thread.Dispatcher.Push(this.RelocationJob.Set(!0,undefined))},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"VerticalAlignement",{set:function(n){this.va=n||0;i.thread.Dispatcher.Push(this.RelocationJob.Set(undefined,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"Location",{set:function(n){this.loc=n;i.thread.Dispatcher.Push(this.RelocationJob.Set(!0,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"Size",{set:function(n){this.size=n;this.Width=n.w;this.Height=n.h;i.thread.Dispatcher.Push(this.RelocationJob.Set(!0,!0));i.thread.Dispatcher.Push(u.resizeBody,[this])},enumerable:!0,configurable:!0}),u.prototype.reLocation=function(n,t){var e=this.View,i=e.style,u=this.loc,f=window,r="px";if(n)switch(this.ha){case c.Left:i.left=u.x+r;break;case c.Center:i.left=(f.innerWidth-this.View.clientWidth)/2+r;break;case c.Right:i.left=f.innerWidth-this.View.clientWidth-u.x+r}if(t)switch(this.va){case lt.Top:i.top=u.y+r;break;case lt.Center:i.top=(f.innerHeight-this.View.clientHeight)/2+r;break;case lt.Bottom:i.top=f.innerHeight-this.View.clientHeight-u.y+r}},u.prototype.Add=function(n){return this.body.Add(n),this},u.prototype.AddRange=function(n){for(var t=0,i=n.length;t<i;t++)this.body.Add(n[t]);return this},u.resizeBody=i.thread.Dispatcher.cretaeJob(function(n){n.body.View.style.height=n.View.clientHeight+"px";n.body.View.style.width=n.View.clientWidth+"px"},[],null,!1),u}(t);n.FixedPanel=sr;var hr=!1,rt=null,cr=new i.collection.List(String);cr.Freeze();vi=function(t){function r(n){var r=t.call(this,n)||this;return r.Pages=new i.collection.List(Object),r.opcd={Owner:r,Invoke:r.PagesChanged},r.openedModal=[],r.zIndex=1e3,r._contextMenuLayer=void 0,r._currentContextMenu=void 0,r._currentContextMenuEventArgs=void 0,r._contextMenuZIndex=1e6,r.PagesChanged=r.PagesChanged.bind(r),r}return __extends(r,t),Object.defineProperty(r.prototype,"IsAuthentication",{get:function(){return!1},enumerable:!0,configurable:!0}),r.prototype.OnPageChanging=function(){},r.prototype.OnPageChanged=function(n){var t=n._new;this.silentSelectPage(n._old,t);t&&t.OnSelected.Invoke(t,[t])},r.__fields__=function(){return[this.DPSelectedPage,this.DPCurrentModal=i.bind.DObject.CreateField("CurrentModal",pi,null,this.prototype._onCurrentModalChanged)]},r.prototype.Logout=function(){},r.prototype.silentSelectPage=function(n,t){this.Foot.Pop(n);this.showPage(t);this.Foot.Push(t)},r.prototype.Open=function(n){this.SelectedPage=n},r.prototype.PagesChanged=function(n){n.event==i.collection.CollectionEvent.Added&&this.Foot.Register(n.newItem)},r.prototype.OpenPage=function(n){for(var i,r=this.Pages.AsList(),t=0,u=r.length;t<u;t++)if(i=r[t],i.Name===n)return this.SelectedPage=i,!0;return!1},r.prototype.AddPage=function(n){n!=null&&this.Pages.Add(n)},r.prototype.SelectNaxtPage=function(){var n=this.Pages,i=n.IndexOf(this.SelectedPage),t=n.Get(i+1);t&&(this.SelectedPage=t)},r.prototype.SelectPrevPage=function(){var n=this.Pages,i=n.IndexOf(this.SelectedPage),t=n.Get(i-1);t&&(this.SelectedPage=t)},r.prototype.Update=function(){var n=this.SelectedPage;n&&n.Update()},r.prototype.OnKeyDown=function(n){var t=this.SelectedPage;t&&t.OnKeyDown(n)},r.prototype.OnKeyCombined=function(n,t){var i=this.SelectedPage;if(i)return i.OnKeyCombined(n,t)},r.prototype.OnPrint=function(){var n=this.SelectedPage;n&&n.OnPrint()},r.prototype.OnDeepSearche=function(){var n=this.SelectedPage;n&&n.OnDeepSearche()},r.prototype.OnContextMenu=function(n){var t=this.SelectedPage;t&&t.OnContextMenu(n)},r.prototype.handleEvent=function(){},r.prototype.Show=function(){rt!=null&&document.body.removeChild(rt.View);rt=this;b.Current.Show(this)},r.prototype.initialize=function(){this.Pages.Listen=this.opcd},r.getView=function(){var n=document.createElement("app");return n.id="app-"+Date.now(),n},r.prototype.searchActioned=function(n,t,i){this.SelectedPage.OnSearche(t,i)},r.prototype.OnAttached=function(){},r.prototype.OnDetached=function(){},r.prototype.OpenModal=function(n){this.CurrentModal=n},r.prototype.CloseModal=function(n){var t=this.openedModal.indexOf(n);t!=-1&&this.openedModal.splice(t,1);this.CurrentModal=this.openedModal[this.openedModal.length-1]},r.prototype._onCurrentModalChanged=function(n){var t=n._old;t&&(t.disapplyStyle("in"),t.View.parentNode&&i.helper.TryCatch(t.View,Element.prototype.remove),t.Parent=null,t.Visible=!1);t=n._new;t?(this.openedModal.indexOf(t)==-1&&this.openedModal.push(t),t.View.parentNode&&i.helper.TryCatch(t.View,Element.prototype.remove),this._view.appendChild(t.View),t.applyStyle("in"),this.applyStyle("modal-open"),t.View.style.display="block",t.View.style.zIndex=this.zIndex+++"",t.Visible=!0,t.Parent=this):this.disapplyStyle("modal-open")},r.prototype.OpenContextMenu=function(t,i){var r=this;if(this._contextMenuLayer){if(this._currentContextMenu&&!this.CloseContextMenu())return!1}else this._contextMenuLayer=(new n.ContentControl).applyStyle("context-menu-layer"),this._contextMenuLayer.Parent=this,this._contextMenuLayer.addEventListener("click",function(n,t){var i=t.target||t.srcElement;i===r._contextMenuLayer.View&&r.CloseContextMenu(void 0)},void 0,this),this._view.appendChild(this._contextMenuLayer.View);this._contextMenuLayer.disapplyStyle("hidden");this._contextMenuLayer.View.style.zIndex=""+ ++this._contextMenuZIndex;this._contextMenuLayer.Content=t.getView();this._currentContextMenu=t;this._currentContextMenuEventArgs=i;t.OnAttached(i)},r.prototype.CloseContextMenu=function(n){return this._currentContextMenuEventArgs&&(this._currentContextMenuEventArgs.cancel=!1,this._currentContextMenu&&this._currentContextMenu.OnClosed(n,this._currentContextMenuEventArgs))?!1:(this._contextMenuLayer.Content=void 0,this._currentContextMenu=void 0,this._currentContextMenuEventArgs=void 0,this._contextMenuLayer.applyStyle("hidden"),!0)},r.DPSelectedPage=i.bind.DObject.CreateField("SelectedPage",Object,null,function(n){return n.__this.OnPageChanged(n)},function(n){return n.__this.OnPageChanging(n)}),r}(h);n.Layout=vi;ut=function(f){function e(n){var t=f.call(this,e.getView())||this;return t.name=n,t.intern=!0,t}return __extends(e,f),Object.defineProperty(e.prototype,"Title",{get:function(){return this.get(e.DPTitle)},set:function(n){this.set(e.DPTitle,n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Badge",{get:function(){return this.get(e.DPBadge)},set:function(n){this.set(e.DPBadge,n)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CurrentApp",{get:function(){return rt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Name",{get:function(){return this.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SearchBox",{get:function(){var t=this;return this._search||(this._search=new hi,this._search.OnInitialized=function(i){i.Box.applyStyle("inputPage");i.applyStyle("actionPage");i.Box.View.style.borderWidth="0";i.Box.View.style.boxShadow="0 0 transparent";i.OnAction.Add(t.searchActioned.bind(t),"ts");i.AutoAction=n.SearchActionMode.Instantany;i.addEventListener("focusout",function(t,i,r){var u=r._this.SelectedPage,f=u&&u.HasSearch;f==n.SearchActionMode.Instantany&&(r.wrapper.Content=r._this.slogant)},{_this:t,wrapper:t.AppTitle})}),this._search},enumerable:!0,configurable:!0}),e.prototype.createTitle=function(n){var u=this,t=new tt,i;return t.applyStyle("page_title"),i=new r("div"),t.Content=i,t.addEventListener("click",function(n,t,i){var f=u.SelectedPage,e=f&&f.HasSearch,r;e!==rr.None&&e!=null?(r=i.wrapper.Content==i._this.slogant,r?(i.wrapper.Content=i._this.SearchBox,i._this.SearchBox.Focus()):i.wrapper.Content=i._this.slogant):r||(i.wrapper.Content=i._this.slogant)},{_this:this,wrapper:t}),i.View.textContent=n,this.slogant=i,t},e.prototype.showPage=function(n){this.PageBody.Content=n},e.prototype.OnPageChanged=function(n){document.title=this.Title+"(Version D'Essaie)";this.slogant.View.textContent=n._new.GetValue(n._new.getDPTitle());f.prototype.OnPageChanged.call(this,n)},e.prototype.initialize=function(){var n=this;f.prototype.initialize.call(this);this.applyStyle("app");this.Head=new st(!0).applyStyle("top-navbar");this.AppBody=new yt("div").applyStyle("app-body");this.Foot=new si(this,!1).applyStyle("bottom-navbar");this.AppTitle=this.createTitle(this.Title).applyStyle("app-title");this.PageBody=(new tt).applyStyle("app-page");this.AppBody.Add(this.AppTitle).Add(this.PageBody);hr=!0;this.Add(this.Head).Add(this.AppBody).Add(this.Foot);hr=!1;this.Foot.applyStyle("appFoot","app-foot");this.PageBody.disapplyStyle("container");this.Head.OnInitialized=function(t){return t.Header.OnInitialized=function(t){return t.Title=n.Name}};this.Head.Menu.Items.Source=this.Pages;this.Head.OnPropertyChanged(st.DPSelectedItem,function(t,i){n.SelectedPage=i._new||i._old});i.basic.Settings.get("AppTitleHidden")==!0?this.AppTitle.applyStyle("hideTitle"):this.AppTitle.disapplyStyle("hideTitle");s.loadCss();window.App=this},e.prototype.IsTopNavBarhidden=function(){var e=new URL(u.context.GetPath("../assets/style/bundle.css")).href,f,n,r,t,i;for(f in document.styleSheets)if(n=document.styleSheets[f],n.href&&n.href===e){for(t=0;t<n.cssRules.length;t++)i=n.cssRules[t],i.selectorText===".app"&&i.style.getPropertyValue("--top-navbar-height")&&(r=i);if(r)return parseInt(r.style.getPropertyValue("--top-navbar-height"))<5}return void 0},e.prototype.HideTopNavBar=function(n){var o=new URL(u.context.GetPath("../assets/style/bundle.css")).href,e,t,i,r,f;for(e in document.styleSheets)if(t=document.styleSheets[e],t.href&&t.href===o){for(r=0;r<t.cssRules.length;r++)f=t.cssRules[r],f.selectorText===".app"&&f.style.getPropertyValue("--top-navbar-height")&&(i=f);if(i)return n?(i.style.setProperty("--top-navbar-height","0px"),this.Head.Visible=!1):(i.style.setProperty("--top-navbar-height","50px"),this.Head.Visible=!0),!0}return!1},e.prototype.ToggleTitle=function(){this.AppTitle.View.classList.contains("hideTitle")?(i.basic.Settings.set("AppTitleHidden",!1),this.AppTitle.disapplyStyle("hideTitle")):(i.basic.Settings.set("AppTitleHidden",!0),this.AppTitle.applyStyle("hideTitle"))},e.prototype.IsTitleBringged=function(){return this.AppTitle.View.classList.contains("hideTitle")},e.prototype.Check=function(n){return n instanceof t||n instanceof ci||n instanceof st||n instanceof li||n instanceof tt},e.prototype.Add=function(n){return n instanceof ht?this.AddPage(n):t.prototype.Add.call(this,n),this},e.__fields__=function(){return[this.DPTitle,this.DPBadge]},e.DPTitle=e.CreateField("Title",String,"App"),e.DPBadge=e.CreateField("Badge",String,null),e.Apps=new i.collection.List(e),e}(vi);n.App=ut;lr=function(n){function t(t,r){var u=n.call(this,"Authentication")||this;if(nt||!(r instanceof i.bind.EventListener))throw"";return r.On=gi.bind(u),u.OnStatStatChanged=new i.bind.EventListener(t),u}return __extends(t,n),Object.defineProperty(t.prototype,"IsAuthentication",{get:function(){return!0},enumerable:!0,configurable:!0}),t}(ut);n.AuthApp=lr,function(n){n[n.Focuse=0]="Focuse";n[n.UnFocus=1]="UnFocus"}(yi=n.NotifyType||(n.NotifyType={})),function(n){n[n.Main=0]="Main";n[n.Stackable=1]="Stackable";n[n.Instantany=3]="Instantany"}(ft=n.ServiceType||(n.ServiceType={}));at=new n.Desktop;ar=function(n){function t(){var t=n.call(this)||this;return t._=[],t.map={},t}return __extends(t,n),t.prototype.Push=function(n,t){this._.push(n);t!==undefined&&(this.map[t]=n)},t.prototype.Remove=function(n){var t=this.map[n],i;return t!==undefined&&(i=this._.indexOf(t),i!==-1&&this._.splice(i,1),delete this.map[n]),t},t.prototype.Create=function(){return function(n){function t(i,r){for(var f,e=n.call(this)||this,u=0;u<t._.length;u++)f=t._[u],f.apply(i,r);return e}return __extends(t,n),t.Push=function(n,t){this._.push(n);t!==undefined&&(this.map[t]=n)},t.Remove=function(n){var t=this.map[n],i;return t!==undefined&&(i=this._.indexOf(t),i!==-1&&this._.splice(i,1),delete this.map[n]),t},t._=[],t.map={},t}(Function)},t}(Function);n.FunctionGroup=ar;pi=function(t){function u(){var n=t.call(this,document.createElement("div"))||this;return n._fm=!1,n.events=[],n._onClick=new i.bind.EventListener("test"),n}return __extends(u,t),Object.defineProperty(u.prototype,"Content",{set:function(n){this._body.Content=n},enumerable:!0,configurable:!0}),u.prototype.getSearchBox=function(t){if(!this._searchBox){var u=(new n.Div).applyStyle("pull-left","flat"),r=new ot(k.filter,!1,"Search"),i=u;return i.Add(r),i.Add(r),this.abonment=new n.ProxyAutoCompleteBox(new n.Input(document.createElement("input")),t),this.abonment.Box.Placeholder="Search ...",i.Add(this.abonment.Box),i.Enable=!0,this._searchBox=i,this.abonment.OnValueChanged(this,this.callBack),i}return this.abonment.DataSource=t,this._searchBox},u.prototype.callBack=function(n,t,i){if(this.onSearch)this.onSearch(this,n,t,i)},u.prototype.OnSearch=function(n){this.onSearch=n},u.prototype.OkTitle=function(n){return this.createBtn(a.ok,n)},u.prototype.AbortTitle=function(n){return this.createBtn(a.abort,n)},u.prototype.Canceltitle=function(n){return this.createBtn(a.cancel,n)},u.prototype.Title=function(n){return this._ts=n,this._dtitle&&(this._dtitle.View.innerHTML=n),this.asSearch=!1,this},u.prototype.Search=function(n){this._dtitle?(this._dtitle.Clear(),this._dtitle.View.innerHTML="",this._dtitle.Add(this.getSearchBox(n))):this.getSearchBox(n);this.asSearch=!0},u.prototype.SetDialog=function(n,t){this.IsInit?(this._body.Clear(),this.Title(n),this._body.Add(t)):this.OnInitialized=function(i){i._body.Clear();i.Title(n);i._body.Content=t}},u.NextZIndex=function(){return++this.zIndex},Object.defineProperty(u.prototype,"IsOpen",{get:function(){return document.body.contains(this.View)},enumerable:!0,configurable:!0}),u.prototype.Open=function(){b.Current.CurrentApp.OpenModal(this);this.OnInitialized=function(n){var t=document.activeElement;t&&t.blur&&t.blur();i.thread.Dispatcher.call(n.focuser,function(){i.thread.Dispatcher.OnIdle(this,this.reFocuseOn,!0)})}},u.prototype.silentClose=function(){(this.targetApp||b.Current.CurrentApp).CloseModal(this)},u.prototype.Close=function(n){var t=new wi(this,n,a[n]),i=this._onClick.PInvok("test",[t],this);t.stayOpen||this.silentClose()},u.prototype.initialize=function(){this.applyStyle("modal","fade");this.View.setAttribute("role","dialog");this._container=new r("div").applyStyle("modal-dialog");this._container1=new r("div").applyStyle("modal-content");this._head=new r("div").applyStyle("modal-header");this._body=(new tt).applyStyle("modal-body");this._foot=new r("div").applyStyle("modal-footer");this.createHeader(this._head);this.createFoot(this._foot);this._container.Add(this._container1.AddRange([this._head,this._body,this._foot]));t.prototype.Add.call(this,this._container);this.drgmngr=new ai(this._head,this._container1);this._container1.View.style.top=0+o;this.focuser=new i.basic.focuser(this._view,!1)},u.prototype.createHeader=function(n){var f=this,i=new r("div").applyStyle("close").setAttribute("data-dismiss","modal").setAttribute("aria-label","close"),u=new r("span").setAttribute("aria-hidden","true"),t;u.View.innerHTML="&times;";t=new r("h4").applyStyle("modal-title");this.asSearch?t.Add(this._searchBox):t.View.innerHTML=this._ts==null?"Dialog":this._ts;n.AddRange([i.Add(u),t]);i.View.onclick=function(){return f.Close(a.Exit)};this._dtitle=t},u.prototype.createFoot=function(){this.createBtn(a.ok);this.createBtn(a.cancel)},u.prototype._setText=function(n,t){var i=this.events[n];i.btn.Visible=t!==null&&t!=="";i.btn.Text=t===undefined?a[n].toUpperCase():t==null?"":t},u.prototype.SetVisible=function(n,t){var i=this,r=this.events[n];r?r.btn.Visible=t:this.OnInitialized=function(){var r=i.events[n];r?r.btn.Visible=t:(i.createBtn(n),r=i.events[n],r.btn.Visible=t)}},u.prototype.createBtn=function(n,t){var i=this.events[n];return(t!==null&&t!==""||i)&&(this.IsInit?i?this._setText(n,t):this._initBtn(t,n):this.OnInitialized=function(i){return i._initBtn(t,n)}),this},u.prototype._initBtn=function(n,t){var i=this.events[t];if(!i){if(n===null||n==="")return;this.events[t]=i={btn:(new d).applyStyle(u.casses[t]),event:null};i.event=i.btn.addEventListener("click",this._btnClicked,t,this);this._foot.Add(i.btn)}this._setText(t,n)},u.prototype._btnClicked=function(n,t,i){return this.Close(i)},u.prototype.Add=function(n){return this._body||this.initialize(),this._body.Add(n),this},u.prototype.Remove=function(n){return this._body.Remove(n)},u.prototype.Insert=function(n,t){return this._body.Insert(n,t),this},u.prototype.Dispose=function(){this.silentClose();t.prototype.Dispose.call(this)},Object.defineProperty(u.prototype,"OnClosed",{get:function(){return this._onClick},enumerable:!0,configurable:!0}),u.prototype.OnKeyDown=function(n){var i=this._body.Content,r,t,u,f;if(i&&i.OnKeyDown&&i.OnKeyDown(n))return!0;if(n.keyCode==27)this.Close(a.cancel);else if(n.keyCode==13){if(r=this.focuser.focuse(!1,n.shiftKey),r==!0){for(t=1;t<4;t++)if(u=this.events[t],u&&u.btn.View===document.activeElement)return!1;return f=this.events[1]||this.events[2]||this.events[3],f.btn.Focus(),n.stopImmediatePropagation(),n.preventDefault(),!0}return r}},u.prototype.OnKeyCombined=function(n,t){var i=this._body.Content;if(i)return i.OnKeyCombined(n,t)},u.prototype.Clear=function(){this.Content=null;this._body.Clear()},u._ShowDialog=function(n,t,i,r,f){if(this.closedMessages.length==0)var e=new u;else e=this.closedMessages.pop();return e.OnInitialized=function(){e.Title(n==null?"Confirm":n);e.Clear();typeof t=="string"?e._body.View.innerHTML="<h5>"+t+"<\/h5>":t instanceof HTMLElement?e._body.View.appendChild(t):e._body.Content=t;e.OkTitle(r==null?"Ok":r);e.Canceltitle(f===undefined?"Cancel":f);e.OnClosed.Add(function(n){e.OnClosed.Remove(0);i&&i(n.msg,n.Modal);var t=u.closedMessages.indexOf(e);t==-1&&u.closedMessages.push(e)},0)},e.Open(),e.Close.bind(e)},u.ShowDialog=function(n,t,i,r,f,e){if(this.closedMessages.length==0)var o=new u;else o=this.closedMessages.pop();return o.OnInitialized=function(){o.Title(n==null?"Confirm":n);o.Clear();typeof t=="string"?o._body.View.innerHTML="<h5>"+t+"<\/h5>":t instanceof HTMLElement?o._body.View.appendChild(t):o._body.Content=t;o.OkTitle(r==null?"Ok":r);o.Canceltitle(f===undefined?"Cancel":f);o.AbortTitle(e);o.OnClosed.Add(function(n){if(i&&i(n),!n.stayOpen){o.OnClosed.Remove(0);var t=u.closedMessages.indexOf(o);t==-1&&u.closedMessages.push(o)}},0)},o.Open(),o},u.prototype.setStyle=function(n,t){return this._container.View.style[n]=t,this},u.prototype.setWidth=function(n){return this._container.View.style.width=n,this},u.prototype.setHeight=function(n){return this._container.View.style.height=n,this},Object.defineProperty(u.prototype,"IsMaterial",{set:function(n){n?this.applyStyle("material"):this.disapplyStyle("material")},enumerable:!0,configurable:!0}),u.prototype.OnContextMenu=function(n){var t=this.Content;if(t)return t.OnContextMenu(n)},u.zIndex=1e4,u.casses=["","btn-primary","btn-danger","btn-warning"],u.closedMessages=[],u}(t);n.Modal=pi,function(n){n[n.Exit=0]="Exit";n[n.ok=1]="ok";n[n.cancel=2]="cancel";n[n.abort=3]="abort"}(a=n.MessageResult||(n.MessageResult={}));wi=function(){function n(n,t,i){this.Modal=n;this.Result=t;this.msg=i}return Object.defineProperty(n.prototype,"stayOpen",{get:function(){return this._stayOpen},enumerable:!0,configurable:!0}),n.prototype.StayOpen=function(){this._stayOpen=!0},n.prototype.Close=function(){this._stayOpen=!0},n}();n.MessageEventArgs=wi;bi=function(n){function t(){return n.call(this,document.createElement("img"))||this}return __extends(t,n),Object.defineProperty(t.prototype,"Source",{get:function(){return this._view.src},set:function(n){this._view.src=n},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){},t}(t);n.Image=bi;ri=function(n){function t(t,i){var r=n.call(this,document.createElement("div"))||this;return r.OnInitialized=function(n){if(n._image.Source=t,i instanceof HTMLElement)n._caption.View.appendChild(i);else if(typeof i=="string")n._caption.View.innerText=i;else throw"";},r}return __extends(t,n),t.prototype.initialize=function(){this.applyStyle("item");this._image=new bi;this._caption=(new f).applyStyle("carousel-caption");this.AddRange([this._image,this._caption])},Object.defineProperty(t.prototype,"Active",{set:function(n){n?this.applyStyle("active"):this.disapplyStyle("active")},enumerable:!0,configurable:!0}),t}(t);n.CarouselItem=ri;vr=function(n){function t(){var t=n.call(this,document.createElement("div"))||this;return t.opcd={Owner:t,Invoke:t.ItemsChanged},t.fromInit=!1,t.OnInitialized=function(n){return n.ItemsChanged(i.utils.ListEventArgs.ResetEvent)},t}return __extends(t,n),t.prototype.initialize=function(){this.applyStyle("carousel","slide");this.View.setAttribute("data-ride","carousel");this._indecators=new r("ol").applyStyle("carousel-indicators");this._inner=(new f).applyStyle("carousel-inner");this._items=new i.collection.List(ri);this._items.Listen=this.opcd;this.leftButton=this.createButton(!0);this.rightButton=this.createButton(!1);this.fromInit=!0;n.prototype.Add.call(this,this._indecators);n.prototype.Add.call(this,this._inner);n.prototype.Add.call(this,this.leftButton);n.prototype.Add.call(this,this.rightButton);this.fromInit=!1},t.prototype.createButton=function(n){var u=n===!0?"left":"right",f=new r("a").applyStyle(u,"carousel-control"),t=f.View,i;return t.setAttribute("href","#"+this.Id),t.setAttribute("role","button"),t.setAttribute("data-slide",n===!0?"prev":"next"),i=document.createElement("span"),i.classList.add("glyphicon","glyphicon-chevron-"+u),t.appendChild(i),f},t.prototype.createIndecator=function(n){var t=new r("li");return t.View.setAttribute("data-target","#"+this.Id),t.View.setAttribute("data-slide-to",n+""),t},t.prototype.ItemsChanged=function(n){var s,c,o,h;if(this.IsInit){var u=this._inner,f=this._indecators,e=n.newItem,t=void 0,r=void 0;switch(n.event){case i.collection.CollectionEvent.Added:t=this.createIndecator(n.startIndex);u.Add(e);f.Add(t);e.Indicator=t;case i.collection.CollectionEvent.Cleared:this.Clear();return;case i.collection.CollectionEvent.Removed:r=n.oldItem;f.Remove(r.Indicator);u.Remove(r);break;case i.collection.CollectionEvent.Replace:r=n.oldItem;f.Remove(r.Indicator);u.Remove(r);t=this.createIndecator(n.startIndex);u.Add(e);f.Add(t);e.Indicator=t;break;case i.collection.CollectionEvent.Reset:for(this.Clear(),s=0,c=this._items.Count;s<c;s++)o=this._items.Get(0),h=o.Indicator||this.createIndecator(n.startIndex),u.Add(o),f.Add(h),o.Indicator=h}this.selectNext()}},t.prototype.selectNext=function(){for(var n=this._items,t=0,i=n.Count;t<i;t++)if(n.Get(t).View.classList.contains("active"))return;i>0&&(n.Get(0).Active=!0)},t.prototype.Clear=function(){this._indecators.Clear();this._inner.Clear()},t.prototype.Check=function(n){return this.fromInit||n instanceof ri},t.prototype.Add=function(t){return this.fromInit?n.prototype.Add.call(this,t):this._items.Add(t),this},t.prototype.Remove=function(n){return this._items.Remove(n),!0},t.prototype.RemoveAt=function(n){return this._items.RemoveAt(n),!0},t}(h);n.Carousel=vr;y=function(n){function t(t){var i=n.call(this,document.createElement("li"))||this;return i.isNext=t,i}return __extends(t,n),t.prototype.initialize=function(){var t=new p,n=new r("span"),i=new r("a");this.anchore=t;this.span=n;this.text=i;this.isNext!=null&&(t.View.setAttribute("aria-label",this.isNext?"Next":"Previous"),n.View.setAttribute("aria-hidden",this.isNext?"true":"false"),n.View.innerHTML=this.isNext?"»":"«");this.View.addEventListener("click",this);this.Add(t.AddRange([n,i]))},Object.defineProperty(t.prototype,"Icon",{set:function(n){this.span.View.innerHTML=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Title",{set:function(n){this.text.View.innerHTML=n},enumerable:!0,configurable:!0}),t.prototype.handleEvent=function(){this.OnClick&&this.OnClick(this)},t}(t);n.PaginationSurf=y;yr=function(n){function t(){var t=n.call(this,document.createElement("nav"))||this;return t.isc=!1,t}return __extends(t,n),t.__fields__=function(){return[t.DPMax,t.DPIndex]},t.prototype.initialize=function(){var t=this,n;this.list=new r("ul").applyStyle("pager");this.prev=new y(!1).applyStyle("previous");this.next=new y(!0).applyStyle("next");n=new r("li");this.actionText=(new ei).applyStyle("text-center","borderless");this.actionText.View.addEventListener("change",this);this.actionText.View.style.width="80px";this.actionText.View.style.border="0px";this.actionText.Text="0";n.Add(new p(this.actionText));this.Add(this.list.AddRange([this.prev,n,this.next]));this.prev.Icon="<";this.prev.Title="<<<<";this.next.Icon=">";this.next.Title=">>>>";this.next.OnClick=function(){t.Index++};this.prev.OnClick=function(){t.Index--}},t.prototype.handleEvent=function(){if(!this.isc)this.Index=parseFloat(this.actionText.Text)},t.ctor=function(){this.DPMax=t.CreateField("Max",Number,Infinity,function(n){var t=n._new;n.__this.Index>t&&(n.__this.Index=t)},function(n){n._new<0&&(n._new=0)});this.DPIndex=t.CreateField("Index",Number,0,this.prototype._onIndexChanged,function(n){n._new<0?n._new=0:isNaN(n._new)?n._new=isNaN(n._old)?0:n._old:n._new>n.__this.Max&&(n._new=n.__this.Max)})},t.prototype._onIndexChanged=function(n){this.isc=!0;this.actionText.Text=n._new+"/"+this.Max;this.isc=!1},t}(t);n.BiPagination=yr;pr=function(n){function t(){var t=n.call(this,document.createElement("ul"))||this;return t.items=new i.collection.List(y),t.opcd={Owner:t,Invoke:t.OnItemsChanged},t}return __extends(t,n),Object.defineProperty(t.prototype,"SelectedRange",{get:function(){return this.get(t.DPRange)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Count",{get:function(){return this.get(t.DPCount)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StartIndex",{get:function(){return this.get(t.DPStartIndex)},set:function(n){this.set(t.DPStartIndex,n)},enumerable:!0,configurable:!0}),t.prototype.OnCountChanged=function(n,t){for(var u,r,i=n;i<t;i++)this.items.Add(r=new y),r.OnClick=this.OnClick;for(i=t;i<n;i++)r=this.items.Get(i-1),u=this.items.RemoveAt(i-1),r.OnClick=null;this.StartIndex=t*this.SelectedRange},t.prototype.OnRangeChanged=function(n,t){this.StartIndex=t*this.Count},t.prototype.OnStartIndexChanged=function(){for(var t,i=this.Count,n=0;n<i;n++)t=this.items.Get(n),t.Icon=n+""},t.prototype.AddItem=function(){},t.prototype.initialize=function(){var t,n;for(this.applyStyle("pagination"),this.prev=new y(!1),this.next=new y(!0),this.Add(this.prev),this.Add(this.next),this.items.Listen=this.opcd,n=0;n<10;n++)t=new y,function(n){return t.OnInitialized=function(t){return t.Icon=n.toString()}}(n),this.items.Add(t);for(n=0;n<this.items.Count;n++)this.Add(this.items.Get(n))},t.prototype.OnClick=function(n){this.sp&&this.sp.disapplyStyle("active");this.sp=n;this.sp.applyStyle("active")},t.prototype.isInRange=function(n){var t=n-this.SelectedRange*this.Count;return t<this.Count&&t>=0},t.prototype.convert=function(n){return n-this.SelectedRange*this.Count},t.prototype.OnItemsChanged=function(n){var u,e,o,t,f,r;switch(n.event){case i.collection.CollectionEvent.Added:n.newItem.OnClick=this.OnClick;u=n.startIndex;(u<0||u>=this.Count)&&this.Insert(n.newItem,u+1);break;case i.collection.CollectionEvent.Removed:this.Remove(n.oldItem);n.oldItem.OnClick=null;break;case i.collection.CollectionEvent.Cleared:for(e=n.collection,t=0,f=this.Count;t<f;t++)r=e[0],this.Remove(r),r.OnClick=null;break;case i.collection.CollectionEvent.Reset:for(o=this.items,t=0,f=this.Count;t<f;t++)r=o.Get(0),this.Remove(r),r.OnClick=null}},t.DPRange=t.CreateField("Range",Number,0,function(n){return n.__this.OnRangeChanged(n._old,n._new)}),t.DPStartIndex=t.CreateField("StartIndex",Number,0,function(n){return n.__this.OnStartIndexChanged(n._new)}),t.DPCount=t.CreateField("Count",Number,10,function(n){return n.__this.OnCountChanged(n._old,n._new)}),t}(t);n.Pagination=pr;wr=function(n){function t(){var t=n.call(this,document.createElement("div"))||this;return t.f=!1,t.minValue=-Number.MAX_VALUE,t.defaultValue=0,t.maxvalue=Number.MAX_VALUE,t}return __extends(t,n),Object.defineProperty(t.prototype,"Value",{get:function(){return this.get(t.DPValue)},set:function(n){this.set(t.DPValue,n)},enumerable:!0,configurable:!0}),t.__fields__=function(){return[t.DPValue]},t.prototype._hasValue_=function(){return!0},t.prototype.initialize=function(){var n=this;this.applyStyle("input-group","input-group-lg");var t=new r("a").applyStyle("btn","btn-primary","input-group-addon","glyphicon","glyphicon-minus-sign"),i=new r("a").applyStyle("btn","btn-primary","input-group-addon","glyphicon","glyphicon-plus-sign"),u=new bt;this.AddRange([this.sleft=t,this.text=u,this.sright=i]);this.text.Text="0";this.text.View.onchange=this.textChanged.bind(this);t.View.onclick=function(){n.Value--};i.View.onclick=function(){n.Value++}},t.prototype.textChanged=function(){this.Value=parseFloat(this.text.Text)},t.prototype.Focus=function(){this.text.View.focus()},t.prototype.SelectAll=function(){var n=this.text.View;n.select()},t.DPValue=i.bind.DObject.CreateField("Value",Number,0,function(n){n.__this.text.Text=(n._new==null?0:n._new)+""},function(n){var t=n.__this,i=n._new;i!=null&&isFinite(i)?i<t.minValue?n._new=t.minValue:i>t.maxvalue&&(n._new=t.maxvalue):n._new=t.defaultValue}),t}(t);n.NumericUpDown=wr;br=function(n){function t(){var t=n.call(this,document.createElement("div"))||this;return t.caption=document.createElement("div"),t._view.appendChild(t.caption),t}return __extends(t,n),Object.defineProperty(t.prototype,"Caption",{set:function(n){this.caption.textContent=n},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){this.applyStyle("inavigation");this.caption.classList.add("icaption")},t.prototype.getTemplate=function(n){return(new f).applyStyle("itab-header","sp-tooltip").Add(n)},t.prototype.Add=function(t){return n.prototype.Add.call(this,t.CaptionControl),this},t.prototype.AddRange=function(){throw"Not Implimented";},t.prototype.Remove=function(t){return n.prototype.Remove.call(this,t.CaptionControl)},t.prototype.Insert=function(t,i){return n.prototype.Insert.call(this,t.CaptionControl,i),this},t.prototype.SetSeparator=function(){var t=new f;t.applyStyle("separator");n.prototype.Add.call(this,t)},t}(t);ki=function(t){function i(n,i){var r=t.call(this,document.createElement("div"))||this;return r.Name=n,r.title=(new f).applyStyle("icontent-header","hidden"),r.container=new f,r.caption=new d,r.Caption=i,r}return __extends(i,t),i.prototype.OnPrint=function(){},Object.defineProperty(i.prototype,"CaptionControl",{get:function(){return this.caption},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Title",{set:function(n){n!=null&&n!=""?(typeof n=="string"?this.title.View.textContent=n:this.title.View.appendChild(n),this.title.disapplyStyle("hidden")):(this.title.View.innerHTML="",this.title.applyStyle("hidden"))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Caption",{set:function(n){this.caption.Text=n},enumerable:!0,configurable:!0}),i.prototype.initialize=function(){this.applyStyle("fitHeight");this.container.applyStyle("fitHeight","nav-panel");t.prototype.Add.call(this,this.title);t.prototype.Add.call(this,this.container)},Object.defineProperty(i.prototype,"ToolTip",{set:function(n){var t=document.createElement("text");t.textContent=n;t.classList.add("sp-tooltiptext");this.caption.Content=t},enumerable:!0,configurable:!0}),i.prototype.Add=function(n){return this.container.Add(n),this},i.prototype.AddRange=function(n){return this.container.AddRange(n),this},i.prototype.Remove=function(n){return this.container.Remove(n)},i.prototype.RemoveAt=function(n,t){return this.container.RemoveAt(n,t)},i.prototype.Clear=function(){this.container.Clear()},i.prototype.Update=function(){},i.prototype.GetLeftBar=function(){return null},i.prototype.GetRightBar=function(){return null},i.prototype.Handled=function(){return!0},Object.defineProperty(i.prototype,"ServiceType",{get:function(){return ft.Instantany},enumerable:!0,configurable:!0}),i.prototype.Callback=function(){},i.prototype.OnBringIntoFront=function(){},i.prototype.OnKeyDown=function(){},i.prototype.OnSearche=function(){},i.prototype.OnDeepSearch=function(){},i.prototype.getHelp=function(t){var i=["primary","success","danger","info","warning"],f=0,r="";for(var u in t)r+='<div class="input-group" style="background:gray"> <span class="input-group-btn"> <label class="btn btn-'+i[f++%i.length]+'">'+u+'<\/label> <\/span> <label class="form-control" >'+t[u]+"<\/label> <\/div>";n.InfoArea.push(r,!0,1e4)},i}(t);n.NavPanel=ki;di=function(n){function t(t){var i=n.call(this,document.createElement("div"))||this;return i.navPage=t,i}return __extends(t,n),t.prototype.initialize=function(){this.applyStyle("icontent")},t.prototype.Check=function(){return!0},t.prototype.Add=function(n){return this._view.appendChild(n.View),n.Parent=this.navPage,this},t.prototype.Remove=function(n){return this._view.removeChild(n.View),n.Parent=null,!0},t}(t);n.IContent=di;kr=function(t){function r(n,i,r){var u=t.call(this,n,i,r)||this;return u.con=new di(u),u.nav=new br,u.caption=new d,u.children=[],u.events=[],u.panels={},u}return __extends(r,t),r.__fields__=function(){return[r.DPSelectedItem]},r.prototype._onSelectedItemChanged=function(n){var i=n._old,t=n._new;i&&(this.con.Remove(i),i.IsActive=!1,i.CaptionControl.Parent.disapplyStyle("selected"),i.disapplyStyle("selected"),this.app.Foot.Pop(i));t&&(this.con.Add(t),t.IsActive=!0,t.CaptionControl.Parent.applyStyle("selected"),t.applyStyle("selected"),t.OnBringIntoFront(),this.app.Foot.Push(t))},Object.defineProperty(r.prototype,"Caption",{set:function(n){this.nav.Caption=n},enumerable:!0,configurable:!0}),r.prototype.initialize=function(){t.prototype.initialize.call(this);this._view.classList.add("inavPanel");this.caption.applyStyle("icaption");this.islocal=!0;t.prototype.Add.call(this,this.nav);t.prototype.Add.call(this,this.con);delete this.islocal},r.prototype.ToggleNav=function(){var n=this.nav.View,t=n.classList.contains("hideNav");t?n.classList.remove("hideNav"):n.classList.add("hideNav")},r.prototype.Add=function(){throw"Not Implimented";},r.prototype.AddRange=function(){throw"Not Implimented";},r.prototype.Check=function(){return!!this.islocal},Object.defineProperty(r.prototype,"SelectedItem",{get:function(){return this.get(r.DPSelectedItem)},set:function(n){this.set(r.DPSelectedItem,n)},enumerable:!0,configurable:!0}),r.prototype.SetPanel=function(n){var t=this.panels[n.Name],i;if(t)throw"this panel exist";this.panels[n.Name]=n;this.children.push(n);i=this.nav.Add(n);this.events.push(n.CaptionControl.addEventListener("click",r._onItemSelected,{Item:n,List:this}));this.get(r.DPSelectedItem)||(this.SelectedItem=n)},r.prototype.GetPanelOf=function(n){for(var t in this.panels)if(this.panels[t]instanceof n)return this.panels[t];return undefined},r.prototype.GetPanelsOf=function(n){var t=[];for(var i in this.panels)this.panels[i]instanceof n&&t.push(this.panels[i]);return t},r.prototype.SetSeparator=function(){this.nav.SetSeparator()},r.prototype.OnKeyCombined=function(n,t){var i=this.SelectedItem;if(i)return i.OnKeyCombined(n,t)},r.prototype.OnKeyDown=function(t){var i=this.SelectedItem,r;if(t.altKey){if(t.keyCode===n.Keys.Down)return this.SelectedItem=this.children[(1+this.children.indexOf(i))%this.children.length],t.stopPropagation(),t.preventDefault();if(t.keyCode===n.Keys.Up){r=this.children.indexOf(i);r==0&&(r=this.children.length);this.SelectedItem=this.children[(-1+r)%this.children.length];t.stopPropagation();t.preventDefault();return}}i&&i.OnKeyDown(t)},r.prototype.OnContextMenu=function(n){var i=this.SelectedItem;return i&&i.OnContextMenu(n)?!0:t.prototype.OnContextMenu.call(this,n)},r.prototype.OnPrint=function(){var n=this.SelectedItem;n&&n.OnPrint()},r._onItemSelected=function(n,t,i){var u=i.List.SelectedItem,r;u&&(u.IsActive=!1);r=i.Item;r&&(r.IsActive=!0);i.List.SelectedItem=i.Item},r.prototype.Select=function(n){var t=this.panels[n];if(t)this.SelectedItem=t;else return!1;return!0},r.prototype.GetLeftBar=function(){var n=this.SelectedItem;return n&&n.GetLeftBar()},Object.defineProperty(r.prototype,"HasSearch",{get:function(){return this.SelectedItem&&this.SelectedItem.HasSearch},set:function(){},enumerable:!0,configurable:!0}),r.prototype.GetRightBar=function(){var n=this.SelectedItem;return n&&n.GetRightBar()},r.prototype.Update=function(){var n=this.SelectedItem;n&&n.Update()},r.prototype.OnSearche=function(n,t){var i=this.SelectedItem;i&&i.OnSearche(n,t)},r.prototype.OnDeepSearche=function(){var n=this.SelectedItem;n&&n.OnDeepSearch()},r.DPSelectedItem=i.bind.DObject.CreateField("SelectedItem",ki,null,r.prototype._onSelectedItemChanged),r}(n.Page);n.NavPage=kr}(e=t.UI||(t.UI={})),function(n){var s=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.Create=function(n){var t=n instanceof i.bind.Scop,u=document.createElement("label");return u.textContent=((t?n.Value:n)||"").toString(),new r(u,t?n:new i.bind.ValueScop(n))},t}(n.JControl),r,w,u,f,c,b,a,e,v,rt,l,t,k,d,g,y,p,nt,tt,ut,it;n.TemplateShadow=s;r=function(n){function t(t,r,u){var f=n.call(this,t)||this;return f.scop=r,f.cnt=new i.bind.Controller(u||f),r||stop(),f}return __extends(t,n),Object.defineProperty(t.prototype,"Controller",{get:function(){return this.cnt},enumerable:!0,configurable:!0}),t.prototype.setDataContext=function(n){this.scop&&(this.scop.Value=n)},t.prototype.getDataContext=function(){return this.scop?this.scop.Value:null},t.prototype.initialize=function(){var n,t;this.scop==undefined&&(n=this._view.getAttribute("db-bind"),n&&n.indexOf("$")===0&&(this.scop=i.bind.Scop.Create(n)));t=this._view.getAttribute("db-bind");this._view.setAttribute("db-bind","~"+i.bind.AnonymouseScop.Register(this.scop)+(t&&t!=""?"."+t:""));this.cnt.processHowEver=!0;this.cnt.View=this._view},t.prototype.Check=function(){return!1},Object.defineProperty(t.prototype,"Scop",{get:function(){return this.scop},enumerable:!0,configurable:!0}),t.prototype.getScop=function(){return this.scop},t.prototype.Dispose=function(){stop()},t}(s);n.ScopicTemplateShadow=r;w=function(){function n(n,t){this.control=n;this.scop=t;this.cnt=new i.bind.Controller(n);this.initialize()}return Object.defineProperty(n.prototype,"Controller",{get:function(){return this.cnt},enumerable:!0,configurable:!0}),n.prototype.setDataContext=function(n){this.scop&&(this.scop.Value=n)},n.prototype.getDataContext=function(){return this.scop?this.scop.Value:null},n.prototype.initialize=function(){var n,t;this.scop==undefined&&(n=this.control.View.getAttribute("db-bind"),n&&n.indexOf("$")===0&&(this.scop=i.bind.Scop.Create(n)));t=this.control.View.getAttribute("db-bind");this.control.View.setAttribute("db-bind","~"+i.bind.AnonymouseScop.Register(this.scop)+(t&&t!=""?"."+t:""));this.cnt.processHowEver=!0;this.cnt.View=this.control.View},n.prototype.Check=function(){return!1},Object.defineProperty(n.prototype,"Scop",{get:function(){return this.scop},enumerable:!0,configurable:!0}),n.prototype.getScop=function(){return this.scop},n}();n.EScopicTemplateShadow=w;u=function(){function n(){}return n.ToTemplate=function(t,i){var r,u,o;return t instanceof n||t instanceof f?t:t instanceof HTMLTemplateElement?new f(t.content.firstElementChild,!0):t instanceof HTMLElement?new f(t,i):typeof t=="string"?(r=e._getTemplate(t),r==null)?(u="the template { "+t+" } was not found",console.error(new h(u)),o=document.createElement("error"),o.innerText=u,new f(o,!1)):new c(r):new c(e._getTemplate(t))},n}();n.Template=u;f=function(){function n(n,t){this.dom=n;n instanceof HTMLTemplateElement?(this.dom=n.content.firstElementChild,this.asTemplate=!0):this.asTemplate=!!t;Object.freeze(this)}return n.prototype.CreateShadow=function(n,t){return new r(this.asTemplate?this.dom.cloneNode(!0):this.dom,n instanceof i.bind.Scop?n:new i.bind.ValueScop(n),t)},n}();n.HtmlTemplate=f;c=function(){function n(n){if(this.template=typeof n=="string"?i.mvc.MvcDescriptor.Get(n):n,this.template==null)throw new h("the template { "+n+" } was not found");}return n.prototype.CreateShadow=function(n,t){return new r(this.template.Create(),n instanceof i.bind.Scop?n:new i.bind.ValueScop(n),t)},n}();n.ScopicTemplate=c;a=function(n){function t(r,f){var e=n.call(this,null)||this;return e.data=f,e._onCompiled=new i.bind.EventListener(e,!0),e.compiled=!1,e._template=u.ToTemplate(r,!1),e._template==null,e.Shadow=e._template.CreateShadow(f===t.Me?e:f,e),e.Shadow.Parent=e,e._view=e.Shadow.View,e}return __extends(t,n),t.__fields__=function(){return[this.DPData]},t.ctor=function(){this.DPData=i.bind.DObject.CreateField("Data",Object,null,t.prototype.OnDataChanged)},t.prototype.OnFullInitialized=function(){var t=this.Shadow.Controller;t&&(t.OnCompiled={Owner:this,Invoke:this._onTemplateCompiled});n.prototype.OnFullInitialized.call(this)},t.prototype._onTemplateCompiled=function(n){this.compiled=!0;this.OnCompileEnd(n);this._onCompiled.PInvok(this,[this,n])},t.prototype.OnCompileEnd=function(){},t.prototype.getScop=function(){return this.Shadow instanceof r?this.Shadow.Scop:null},t.prototype.initialize=function(){},Object.defineProperty(t.prototype,"OnCompiled",{set:function(n){this.compiled?n(this):this._onCompiled.On=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsCompiled",{get:function(){return this.compiled},enumerable:!0,configurable:!0}),t.prototype.OnDataChanged=function(n){this.Shadow.setDataContext(n._new)},t.Me={},t}(n.JControl);n.TControl=a;e=function(t){function r(n,r,u,f){var e=t.call(this,n||document.createElement("div"),u)||this;return e.garbage=[],e.AcceptNullValue=!0,e.OnItemSelected=new i.bind.EventListener(""),e.OnItemInserted=new i.bind.EventListener(""),e.OnItemRemoved=new i.bind.EventListener(""),e.OnChildClicked=new i.bind.EventListener(""),e.sli={Owner:e,Invoke:e.OnSourceChanged},e.count=0,e.initTemplate(r,f),e}return __extends(r,t),r.prototype.instantanyInitializeParent=function(){return!0},r.__fields__=function(){return[r.DPSelectedIndex,r.DPTemplate,r.DPSource,this.DPSelectedItem]},Object.defineProperty(r.prototype,"Source",{get:function(){return this.get(r.DPSource)},set:function(n){this.set(r.DPSource,n)},enumerable:!0,configurable:!0}),r.prototype.__checkSelectedIndex=function(n){var i=this.Source,t=i==null?0:i.Count,r=isNaN(n._new)||n._new==null||n._new<0?-1:n._new;r===-1?n._new=this.AcceptNullValue||t==0?-1:0:r>=t&&(n._new=this.AcceptNullValue?t:t-1)},r.prototype.swap=function(n){var t=this.Source,i=t==null?0:t.Count,r=n;return n<0?-1:r>=i?i-1:n},Object.defineProperty(r.prototype,"SelectedIndex",{get:function(){return this.get(r.DPSelectedIndex)},set:function(n){this.set(r.DPSelectedIndex,n)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"ItemStyle",{get:function(){return this.get(r.DPItemStyle)},set:function(n){this.set(r.DPItemStyle,n)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Template",{get:function(){return this.get(r.DPTemplate)},set:function(n){this.set(r.DPTemplate,n)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"SelectedChild",{get:function(){return this._selectedItem},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"SelectedItem",{get:function(){return this._selectedItem&&this._selectedItem.getDataContext()},set:function(n){this.SelectedIndex=this.Source&&this.Source.IndexOf(n)},enumerable:!0,configurable:!0}),r.prototype.OnSelectedIndexChanged=function(n,t){var i=this._content.getChild(t),u=this._content.getChild(n),f=n;return u&&u.disapplyStyle(this.activateClass||"active"),i&&i.applyStyle(this.activateClass||"active"),this._selectedItem=i,n!==t?(this.set(r.DPSelectedItem,i&&i.getDataContext()),this.riseItemSelectedEvent(this.SelectedIndex,i,f,u),!0):void 0},r.prototype.riseItemSelectedEvent=function(n,t,i,r){this.OnItemSelected.Invoke("",[this,n,t,i,r]);var u=t&&t.View;u&&(u.scrollIntoViewIfNeeded?u.scrollIntoViewIfNeeded():u.scrollIntoView())},r.prototype.Select=function(n){this.SelectedIndex=this._content.IndexOf(n)},r.prototype.SelectItem=function(n){var t=this.Source;t&&(this.SelectedIndex=t.IndexOf(n))},r._getTemplate=function(n){switch(typeof n){case"string":return i.mvc.MvcDescriptor.Get(n);case"function":return i.mvc.MvcDescriptor.GetByType(n).Default;default:if(n instanceof i.mvc.ITemplate)return n;var t=i.mvc.MvcDescriptor.GetByType(n);return t?t.Default:undefined}},r._getTemplateShadow=function(n){if(n instanceof HTMLElement)return n;var t=r._getTemplate(n);return t==undefined?document.createElement("div"):t.Create()},r.ctor=function(){b=[this.prototype.OnAdd,this.prototype.OnRemove,this.prototype.OnReplace,this.prototype.OnClear,this.prototype.Reset,this.prototype.OnSet]},r.prototype.initTemplate=function(t,i){var f=this._view,e=$("[db-content]",f)[0]||f,s=$("[attach-SelectedItem]",f)[0],o;s&&this.AttachSelectedItem(s);i&&this.getSourceFromScop(e);this._content=new n.DivControl(e);o=f.getAttribute("item-style")||e.getAttribute("item-style");o&&(this.ItemStyle=o.split(" "));this.Template=u.ToTemplate(t||r.getTemplate(e)||this._content.View.getAttribute("item-template")||f.getAttribute("item-template"),!0);this._content.Parent=this},r.getFirstChild=function(n){for(var t=n.firstChild,i;t;){if(t instanceof Element)return t;!i&&t instanceof Node&&(i=t);t=t.nextSibling}return i},r.getTemplate=function(n){for(var t,e,f=n.children,u=0,o=f.length;u<o;u++)if(t=f[u],i.basic.polyfill.IsTemplate(t))return e=r.getFirstChild(t.content),t.remove(),e},r.prototype.getSourceFromScop=function(n){n.setAttribute("db-cmd",i.ScopicCommand.Register({Invoke:this.CmdExecuter,Owner:this}))},r.prototype.CmdExecuter=function(n,t,u){i.ScopicCommand.Delete(n);this._scop=u;this.Source=u.Value;this.RlSourceScop=new i.bind.TwoBind(i.bind.BindingMode.TwoWay,u,this,i.bind.Scop.DPValue,r.DPSource);this.Source=u.Value},r.prototype.AttachSelectedItem=function(n){n.setAttribute("db-cmd",i.ScopicCommand.Register({Invoke:this.CmdAttacheSelectedItemExecuter,Owner:this}))},r.prototype.CmdAttacheSelectedItemExecuter=function(n,t,u){i.ScopicCommand.Delete(n);this.OnPropertyChanged(r.DPSelectedIndex,function(){this.s.Value=this.t.SelectedItem},{t:this,s:u})},r.prototype.initialize=function(){var t=this,n=this.Source;this.Content.OnInitialized=function(){return t.Reset(n?new i.utils.ListEventArgs(null,null,null,i.collection.CollectionEvent.Reset,n.AsList()):undefined)}},r.prototype.OnSourceChanged=function(n){this.Template&&b[n.event].call(this,n)},r.prototype.ReSelect=function(){var t=this.get(r.DPSelectedIndex),n=this.swap(t);return(!this.AcceptNullValue&&n<0&&this.Source&&this.Source.Count>0&&(n=0),t!==n)?(this.SelectedIndex=n,!0):this.OnSelectedIndexChanged(t,n)},Object.defineProperty(r.prototype,"Scop",{get:function(){if(!this._scop){var n=t.prototype.getScop.call(this);return n?n:(this._scop=i.bind.NamedScop.Create(null,this.Source),this._scop.setParent(this),this._scop)}},enumerable:!0,configurable:!0}),r.prototype.BindTo=function(n){n&&(n.OnPropertyChanged(i.bind.Scop.DPValue,this.OnScopValueChanged,this),this.Source=n.Value)},r.prototype.OnScopValueChanged=function(n,t){this.Source=t._new},r.prototype.OnItemClicked=function(n,t,i){var r={sender:this,Event:t,index:this.Source.IndexOf(n.getDataContext()),template:n};(this.OnChildClicked.PInvok("",[r],this),r.Cancel)||i.Select(n)},r.prototype.getItemShadow=function(n){var t=this.garbage.pop(),i;return t||(i=this.Template,t=i==null?s.Create(n):i.CreateShadow(n,undefined)),t},r.prototype.disposeItemShadow=function(n,t,i){if(n instanceof Array&&i==NaN&&t==void 0)this.garbage.push.apply(this.garbage,this.CloneChildren());else return t?(this.garbage.push(t),t):void 0},r.prototype.disposeItemsShadow=function(){this.garbage.push.apply(this.garbage,this.CloneChildren())},r.prototype._insert=function(n,t){var o=this,i,r,u,f,e;this.count++;i=this.getItemShadow(n,t);r=i.getScop();r&&r.setParent(this.Scop);i.setDataContext(n);t?this.Insert(i,t):this.Add(i);t==undefined&&(t=this.Source.Count-1);u=i.__events;u!=undefined&&u.Dispose();i.__events=[i.addEventListener("click",this.OnItemClicked,this,this),i.addEventListener("contextmenu",this.OnItemClicked,this,this)];f=i.View.classList;this.ItemStyle&&f.add.apply(f,this.ItemStyle);this.OnItemInserted.Invok("",function(r){return r(o,t,n,i)});e=this.ReSelect();e||t!=this.SelectedIndex||this.riseItemSelectedEvent(t,i,t,this._content.getChild(t))},r.prototype._remove=function(n,t){var s=this,i=this.disposeItemShadow(n,this._content.getChild(t),t),h=t===this.SelectedIndex,r,u,f,e,o;for(this.count--,i.disapplyStyle(this.activateClass||"active"),this._content.RemoveAt(t,!1),r=0,u=i.__events;r<u.length;r++)f=u[r],f!=undefined&&f.Dispose();i.__events=undefined;e=i.View.classList;this.ItemStyle&&e.remove.apply(e,this.ItemStyle);this.OnItemRemoved.Invok("",function(r){return r(s,t,n,i)});o=this.ReSelect();o||t!=this.SelectedIndex||this.riseItemSelectedEvent(t,this._content.getChild(t),t,i)},r.prototype.OnAdd=function(n){this._insert(n.newItem,n.startIndex)},r.prototype.OnSet=function(n){var t=this._content.getChild(n.startIndex);t&&t.setDataContext(n.newItem)},r.prototype.OnClear=function(n){if(this.SelectedIndex=-1,this.disposeItemsShadow(n&&n.collection,this.CloneChildren()),n&&n.collection&&this.count>0)for(var t=n.collection.length-1;t>=0;t--)this._remove(n.collection[t],t);this.count=0},r.prototype.OnRemove=function(n){this._remove(n.oldItem,n.startIndex)},r.prototype.OnReplace=function(n){this._content.getChild(n.startIndex).setDataContext(n.newItem)},r.prototype.Reset=function(n){var f=this,e=this.SelectedIndex,r=this.Source,t,u;if(this.OnClear(n),r)for(t=0,u=r.Count;t<u;t++)this._insert(r.Get(t),t);i.thread.Dispatcher.call(this,function(n){f.SelectedIndex=n},e)},r.prototype.clearGarbage=function(){for(var n=0,t=this.garbage.length;n<t;n++)this.garbage[n].Dispose();this.garbage.length=0},r.prototype.Recycle=function(){this.Clear();this.clearGarbage();this.Reset()},r.prototype.Dispose=function(){var n=this.OnDispose();n!==null&&(this.Source.Unlisten=this.sli,this.sli=null,this.clearGarbage(),this._content.Dispose(),this._content=null,t.prototype.Dispose.call(this),n||(this.DisposingStat=2))},r.prototype.Add=function(n){return this._content.Add(n),this},r.prototype.AddRange=function(n){return this._content.AddRange(n),this},r.prototype.Remove=function(n){return this._content.Remove(n)},r.prototype.RemoveAt=function(n,t){return this._content.RemoveAt(n,t)},r.prototype.Clear=function(){var t=this.Source,n;if(t)for(n=this.Content.Count-1;n>=0;n--)this._remove(t.Get(n),n)},r.prototype.Insert=function(n,t){return this._content.Insert(n,t),this},r.prototype.CloneChildren=function(){return this._content.CloneChildren()},r.prototype.Check=function(n){return n instanceof s},r.prototype.OnKeyDown=function(t){if(t.keyCode==n.Keys.Down)this.SelectedIndex++;else if(t.keyCode==n.Keys.Up)this.SelectedIndex--;else if(t.keyCode==n.Keys.End)this.SelectedIndex=Number.MAX_VALUE;else if(t.keyCode==n.Keys.Home)this.SelectedIndex=-1;else return!1;return t.preventDefault(),t.stopPropagation(),!0},r.DPSource=i.bind.DObject.CreateField("Source",i.collection.List,null,function(n){var t=n.__this;n._old&&(n._old.Unlisten=n.__this.sli);n._new&&(n._new.Listen=n.__this.sli);t.IsInit&&t.Reset(n)},function(n){n.__this.IsInit&&n.__this.Clear()}),r.DPSelectedIndex=i.bind.DObject.CreateField("SelectedIndex",Number,-2,function(n){return n.__this.OnSelectedIndexChanged(n._old,n._new)},r.prototype.__checkSelectedIndex),r.DPItemStyle=i.bind.DObject.CreateField("ItemStyle",Array,undefined,function(n){var r=n.__this._content,u,f,i,e,t;if(r)for(u=n._new,f=n._old,i=0,e=r.Count;i<e;i++)t=r.getChild(i).View.classList,f&&t.remove.apply(t,f),u&&t.add.apply(t,u)}),r.DPTemplate=i.bind.DObject.CreateField("Template",Object,null,function(n){return n.__this.Recycle()},function(n){n._new&&typeof n._new.CreateShadow!="function"&&(n.IsValid=!1)}),r.DPSelectedItem=i.bind.DObject.CreateField("SelectedItem",Object),r}(a);n.ListAdapter=e;v=function(t){function i(){var n=t.call(this,document.createElement("div"))||this;return n.isStarted=!1,n}return __extends(i,t),i.prototype.initialize=function(){this.container=document.createElement("div");this.circle=document.createElement("div");this.message=document.createElement("p");this.message.textContent="Wait";this.applyStyle("full-fixedlayout");this.container.classList.add("spinner");this.circle.classList.add("spinner-circle");this.message.classList.add("spinner-message");this.container.appendChild(this.circle);this.container.appendChild(this.message);this._view.appendChild(this.container)},i.prototype.Start=function(t){var i=this;this.OnInitialized=function(n){return n.circle.classList.add("spinner-start")};this.Parent=n.Desktop.Current;this.OnInitialized=function(){i.Message=t||"Wait";document.body.appendChild(i.View)};this.isStarted=!0},i.prototype.Pause=function(){this.isStarted&&(this.Parent=null,this.circle.classList.remove("spinner-start"),document.body.removeChild(this.View));this.isStarted=!1},Object.defineProperty(i.prototype,"Message",{set:function(n){this.message.textContent=n},enumerable:!0,configurable:!0}),i.Default=new i(undefined),i}(n.JControl);n.Spinner=v,function(){var n=document.getElementById("spinner");n&&n.parentElement.removeChild(n);v.Default.Start("Loadding")}();rt=Date.now();l=function(t){function r(i,r,f){var e=t.call(this,document.createElement("div"))||this;return e.isOpen=!1,e._view.classList.add("full-fixedlayout1"),e._view.addEventListener("click",e),i&&(e.itemTemplate=u.ToTemplate(i,!1)),e.Parent=f===void 0?n.Desktop.Current:f,r&&(e.OnInitialized=function(n){return n.Data=r}),e}return __extends(r,t),r.prototype.handleEvent=function(){this.Close(!0)},r.prototype.initialize=function(){var t=this;this.menu=(new n.Div).applyStyle("contextmenu","panel");this.adapter=new e(document.createElement("div"),"menu.simple").applyStyle("panel-body","verticalList");this.adapter.ItemStyle=["focusable"];this.adapter.AcceptNullValue=!0;this.Add(this.menu.Add(this.adapter));this.menu.View.style.backgroundColor="#333";this.menu.View.style.color="white";this.adapter.OnItemSelected.On=function(n,i,r){i!=-1&&t.isOpen&&(t.Close(!0),t.i&&r&&t.i.Invoke.call(t.i.Owner,t,r.getDataContext()))};this.menu.addEventListener("mouseleave",function(n,t,i){i.Close(!1)},this);this.menu.addEventListener("mouseenter",function(n,t,i){clearTimeout(i.timeout)},this);this._view.style.zIndex="2000000"},r.prototype.toInt=function(n){return n===!1?0:n==null?-.5:-1},r.prototype.Open=function(n,t,i,r){var e=this,u,f;this.isOpen!=!0&&(this.adapter.SelectedIndex=-1,this.menu.disapplyStyle("chide"),u=this.menu.View,f=this.menu.View.style,n={x:n.x,y:n.y},this.adapter.SelectedIndex=-1,document.body.appendChild(this._view),this.i=t,this.isOpen=!0,this.adapter.OnInitialized=function(){return setTimeout(function(){var t=e.toInt(i)*u.clientWidth+n.x,s=e.toInt(r)*u.clientHeight+n.y;f.left=(t<0?0:t)+o;f.top=(s<0?0:s)+o},200)})},r.prototype.Close=function(n){var t=this;this.isOpen!=!1&&(n?(this.isOpen=null,this.menu.applyStyle("chide"),setTimeout(function(){t.isOpen=!1;t._view.remove()},500),this.adapter.SelectedIndex=-1):this.timeout=setTimeout(function(n){return n.Close(!0)},1500,this))},Object.defineProperty(r.prototype,"Data",{set:function(n){var t=this.adapter;t.Source?(t.Source.Clear(),t.Source.AddRange(n)):t.Source=new i.collection.List(Object,n)},enumerable:!0,configurable:!0}),r}(n.JControl);n.RichMenu=l;window.rm=l;window.rmt=function(){var i=new l;i.Parent=n.Desktop.Current;i.OnInitialized=function(n){n.Data=["File","Save","Close","Discart"];document.addEventListener("click",function(i){t=(t+1)%r.length;n.Open(i,{Owner:null,Invoke:function(){}},r[t],u[t]);i.stopPropagation();i.preventDefault()})};var r=[null,null,null,!0,!0,!0,!1,!1,!1],u=[null,!0,!1,null,!0,!1,null,!0,!1],t=0},function(n){n[n.Left=1]="Left";n[n.Top=2]="Top";n[n.Right=4]="Right";n[n.Bottom=8]="Bottom";n[n.HCenter=5]="HCenter";n[n.VCenter=10]="VCenter";n[n.Center=15]="Center";n[n.TopLeft=3]="TopLeft"}(t=n.Location||(n.Location={}));k=function(r){function u(u){var f=r.call(this,document.createElement("div"))||this;return f.dic=new i.collection.Dictionary(""),f.list=new n.ListAdapter("templates.contextmenu",undefined,f,!0),f.OnAction=new i.bind.EventListener("",!1),f.location=t.TopLeft,f.Items=new i.collection.List(Object,u),f}return __extends(u,r),u.__fields__=function(){return[this.DPTitle,this.DPItems]},Object.defineProperty(u,"NextZIndex",{get:function(){return++this.zIndex},enumerable:!0,configurable:!0}),u.prototype.initialize=function(){this.applyStyle("fit");this.list.OnItemSelected.Add(this.OnItemSelected.bind(this));this.list.OnItemInserted.Add(this.OnItemInserted.bind(this));this.list.OnItemRemoved.Add(this.OnItemRemoved.bind(this));this.list.applyStyle("shadow");this._view.addEventListener("mousedown",this);this.Add(this.list)},u.prototype.OnItemSelected=function(){},u.prototype.OnItemInserted=function(n,t,i,r){var u={p:this,cnt:r,data:i,handleEvent:function(n){this.p.Action(this.cnt,this.data,n)}};this.dic.Set(r,u);r.applyStyle("focusable");r.View.addEventListener("click",u)},u.prototype.OnItemRemoved=function(n,t,i,r){var u=this.dic.Get(r),f=r.View;f.removeEventListener("click",u);this.dic.Remove(r)},u.prototype.Action=function(n,t,i){i.stopPropagation();i.preventDefault();this.OnAction.PInvok("",[this,t]);this.Close()},u.prototype.ShowForTarget=function(){var t=this.target,i,r;(t=t instanceof HTMLElement?t:t instanceof n.JControl?t.View:null,t!=null)&&(i=t.offsetLeft+t.offsetWidth,r=t.offsetTop+t.offsetHeight,this.Show(i,r+7))},u.prototype.Show=function(t,r){var f=this,e;this.list.SelectedIndex=-1;e=this.list;this.disapplyStyle("hidden");this._view.style.zIndex=u.NextZIndex.toString();this.parent||(this.Parent=n.Desktop.Current);document.body.appendChild(this._view);this.OnInitialized=function(n){return i.thread.Dispatcher.call(n,function(){var s=f.list.View,n=f.HorizontalFraction*s.clientWidth+t,i=f.VerticalFraction*s.clientHeight+r,h=f.list.View.style,u=f.list.View,e={w:f.View.clientWidth,h:f.View.clientHeight};n=n<0?0:n;i=i<0?0:i;n=n+u.clientWidth>e.w?e.w-u.clientWidth:n;i=i+u.clientHeight>e.h?e.h-u.clientHeight:i;h.left=n+o;h.top=i+o})}},u.prototype.toInt=function(n){return n===!1?0:n==null?-.5:-1},Object.defineProperty(u.prototype,"HorizontalFraction",{get:function(){var n=this.location;return(n&t.HCenter)==t.HCenter?-.5:(n&t.Left)==t.Left?0:-1},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"VerticalFraction",{get:function(){var n=this.location;return(n&t.VCenter)==t.VCenter?-.5:(n&t.Top)==t.Top?0:-1},enumerable:!0,configurable:!0}),u.prototype.handleEvent=function(t){switch(t.type){case"mousedown":t.srcElement==this._view&&this.Close();return;case"contextmenu":this._OnContextMenu(this.target instanceof n.JControl?this.target:null,this.target instanceof HTMLElement?this.target:this.target.View,t);return}},u.prototype._OnContextMenu=function(n,t,i){this.Show(i.x,i.y);i.preventDefault();i.stopPropagation()},u.prototype.Close=function(){this.applyStyle("hidden");this._view.remove()},Object.defineProperty(u.prototype,"Target",{set:function(n){var t,i;(this.target&&(t=this.target instanceof HTMLElement?this.target:this.target.View,t.removeEventListener("contextmenu",this),this.target=null),n)&&(i=n instanceof HTMLElement?n:n.View,i.addEventListener("contextmenu",this),this.target=n)},enumerable:!0,configurable:!0}),u.DPTitle=i.bind.DObject.CreateField("Title",String,"Menu"),u.DPItems=i.bind.DObject.CreateField("Items",i.collection.List),u.zIndex=2e4,u}(n.JControl);n.ExContextMenu=k;d=function(t){function r(r){var u=t.call(this,document.createElement("div"))||this,f,e,o;if(u.dic=new i.collection.Dictionary(""),u.itemChangedDlg={Invoke:u.SourceChanged,Owner:u},u.OnItemSelected=function(n){this.OnMenuItemSelected.Invoke(this.OnItemSelected,[this,n])}.bind(u),u.OnMenuItemSelected=new i.bind.EventListener(u.OnItemSelected),r)for(f=0;f<r.length;f++)(e=r[f],e instanceof n.MenuItem)||(o=r[f]=new n.CItem(e,e,"#",null),o.Content.applyStyle("col-xs-12"));return u.Items=new i.collection.List(n.CItem,r),u}return __extends(r,t),r.prototype.initialize=function(){this.applyStyle("contextmenu");this.reset();this.Items.Listen=this.itemChangedDlg},r.prototype.SourceChanged=function(n){switch(n.event){case i.collection.CollectionEvent.Added:this.add(n.newItem);break;case i.collection.CollectionEvent.Replace:this.replace(n.oldItem,n.newItem);break;case i.collection.CollectionEvent.Removed:this.remove(n.oldItem);break;case i.collection.CollectionEvent.Cleared:this.clear();break;case i.collection.CollectionEvent.Reset:this.clear();this.reset()}},r.prototype.add=function(i){var r=new n.MenuItem(i).applyStyle("row");t.prototype.Add.call(this,r);this.dic.Set(i,r);i.OnItemSelected=this.OnItemSelected},r.prototype.remove=function(n){t.prototype.Remove.call(this,this.dic.Remove(n),!0)},r.prototype.replace=function(){throw"not implimented";},r.prototype.clear=function(){for(var i=this.dic,n=i.Count-1;n>=0;n--)t.prototype.Remove.call(this,this.dic.RemoveAt(n).Value,!0)},r.prototype.reset=function(){for(var i,n=0,t=this.Items.Count;n<t;n++)i=this.Items.Get(n),this.add(i)},r.prototype.Add=function(){throw"";},r.prototype.AddRange=function(){throw"";},r.prototype.Remove=function(){return!1},r.prototype.Show=function(t,i){this.disapplyStyle("hidden");var r=this._view.style;r.left=t+"px";r.top=i+"px";this._view.addEventListener("mouseout",this);this._view.addEventListener("mousein",this);this.parent||(this.Parent=n.Desktop.Current);document.body.appendChild(this._view)},r.prototype.handleEvent=function(n){switch(n.type){case"mousein":clearTimeout(this.thrid);break;case"contextmenu":this._OnContextMenu(this.target,this.target instanceof HTMLElement?this.target:this.target.View,n)}},r.prototype._OnContextMenu=function(n,t,i){this.Show(i.x,i.y);i.preventDefault();i.stopPropagation()},r.prototype.timeout=function(n){n.applyStyle("hidden");n._view.remove()},Object.defineProperty(r.prototype,"Target",{set:function(n){var t,i;(this.target&&(t=this.target instanceof HTMLElement?this.target:this.target.View,t.removeEventListener("contextmenu",this),this.target=null),n)&&(i=n instanceof HTMLElement?n:n.View,i.addEventListener("contextmenu",this),this.target=n)},enumerable:!0,configurable:!0}),r}(n.JControl);n.ContextMenu=d;g=function(){function n(){}return n.prototype.initialize=function(){},n.deg2str=function(n,t){return t*2*Math.PI*n/360},n.createDashArray=function(n,t){for(var r="",u=2*Math.PI*n/360,i=0;i<t.length;i++)r+=(i!==0?",":"")+u*t[i]+"px"},n}();n.Gage=g;y=function(n){function t(t,i){var r=n.call(this,t)||this;return r.data=i,r.setDataContext(r.data),r}return __extends(t,n),t.prototype.setDataContext=function(n){this.data=n;this._view.textContent=this._view.label=n?n.toString():""},t.prototype.getDataContext=function(){return this.data},t.prototype.initialize=function(){this.setDataContext(this.data)},t.prototype.getScop=function(){return this.data instanceof i.bind.Scop?this.data:null},t}(s);n.CostumizedShadow=y;p=function(n){function t(){return n.call(this)||this}return __extends(t,n),t.prototype.CreateShadow=function(n){return new y(document.createElement("option"),n)},t}(u);n.CostumizedTemplate=p;nt=function(n){function t(t,i){var r=n.call(this,t||document.createElement("select"),new p)||this;return r.Source=i,r}return __extends(t,n),t}(e);n.ComboBox=nt;tt=function(n){function t(t,i){var r=n.call(this,document.createElement("select"))||this;return r.tree=t,r.getString=i,r}return __extends(t,n),t.prototype.initialize=function(){this.Reset()},t.prototype.Reset=function(){var i=this.tree,t,n;for(i.Reset(),t=i.getBases(),n=0;n<t.length;n++)this.add(this._view,t[n]);this._view.innerHTML=this._view.innerHTML},t.prototype.add=function(n,t){var r,i,u;if(t.children.length===0){i=document.createElement("option");i.label=this.getString(t.Value);i.textContent=i.label;t.param=i;n.appendChild(i);return}for(r=document.createElement("optgroup"),r.label=this.getString(t.Value),i=document.createElement("option"),i.label=this.getString(t.Value),i.textContent=i.label,t.param=[r,i],u=0;u<t.children.length;u++)this.add(r,t.children[u]);n.appendChild(r)},t}(n.JControl);n.TreeComboBox=tt,function(n){function i(n,i,r){for(var u,e,o,f=0;f<i.length;f++)u=i[f],typeof u.Header=="string"&&(u.Header={Content:u.Header}),e=t(u.Header,"th"),r&&u.Header&&u.Header.OrderBy&&(o={handleEvent:function(){this.method.Invoke.apply(this.method.Owner,[this.method.Owner,this.col.Header.OrderBy,this.col,this.view])},method:r,col:clone(u),view:e},e.addEventListener("click",o)),n.appendChild(e);return n}function r(n,i){var u,r;for(i=i||document.createElement("tr"),u=0;u<n.length;u++)r=n[u],typeof r.Header=="string"&&(r.Header={Content:r.Header}),i.appendChild(t(r.Cell,"td"));return i}function t(n,t){var r=HTMLTableCellElement,i;return n.Content==null&&(n.Content=""),n.Content instanceof r?i=n.Content:n.Content instanceof Node?(i=document.createElement(t),i.appendChild(n.Content)):(i=document.createElement(t),n.ContentAsHtml?i.innerHTML=String(n.Content):i.innerText=String(n.Content)),n.Attributes&&u(i,n.Attributes),i}function u(n,t){var i,f,r,u;for(i in t)f=!1,r=t[i],typeof r=="object"?n.hasAttribute(i)?(u=r.values.slice(),u.unshift(n.getAttribute(i)),n.setAttribute(i,u.join(r.spliter))):n.setAttribute(i,r.values.join(r.spliter)):n.setAttribute(i,r)}n.createHeader=i;n.createTemplate=r;n.generateCell=t}(ut=n.help||(n.help={}));it=function(){function t(){n.Grid}return t}();n._Grid=it}(e=t.UI||(t.UI={})),function(n){var t=function(n){function t(t){var i=n.call(this,document.createElement("div"))||this;return i.target=t,i}return __extends(t,n),t.prototype.initialize=function(){},t.prototype.Close=function(){this.applyStyle("ihide")},t.prototype.Open=function(n){var t,i;this._isOpen||(this._isOpen=!1,t=this._view,t.classList.remove("ihide"),i=n.View.getBoundingClientRect(),t.style.left=i.left+"px",t.style.top=i.top+i.height+"px",t.style.width=i.width+"px",n.Box.Text=(n.Value||"").toString(),n.IsChanged=!1)},t}(n.JControl)}(e=t.UI||(t.UI={})),function(n){function ot(){t.SelectedIndex--;var n=t.SelectedChild;n&&n.View.scrollIntoView(!1)}function st(){t.SelectedIndex++;var n=t.SelectedChild;n&&n.View.scrollIntoView(!1)}function ht(){t.SelectedIndex-=4;var n=t.SelectedChild;n&&n.View.scrollIntoView(!1)}function ct(){t.SelectedIndex+=4;var n=t.SelectedChild;n&&n.View.scrollIntoView(!1)}function lt(){c.next()}function at(){c.previouse()}function g(n){if(!o)return nt(n);n.shiftKey&&(u.Value=null,e(!0))}function vt(){if(!o)return f=!1,e(!0)}function yt(){f=!1;e(!1)}function p(n){return n===8?!1:n<32||n>126&&n<160}function nt(n){if(!p(n.keyCode)){var t=d,f=Date.now();h||(setTimeout(function(){i.helper.TryCatch(s,function(n){this.Filter.Patent=new n.list.StringPatent(u.Box.Text||"")},null,[r.filters]);h=!1;c.update()},200),h=!0)}}function pt(){var i=document.createElement("ul");i.classList.add("popup","ihide");t=new n.ListAdapter(i,y);t.OnInitialized=function(n){return n.Source=c.List};t.Parent=n.Desktop.Current;document.body.appendChild(t.View)}function v(t){clearTimeout(l);n.Desktop.Current.GetKeyControl(null,it,[t]);u!==t&&wt(t)}function wt(t){t.IsChanged=!1;u=t;s.Source=t.DataSource;i.thread.Dispatcher.call(null,function(){s.Filter.Patent=new r.filters.list.StringPatent(t.Box.Text)});rt&&rt.Dispose();b&&b.Dispose();d=Date.now();h=!1;n.Desktop.Current.GetKeyControl(null,it,[t]);b=u.Box.addEventListener("focusout",bt,null)}function w(n){var r=t.View,i=n.View.getBoundingClientRect();r.style.left=i.left+"px";r.style.top=i.top+i.height+"px";r.style.width=i.width+"px"}function bt(){clearTimeout(l);l=setTimeout(kt,500,!1);f=!1}function kt(t){n.Desktop.Current.ReleaseKeyControl();e(t)}function it(t,i){w(i);var r=t.keyCode;return o?r===9||r===13?i.View.hasAttribute("handleClose")?n.KeyboardControllerResult.Handled:n.KeyboardControllerResult.Release||n.KeyboardControllerResult.ByPass:r===27?(i.View.blur(),n.KeyboardControllerResult.Release):r===n.Keys.Delete?g(t):p(r)?n.KeyboardControllerResult.Handled:dt(i,!0):r==9?(f=!1,e(!1),n.KeyboardControllerResult.Release):(tt[t.keyCode]||nt)(t,i)||n.KeyboardControllerResult.Handled}function dt(i,r){if(v(i),i.AutoPopup||r){o=!1;t.Template=i.Template||y;try{t.SelectedIndex=0}catch(f){}var u=t.View;u.classList.remove("ihide");w(i)}return n.KeyboardControllerResult.Handled}function e(i){if(f){f=!1;return}return o=!0,t.applyStyle("ihide"),i==!0&&(u.Value=t.SelectedItem),u.Box.Text=i?(u.Value||"").toString():u.Value!=null?u.Value.toString():"",u.View.hasAttribute("handleClose")?n.KeyboardControllerResult.Handled:n.KeyboardControllerResult.ByPass}var ni=function(){function t(){}return t.prototype.IsOpen=function(n){console.log("popup "+(n?"open":"close"));this._isopen=n},t.prototype.invoke=function(t){if(0){var r=t.e,i=r.keyCode;if(!this._isopen){if(i===9||i===13)return t.Result=n.KeyboardControllerResult.Release||n.KeyboardControllerResult.ByPass;if(i===27)return this.box.Blur(),n.KeyboardControllerResult.Release;if(i===n.Keys.Delete)g(r);else return p(i)?n.KeyboardControllerResult.Handled:this.Open(t)}}document.title=document.title!=="A"?"A":"B"},t.prototype.onResume=function(){return console.log("Resume"),!0},t.prototype.onPause=function(){return console.log("Pause"),!0},t.prototype.onStop=function(){return console.log("Stop"),!0},t.prototype.FocuseOn=function(t){this.box=t;n.Desktop.Current.KeyboardManager.GetController(this)},t.prototype.Blur=function(){n.Desktop.Current.KeyboardManager.Release(this)},t.prototype.del=function(n){n.shiftKey&&(u.Value=null,e(!0))},t.prototype.Close=function(){},t.prototype.Open=function(){},t}(),t,s,et=new r.filters.list.LStringFilter,k=document.createElement("li"),y,f,d,h,a,c,tt,o,l,rt,b,u,gt,ut,ft;k.innerHTML='<div db-job="tostring"><\/div>';y=n.Template.ToTemplate(k,!0);h=!1;a=Date.now();s=new i.collection.ExList(null);s.Filter=et;c=r.filters.list.indexdFilter(s,15);pt();t.OnItemSelected.On=function(n,t){t!=-1&&(f=!0,i.thread.Dispatcher.call(u.Box.View,u.Box.View.focus))};t.Content.addEventListener("click",function(){(f=!0,a-(a=Date.now())<-500)||(a=0,u.Value=t.SelectedItem||u.Value,f=!1,e(!1))},t);t.Content.View.addEventListener("pointerenter",function(){return clearTimeout(l)});t.Content.View.onmouseleave=function(n){f||(l=setTimeout(e,500,n));f=!1};tt={40:st,38:ot,37:ht,39:ct,13:vt,27:yt,33:at,34:lt};o=!0;gt=1e5;ut=function(n){function t(t){var r=n.call(this,t)||this;return r.dataSource=new i.collection.List(Object),t.setAttribute("autocomplete","off"),r}return __extends(t,n),Object.defineProperty(t.prototype,"DataSource",{get:function(){return this.dataSource},set:function(n){n!==this.dataSource&&(this.IsChanged,this.dataSource.Clear(),n&&this.dataSource.AddRange(n.AsList()))},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){var t=this;n.prototype.initialize.call(this);this.Box.View.addEventListener("focusin",function(){return v(t)})},t.prototype.Blur=function(){},t}(n.ActionText);n.AutoCompleteBox=ut;ft=function(){function n(n,t){this.Box=n;this.callback=[];n.View.setAttribute("autocomplete","off");this.DataSource=t}return n.prototype.Blur=function(){this.Box.Blur()},n.prototype.OnValueChanged=function(n,t){this.callback.push({Invoke:t,Owner:n})},Object.defineProperty(n.prototype,"View",{get:function(){return this.Box.View},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Value",{get:function(){return this._value},set:function(n){var u=this._value,t,i,r;if(n!=u)for(this._value=n,this.Box.Text=n?n.toString():"",t=0,i=this.callback;t<i.length;t++)r=i[t],r.Invoke.call(r.Owner,this,u,n)},enumerable:!0,configurable:!0}),n.prototype.initialize=function(){var n=this;return this.Box.View.addEventListener("focusin",function(){return v(n)}),this},n}();n.ProxyAutoCompleteBox=ft}(e=t.UI||(t.UI={})),function(n){var t=function(t){function u(n,f,e){var o=t.call(this,f||document.createElement("div"))||this,s;return o.countPerPage=n,o.full=e,o.paginationFilter=new r.filters.list.SubListFilter,o.paginationFilter.Patent=new r.filters.list.SubListPatent(0,o.countPerPage-1),e&&(s=new i.collection.ExList(Object),s.Filter=o.paginationFilter,o.set(u.DPOutput,s)),o}return __extends(u,t),Object.defineProperty(u.prototype,"Filter",{get:function(){return this.paginationFilter},enumerable:!0,configurable:!0}),u.prototype.initialize=function(){this.applyStyle("paginator");t.prototype.Add.call(this,this.content=(new n.Div).applyStyle("fitHeight"));t.prototype.Add.call(this,this.paginator=new n.BiPagination);this.paginator.OnPropertyChanged(n.BiPagination.DPIndex,this.whenIndexChanged,this);this.paginationFilter.Patent=new r.filters.list.SubListPatent(0,this.countPerPage-1)},Object.defineProperty(u.prototype,"Content",{set:function(n){this._cnt&&this.content.Remove(this._cnt,!0);this._cnt=n;n&&this.content.Add(n)},enumerable:!0,configurable:!0}),u.prototype.whenIndexChanged=function(n,t){this.paginationFilter.Patent=new r.filters.list.SubListPatent(t._new*this.countPerPage,(t._new+1)*this.countPerPage-1)},u.prototype.OnIndexChanged=function(t){return this.paginator.OnPropertyChanged(n.BiPagination.DPIndex,t,this)},u.prototype.OffIndexChanged=function(t){return this.paginator.removeEvent(n.BiPagination.DPIndex,t)},Object.defineProperty(u.prototype,"Max",{get:function(){return this.paginator.Max},set:function(n){this.paginator.Max=n},enumerable:!0,configurable:!0}),u.prototype.BindMaxToSourceCount=function(n){this.bm2sc=n.OnPropertyChanged(i.collection.ExList.DPCount,function(n,t){this.paginator.Max=Math.floor(t._new/this.countPerPage)},this);this.paginator.Max=Math.floor(n.Count/this.countPerPage)},u.prototype.UnbindMaxFromSourceCount=function(n){this.bm2sc&&n.removeEvent(i.collection.List.DPCount,this.bm2sc)},u.prototype.Next=function(){this.paginator.Index++},u.prototype.Previous=function(){this.paginator.Index--},u.prototype.OnKeyCombined=function(n,t){var i=this.Content;if(i)return i.OnKeyCombined(n,t)},u.prototype.OnKeyDown=function(i){var r=this._cnt;if(r&&r.OnKeyDown(i))return!0;switch(i.keyCode){case n.Keys.Left:return this.Previous(),!0;case n.Keys.Right:return this.Next(),!0}return t.prototype.OnKeyDown.call(this,i)},Object.defineProperty(u.prototype,"Output",{get:function(){return this.get(u.DPOutput)},enumerable:!0,configurable:!0}),u.prototype.OnInputChanged=function(n){n._old&&this.bindInputToMax&&n._old.removeEvent(i.collection.List.DPCount,this.bindInputToMax);this.bindInputToMax=null;this.Output.Source=n._new;n._new&&(this.bindInputToMax=n._new.OnPropertyChanged(i.collection.ExList.DPCount,function(n,t){this.paginator.Max=Math.floor(t._new/this.countPerPage)},this),this.paginator.Max=Math.floor(n._new.Count/this.countPerPage))},Object.defineProperty(u.prototype,"InputScop",{set:function(n){var t=this;this.bindInputToMax&&(this.bindScopToInput.Owner.removeEvent(i.bind.Scop.DPValue,this.bindScopToInput),this.bindScopToInput=null);this.bindScopToInput=n.OnPropertyChanged(i.bind.Scop.DPValue,function(n,i){t.Input=i._new},n);this.Input=n.Value},enumerable:!0,configurable:!0}),u.__fields__=function(){return[this.DPInput,this.DPOutput]},u.createPaginator=function(t,i,r){r===void 0&&(r=10);var u=new n.Paginator(r,undefined,!0);return u.OnInitialized=function(n){t.OnInitialized=function(t){n.Input=i;t.Source=n.Output};u.Content=t},u.OnPropertyChanged(this.DPOutput,function(n,i){t.Source=i._new}),u},u.DPInput=i.bind.DObject.CreateField("Input",i.collection.List,null,u.prototype.OnInputChanged),u.DPOutput=i.bind.DObject.CreateField("Output",i.collection.ExList),u}(n.JControl);n.Paginator=t}(e=t.UI||(t.UI={})),function(n){var t=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.initialize=function(){this._view.classList.add("grid")},t.prototype.createRule=function(){var n=document.styleSheets.item(document.styleSheets.length-1)},t}(n.JControl);n.Grid=t}(e=t.UI||(t.UI={})),function(n){function u(n){i.basic.Settings.set("show-sp-tooltips",n);n?document.body.classList.add("sp-show"):document.body.classList.remove("sp-show")}var f=function(n){function t(t){var i=n.call(this)||this;return i.Title=t,i}return __extends(t,n),t.__fields__=function(){return[this.DPTitle,this.DPIcon]},t.DPTitle=i.bind.DObject.CreateField("Title",String,null),t.DPIcon=i.bind.DObject.CreateField("Icon",String,null),t}(i.bind.DObject),t,r;n.StrechyButtonItemData=f;t=function(n){function t(t){var i=n.call(this,"controls.StretchyButton","controls.StretchyButtonItem")||this;return i.__data=t,i}return __extends(t,n),t.prototype.initialize=function(){this.triggerButton=$(".cd-nav-trigger",this._view)[0];this.triggerButton.addEventListener("click",this);this.Source=this.__data},t.RegisterEvents=function(n){this.EventCloseIsRegistered!=n&&(n?document.addEventListener("click",this.handleEvent):document.removeEventListener("click",this.handleEvent),this.EventCloseIsRegistered=n)},t.CloseAll=function(n){for(var r,i=0;i<t.OpenedStrechyButtons.length;i++)r=t.OpenedStrechyButtons[i],r.simpleClose();t.OpenedStrechyButtons=[];this.RegisterEvents(n)},t.prototype.Open=function(){t.CloseAll(!0);t.OpenedStrechyButtons=[this];this.simpleOpen()},t.prototype.Close=function(){t.CloseAll(!1)},t.prototype.simpleClose=function(){this.IsOpen=!1;this._view.classList.remove("nav-is-visible");this._view.classList.add("cd-stretchy-nav-collapsed")},t.prototype.simpleOpen=function(){this.IsOpen=!0;this._view.classList.add("nav-is-visible");this._view.classList.remove("cd-stretchy-nav-collapsed")},t.handleEvent=function(n){var i=n.target,r=i.classList;r.contains("cd-nav-trigger")||r.contains("cd-nav-trigger")||i.tagName==="SPAN"||t.CloseAll(!1)},t.prototype.handleEvent=function(n){n.preventDefault();this.IsOpen?this.Close():this.Open()},t.OpenedStrechyButtons=[],t}(n.ListAdapter);n.StrechyButton=t;r=function(n){function t(t){var i=n.call(this,t)||this;return i.inputEl=t.querySelector("form > input.sb-search-input"),i}return __extends(t,n),t.prototype.initialize=function(){var t=this,n=function(n){return t.validate(n)};this._view.addEventListener("click",n);this._view.addEventListener("touchstart",n);this.inputEl.addEventListener("click",function(n){n.stopPropagation()});this.inputEl.addEventListener("touchstart",function(n){n.stopPropagation()});this.inputEl.addEventListener("keydown",this)},t.prototype.handleEvent=function(n){n.keyCode==13?this.validate(n):n.keyCode==27&&(this.inputEl.value==""?this.close():(this.inputEl.value="",n.stopImmediatePropagation(),n.preventDefault()))},t.prototype.validate=function(n){n.stopPropagation();this.inputEl.value=this.inputEl.value.trim();this._view.classList.contains("sb-search-open")?/^\s*$/.test(this.inputEl.value)?(n.preventDefault(),this.close()):this.OnSearch&&this.OnSearch(this.inputEl.value):(n.preventDefault(),this.open())},t.prototype.open=function(){var t=this,n;this.applyStyle("sb-search-open");this.IsOpen=!0;this.inputEl.focus&&this.inputEl.focus();n=function(){t.close();this.removeEventListener("click",n);this.removeEventListener("touchstart",n)};document.addEventListener("click",n);document.addEventListener("touchstart",n)},t.prototype.close=function(){this.inputEl.blur();this.disapplyStyle("sb-search-open");this.IsOpen=!1},t}(n.JControl);n.UISearch=r;n.showSPTooltips=u;u(i.basic.Settings.get("show-sp-tooltips"))}(e=t.UI||(t.UI={})),function(n){var t;(function(t){function c(n,t,i,r,u){var f=document.createElement(n),e;f.classList.add("btn","btn-"+r,"glyphicon","glyphicon-"+t);f.textContent="  "+i;for(e in u)f.setAttribute(e,u[e]);return f}var u,r,f,e,o,s;t.CreateGlyph=c;u=function(){function n(){}return n}();t.ModalEditorEventArgs=u;r=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.scop=new i.bind.ValueScop(null,3),t}return __extends(t,n),t.__fields__=function(){return[this.DPIsEditable]},Object.defineProperty(t.prototype,"Data",{get:function(){return this.scop.Value},set:function(n){this.scop.Value=n},enumerable:!0,configurable:!0}),t.prototype.OnKeyDown=function(t){return this.Content&&this.Content.OnKeyDown(t)||n.prototype.OnKeyDown.call(this,t)},t.DPIsEditable=i.bind.DObject.CreateField("IsEditable",Boolean,!0),t}(n.Modal);t.BasicModalEditor=r;f=function(t){function r(n,i){var r=t.call(this)||this;return r.templateName=n,r.allowEditNullVaue=i,r}return __extends(r,t),r.prototype.initialize=function(){t.prototype.initialize.call(this);this.Content=new n.TControl(this.templateName,this.scop)},r.prototype.edit=function(i,r,u,f){if(f===void 0&&(f=!0),i||this.allowEditNullVaue){if(this.IsOpen||this._isOpen)throw new h("The editor is Open. Close it first .");this._isOpen=!0;this.IsNew=r;i!==undefined&&(this.scop.Value=i);this.backupData=i&&i.CreateBackup();this.action=u;this.IsEditable=f;t.prototype.Open.call(this);this.SetVisible(n.MessageResult.ok,f)}},r.prototype.Open=function(){this.edit(this.scop.Value,this.IsNew,this.action)},r.prototype.Close=function(t){var u=new n.MessageEventArgs(this,t,n.MessageResult[t]),r=this.scop.Value,f={Data:r,BackupData:this.backupData,E:u,Editor:this,IsDataChanged:r&&r.IsPropertiesChanged(this.backupData),IsNew:this.IsNew,Error:i.basic.DataStat.None},e;i.reflection.Invoke(this.action,this,[this,f]);r&&this.backupData&&!f.CommitOrBackupHandled&&(u.msg=="ok"&&this.IsEditable?r.Commit(f.BackupData):r.Rollback(f.BackupData));e=this.OnClosed.PInvok("test",[u],this);u.stayOpen||this.silentClose()},r.prototype.NativeClose=function(t,i){var u=new n.MessageEventArgs(this,t,n.MessageResult[t]),r=this.scop.Value;r&&(this.backupData&&i?r.Commit(this.backupData):r.Rollback(this.backupData));this.OnClosed.PInvok("test",[u],this);u.stayOpen||this.silentClose()},r.prototype.silentClose=function(){this._isOpen=!1;t.prototype.silentClose.call(this)},r}(r);t.EModalEditer=f;e=function(t){function i(n){var i=t.call(this)||this;return i.templateName=n,i}return __extends(i,t),i.prototype.initialize=function(){var i=this;t.prototype.initialize.call(this);this.Content=new n.TControl(this.templateName,this.scop);this.OnClosed.On=function(n){var t=i.scop.Value,r=!1;if(n.msg==="ok"&&i.IsEditable===!0&&(i.ChangedStatControled||t.IsPropertiesChanged(i.backupData))){i.Action.OnSuccess&&(r=i.Action.OnSuccess.Invoke.call(i.Action.OnSuccess.Owner,t,i.IsNew,n));r||t.Commit(i.backupData);i.IsNew=!1;return}i.Action.OnError&&(r=i.Action.OnError.Invoke.call(i.Action.OnError.Owner,t,i.IsNew,n));r||t.Rollback(i.backupData)}},i.prototype.edit=function(i,r,u,f){(f===void 0&&(f=!0),i)&&(this.IsNew=r,i!==undefined&&(this.scop.Value=i),this.backupData=i.CreateBackup(),this.Action=u||o,this.IsEditable=f,t.prototype.Open.call(this),this.SetVisible(n.MessageResult.ok,f))},i.prototype.Open=function(){this.edit(this.scop.Value,this.IsNew,this.Action)},i}(r);t.ModalEditer=e;o={};s=function(){function n(n,t){this.proxyAction=n;this.callback=t;this.OnSuccess={Owner:this,Invoke:this.onSuccess};this.OnError={Owner:this,Invoke:this.onError}}return n.prototype.invoke=function(n,t,i){return n&&n.Invoke?n.Invoke.call(n.Owner,t,i,this.callback):undefined},n.prototype.onSuccess=function(n,t){return this.invoke(this.proxyAction.OnSuccess,n,t)},n.prototype.onError=function(n,t){return this.invoke(this.proxyAction.OnError,n,t)},n.prototype.Clone=function(t){return new n(this.proxyAction,t)},n.Create=function(t,i,r,u){if(!i&&!r)return undefined;var f={};return i&&(f.OnSuccess={Owner:t,Invoke:i}),r&&(f.OnError={Owner:t,Invoke:r}),new n(f,u)},n}();t.EditorAction=s})(t=n.Modals||(n.Modals={}))}(e=t.UI||(t.UI={})),function(n){var t;(function(t){var u=function(t){function u(n,i,r,u,f,e){var o=t.call(this)||this;return o.source=n,o.tableTmplate=i,o.itemTemplate=r,o.datas=u,o.asScopic=f,o.isMatch=e,o}return __extends(u,t),u.IsMatch=function(n,t){return n.Check(t)},Object.defineProperty(u.prototype,"IsMatch",{get:function(){return this.isMatch},set:function(n){if(this._exList){var t=this._exList.Filter;if(t._isMatch===n)return;t._isMatch=n;this._exList.Reset()}this.isMatch=n},enumerable:!0,configurable:!0}),u.prototype.initialize=function(){var h=this,f,c,o;t.prototype.initialize.call(this);f=this.Datacontext=new n.ListAdapter(this.tableTmplate,this.itemTemplate,this.datas,this.asScopic);f.AcceptNullValue=!0;this.isMatch&&this.createFilter();var l=(new n.Div).applyStyle("row"),s=(new n.Div).applyStyle("row"),e=new n.ActionText;e.AutoAction=n.SearchActionMode.Instantany;o=(new n.Div).applyStyle("col-md-12","col-xs-12","col-sm-12");e.View.style.maxWidth="none";e.View.style.width="100%";o.View.style.padding="0";o.Add(e);l.Add(o);this.asScopic?s.Add(f):(this._exList=i.collection.ExList.New(this.source,new r.filters.list.BoundStringFilter),this.paginator=c=u.createPaginator(f,this._exList),s.Add(c));this.Add(l);this.Add(s);e.OnAction.On=function(n,t,i){h._exList.Filter.Patent=new r.filters.list.StringPatent(i)};f.OnItemSelected.On=function(n,t,i){return h.SelectedItem=i&&i.getDataContext()}},u.createPaginator=function(t,i){var r=new n.Paginator(12,undefined,!0);return i=i||t.Source,r.OnInitialized=function(n){t.OnInitialized=function(){return t.Source=n.Output};r.Content=t;r.Input=i},r},Object.defineProperty(u.prototype,"SelectedItem",{get:function(){return this.Datacontext&&this.Datacontext.SelectedItem},set:function(n){this.Datacontext&&this.Datacontext.SelectItem(n)},enumerable:!0,configurable:!0}),u.prototype.show=function(n,i){var r=this;i&&(this.OnInitialized=function(){return r._exList.Source=i});this.onc=n;t.prototype.Open.call(this)},Object.defineProperty(u.prototype,"Source",{set:function(n){this.OnInitialized=function(t){return t._exList.Source=n}},enumerable:!0,configurable:!0}),u.prototype.Open=function(){},u.prototype.OnKeyCombined=function(n,t){return this.paginator.OnKeyCombined(n,t)},u.prototype.OnKeyDown=function(n){if(!this.paginator.OnKeyDown(n))return t.prototype.OnKeyDown.call(this,n)},u.prototype.Close=function(n){var i=this.onc,r=this.SelectedItem;this.onc=null;t.prototype.Close.call(this,n);try{this.Datacontext.SelectedIndex=-1}catch(u){}i&&i.call(this,this,r,n)},u.prototype.createFilter=function(){var t=this,u=this.Datacontext.Content.View,n;this._exList=new i.collection.ExList(Object);this._exList.Filter=new i.utils.CostumeFilter(this.IsMatch);n=i.basic.New()+"";u.setAttribute("db-filter",n);i.bind.RegisterFilter({Name:n,BindingMode:1,CreateNew:function(n){return new r.filters.scopic.ListFilter(n,1,null,t._exList)}})},u}(n.Modal);t.ModalList=u})(t=n.Modals||(n.Modals={}))}(e=t.UI||(t.UI={})),function(n){var u=function(t){function r(n,r,u){var f=t.call(this,n,r)||this;return f.Items=new i.collection.List(Object,u),f}return __extends(r,t),r.__fields__=function(){return[this.DPItems,this.DPSelectedItem,this.DPTabContent,this.DPTabNav]},r.prototype.initialize=function(){var r=this;t.prototype.initialize.call(this);this.TabNav=new n.ListAdapter("tabcontrol.navTabsItem",undefined);this.TabContent=(new n.ContentControl).applyStyle("tab-content");this.TabNav.AcceptNullValue=!1;t.prototype.Add.call(this,this.TabNav);t.prototype.Add.call(this,this.TabContent);this.TabNav.OnItemSelected.On=function(n,t,i,u,f){return r.onSelectedTabChanged(t,u,i,f)};this.TabNav.OnInitialized=function(n){n.Source=r.Items;i.thread.Dispatcher.call(r,function(){this.SelectedIndex=0})}},r.prototype.OnBringIntoFront=function(){this.TabNav.SelectedIndex=0},r.prototype.onSelectedTabChanged=function(n){var t=this.Items.Get(n);t?(this.TabContent.Content=t.Content,t.OnSelected&&t.OnSelected(this,t)):this.TabContent.Content=null;this.SelectedItem=t},r.prototype.Reslect=function(){var n=this.TabNav.SelectedItem;n?(this.TabContent.Content=n.Content,n.OnSelected&&n.OnSelected(this,n)):this.TabContent.Content=null;this.SelectedItem=n},r.prototype.OnKeyCombined=function(n,t){var i=this.SelectedItem;if(i)return i.Content&&i.Content.OnKeyCombined(n,t)},r.prototype.OnKeyDown=function(t){var i=this.SelectedItem,r;if(t.ctrlKey){r=t.shiftKey?1:-1;switch(t.keyCode){case n.Keys.Left:return this.TabNav.SelectedIndex+=r,!0;case n.Keys.Right:return this.TabNav.SelectedIndex-=r,!0}}if(i&&i.Content)return i.Content.OnKeyDown(t)},r.prototype.CloseTab=function(n,t){var i=t.controller.MainControll.getDataContext();i&&this.Items.Remove(i)},r.DPItems=i.bind.DObject.CreateField("Items",i.collection.List),r.DPTabNav=i.bind.DObject.CreateField("TabNav",n.ListAdapter),r.DPTabContent=i.bind.DObject.CreateField("TabContent",n.ContentControl),r.DPSelectedItem=i.bind.DObject.CreateField("SelectedItem",Object,null,function(n){n.__this.TabNav.SelectedIndex=n.__this.Items.IndexOf(n._new)}),r}(n.NavPanel),t,r;n.TabControl=u;t=function(t){function r(n,r,u,f,e){var o=t.call(this,n,r)||this;return o.content=f,o.onSelectedItemChanged=e,o.OnTabSelected=new i.bind.EventListener(0),o.OnTabClosed=new i.bind.EventListener(0),o.Items=u,o}return __extends(r,t),r.__fields__=function(){return[this.DPItems,this.DPSelectedItem,this.DPTabContent,this.DPTabNav]},r.prototype.initialize=function(){var r=this;t.prototype.initialize.call(this);this.TabNav=new n.ListAdapter("unitabcontrol.navTabsItem",undefined);this.TabContent=(new n.ContentControl).applyStyle("tab-content");this.TabNav.AcceptNullValue=!1;t.prototype.Add.call(this,this.TabNav);t.prototype.Add.call(this,this.TabContent);this.TabNav.OnItemSelected.On=function(n,t,i,u,f){return r.onSelectedTabChanged(t,u,i,f)};this.TabNav.OnInitialized=function(n){n.Source=r.Items;n.SelectedIndex=0};this.TabContent.Content=this.content;this.Items.Listen=function(n){if(n.event==i.collection.CollectionEvent.Removed){var t={Sender:r,Cancel:!1,Stat:"closed",Target:n.newItem};r.OnTabClosed.PInvok(0,[t])}}},r.prototype.onSelectedTabChanged=function(n){var t=this.Items.Get(n);t&&this.content?(this.content.Visible=!0,this.TabContent.Content=this.content,t.Title=this.onSelectedItemChanged(this,this.content,t),t.OnSelected&&t.OnSelected(this,t)):this.TabContent.Content=null;this.SelectedItem=t},r.prototype.OnKeyCombined=function(t,i){var r=this.SelectedItem;return r=r.Content,r instanceof n.JControl?r.OnKeyCombined(t,i):void 0},r.prototype.OnKeyDown=function(t){var r=this.SelectedItem,i;if(t.ctrlKey){i=t.shiftKey?1:-1;switch(t.keyCode){case n.Keys.Left:return this.TabNav.SelectedIndex+=i,!0;case n.Keys.Right:return this.TabNav.SelectedIndex-=i,!0}}if(this.content)return this.content.OnKeyDown(t)},r.prototype.CloseTab=function(n,t){var i=t.controller.MainControll.getDataContext(),r;if(i){if(r={Sender:this,Cancel:!1,Stat:"closing",Target:i},this.OnTabClosed.PInvok(0,[r]),r.Cancel)return;this.Items.Remove(i);i.Dispose&&i.Dispose(!0)}},r.prototype.GetLeftBar=function(){if(this.content.GetLeftBar)return this.content.GetLeftBar()},r.prototype.GetRightBar=function(){if(this.content.GetRightBar)return this.content.GetRightBar()},r.prototype.OnPrint=function(){if(this.content.OnPrint)return this.content.OnPrint();t.prototype.OnPrint.call(this)},r.prototype.Update=function(){if(this.content.Update)return this.content.Update();t.prototype.Update.call(this)},r.prototype.OnSearche=function(n,t){if(this.content.OnSearche)return this.content.OnSearche(n,t)},r.prototype.OnDeepSearch=function(){if(this.content.OnDeepSearch)return this.content.OnDeepSearch()},Object.defineProperty(r.prototype,"HasSearch",{get:function(){var n=this.content.HasSearch;if(n!=undefined)return n},enumerable:!0,configurable:!0}),r.DPItems=i.bind.DObject.CreateField("Items",i.collection.List),r.DPTabNav=i.bind.DObject.CreateField("TabNav",n.ListAdapter),r.DPTabContent=i.bind.DObject.CreateField("TabContent",n.ContentControl),r.DPSelectedItem=i.bind.DObject.CreateField("SelectedItem",Object,null,function(n){n.__this.TabNav.SelectedIndex=n.__this.Items.IndexOf(n._new)}),r}(n.NavPanel);n.UniTabControl=t;r=function(n){function t(t,i){var r=n.call(this)||this;return r.Title=t,r.Content=i,r}return __extends(t,n),t.__fields__=function(){return[this.DPContent,this.DPTitle]},t.DPTitle=i.bind.DObject.CreateField("Title",String),t.DPContent=i.bind.DObject.CreateField("Content",Object),t}(i.bind.DObject);n.TabControlItem=r}(e=t.UI||(t.UI={})),function(t){function s(n){if(n.dom.hasAttribute("as-pager"))return n.dom.removeAttribute("as-pager"),h(n);var t=new e.ListAdapter(n.dom,undefined,n.parentScop);return t.BindTo(n.currentScop),n.Result=t,t}function h(n){var t=n.dom,f,r,u,h,s,o;return t.hasAttribute("as-pager")&&t.removeAttribute("as-pager"),t.setAttribute("compiled",""),f=t.getAttribute("count-per-page"),f=f?parseInt(f)||24:24,r=new e.Paginator(f,t,!0),r.Parent=n.parentControl||e.Desktop.Current,r.InputScop=n.currentScop,u=$("[db-content]",t)[0],u&&u!==t&&(t.removeAttribute("db-content"),h=i.bind.Scop.Create("Output",r,i.bind.BindingMode.TwoWay,n.controller),u.hasAttribute("db-foreach")||u.setAttribute("db-foreach",""),s=n.controller.CompileChild(u,h,r),o=s.Control,o||(o=new e.Dom(s.dom||u)),r.Content=o),r}function c(){}function l(n,t,u){i.thread.Dispatcher.InIdle()&&i.thread.Dispatcher.call(null,c);r.push({A:n,B:t,C:u})}function o(){for(var n,i=r.splice(0),t=0;t<i.length;t++)n=i[t],n.C?n.A.classList.remove.apply(n.A.classList,n.B):n.A.classList.add.apply(n.A.classList,n.B);r.length!==0&&o()}function a(t,i){for(var e,r=0,f=["../assets/style/bundle.css"];r<f.length;r++)e=f[r],n("style|"+e,t,i,u.context)}var r=[];i.ScopicControl.register("foreach",s);i.ScopicControl.register("pager",h);i.ScopicControl.register("adapter",s);t.RegisterLayout=l;i.thread.Dispatcher.OnIdle(null,o);ValidateImport(f);t.loadCss=a}(s||(s={}));t.LoadDefaultCSS=function(n,t){s.loadCss(n,t)};e.JControl});define("sys/QModel",["require","exports","sys/System","sys/Corelib"],function(n,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u;(function(n){var t,u,f;(function(n){n[n.Info=0]="Info";n[n.Error=1]="Error";n[n.Command=2]="Command";n[n.Confirm=3]="Confirm"})(t=n.MessageType||(n.MessageType={}));u=function(){function n(){}return n}();n.CallBackMessage=u;f=function(n){function i(t,i){var u=n.call(this,t||r.basic.New())||this;return u.Content=i,u}return __extends(i,n),i.__fields__=function(){return[i.DPContent,i.DPTitle,i.DPOkText,i.DPCancelText,this.DPAbortText,i.DPAction,i.DPType,i.DPData]},i.getById=function(n){return i.pstore.Get(n)},i.prototype.getStore=function(){return i.pstore},i.DPData=r.bind.DObject.CreateField("Data",Object),i.DPContent=r.bind.DObject.CreateField("Content",String,"",null,null,r.bind.PropertyAttribute.NonSerializable),i.DPTitle=r.bind.DObject.CreateField("Title",String,"",null,null,r.bind.PropertyAttribute.NonSerializable),i.DPOkText=r.bind.DObject.CreateField("OKText",String,undefined,null,null,r.bind.PropertyAttribute.NonSerializable),i.DPType=r.bind.DObject.CreateField("Type",Number,t.Info,null,null,r.bind.PropertyAttribute.NonSerializable),i.DPAction=r.bind.DObject.CreateField("Action",String,undefined),i.DPCancelText=r.bind.DObject.CreateField("CancelText",String,undefined,null,null,r.bind.PropertyAttribute.NonSerializable),i.DPAbortText=r.bind.DObject.CreateField("AbortText",String),i.pstore=new r.collection.Dictionary("Messages",!0),i}(i.sdata.QShopRow);n.Message=f})(u=t.models||(t.models={}))});define("sys/Corelib",["require","exports","context","plugin|template","plugin|json","sys/Syntaxer"],function(n,t,i,r,u,f){"use strict";function l(n,t,i,r){return o.TryCatch(Object,Object.defineProperty,r,[n,t,i])||!1}function ei(n){return yt.$$(n)}function dt(n,t){l(n.prototype,t.Name,{get:function(){return this.get(t)},set:function(n){this.set(t,n)},configurable:!1,enumerable:!1})}var ct,ii,k,ri,ui,fi,o,g,yt,h,oi,at,it,e,c,et,s,pt,rt,si,hi,ci,a,wt,bt,li,ut,ai,nt,ot,kt,ft,pi,wi,st,bi,ki,ht,gt;Object.defineProperty(t,"__esModule",{value:!0});r&&r.addEventListener(ModuleStat.Executed,function(n){return pt.Initializer.Register(n)},null);u&&u.addEventListener(ModuleStat.Executed,function(n){var r=a.SerializationContext.GlobalContext.reset(),t=n.exports.value,u=t.__type__,f=t.__name__,e=r.FromJson(t,i.context.GetType(u)||Object,new a.Path(n,"data"))},null);ct="DOMNodeInsertedIntoDocument",function(n){n&&n.prototype&&n.prototype.childElementCount==null&&Object.defineProperty(n.prototype,"childElementCount",{get:function(){for(var i=0,n=0,t,r=this.childNodes;t=r[i++];)t.nodeType===1&&n++;return n}})}(window.Node||window.Element);var tt,ni=9223372036854775807,d={},v=!1,w=-1,y=[],b=[],p=0,lt=!1,ti;(function(n){n.Message=null;n.Math=n.Math;var t=function(){function n(){}return n}();n.RichMenu=t})(ti=t.Common||(t.Common={})),function(n){function t(){}n.RichMenu=t}(ii=t.TemplateTypes||(t.TemplateTypes={})),function(n){n._c=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];n._cnts=[7,11,15,19,32];n.names_scop_fromIn=!1}(k||(k={})),function(n){function t(){}function i(n){var t,i;if(typeof n!="string")return n;for(t=0;t<n.length;t++)i=n.charCodeAt(t),i>64&&i<91?(n=n.substring(0,t)+"-"+String.fromCharCode(i+32)+n.substring(t+1),t++):i===36?n=n.substring(0,t)+"-"+n.substring(++t):i===95&&(n=n.substring(0,t)+"--"+n.substring(++t));return n}function r(n){var t,i,r;if(typeof n!="string")return n;for(t=0;t<n.length;t++){if(i=n.charCodeAt(t),i>=65&&i<=90)throw"InvalidCssName";if(r=n.charCodeAt(t+1),i===45)if(r>=97&&r<=122)n=n.substring(0,t)+String.fromCharCode(r-32)+n.substring(t+2);else{if(n.charCodeAt(t+1)===45){n=n.substring(0,t)+"_"+n.substring(t+2);continue}else n=n.substring(0,t)+"$"+n.substring(t+1);t+=1}}return n}function u(){var n=new XMLHttpRequest;n.open("POST","/css-to-less.php");n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");n.setRequestHeader("Access-Control-Allow-Origin","true");n.setRequestHeader("X-Requested-With","XMLHttpRequest");n.send(encodeURIComponent("data")+"="+encodeURIComponent("body{display:none}"));n.onload=function(){stop()}}n.getVar=t;n.toValidCssName=i;n.toValidEnumName=r;n.Css2Less=u;var f;(function(n){function f(n){return i(n),n.start=performance.now(),n.cursor=0,n.onstart&&n.onstart(n),n.thread=setInterval(function(){var r=performance.now(),i,t;for(n.cursor=(r-n.start)/n.timespan,n.cursor>=1&&(clearInterval(n.thread),n.cursor=1),t=0;t<n.props.length;t++)n.props[t].animate(n);if(n.cursor==1)for(n.oncomplete&&n.oncomplete(n),t=0;t<n.props.length;t++)(i=n.props[t]).oncomplete&&i.oncomplete(n)},n.interval),n}function e(n){var e=performance.now(),f,u,i;for(r(n),n.thread=setInterval(function(){var o=n.animations,s=performance.now(),i=(s-e)/n.timespan,u,r,f;for(i>=1&&(clearInterval(n.thread),i=1),i=1-(1-i)*(1-i),u=0;u<o.length;u++)for(r=o[u],r.cursor=i,f=0;f<r.props.length;f++)r.props[f].animate(r);i==1&&t(o)},n.interval),f=n.animations,u=0;u<f.length;u++)i=f[u],i.start=e,i.cursor=0,i.onstart&&i.onstart(i);return n}function i(n){if(n.thread)return clearInterval(n.thread),t([n]),n}function r(n){if(n.thread)return clearInterval(n.thread),t(n.animations),n}function t(n){for(var t,u,r,i=0;i<n.length;i++)for(t=n[i],t.thread=0,t.oncomplete&&t.oncomplete(t),r=0;r<t.props.length;r++)(u=t.props[r]).oncomplete&&u.oncomplete(t)}function u(n,t){for(var r,u={},i=0,f=t;i<f.length;i++)r=f[i],u[r]=n.style[r];return u}function o(n,t,i,r,u){return r===void 0&&(r=""),u===void 0&&(u="px"),{name:n,def:i-t,from:t,fnl:r,suffx:u||"px",animate:function(n){n.dom.style[this.name]=this.from+this.def*n.cursor+u},oncomplete:function(n){n.dom.style[this.name]=this.fnl}}}n.animate=f;n.animates=e;n.stopAnimation=i;n.stopAnimations=r;n.trigger=o;var s;(function(n){n.hideOpacity={name:"opacity",animate:function(n){n.dom.style.opacity=String(1-n.cursor)},oncomplete:function(n){n.dom.style[this.name]=""}};n.showOpacity={name:"opacity",animate:function(n){n.dom.style.opacity=String(n.cursor)}}})(s=n.constats||(n.constats={}))})(f=n.animation||(n.animation={}))}(ri=t.css||(t.css={})),function(n){function t(n,t){var i=n+"",r=i.indexOf("."),s=i.indexOf("e"),u,f,c,h,o;if(r===-1&&(r=i.length),u=0,s!==-1){if(r>s)return i;if(u=parseFloat(i.substring(s+1)),u<t-1)return"0";i=i.substring(0,s)}if(f=i.length,u!==0&&r+u>1){var a=i.substr(0,r),l=i.substring(r+1),e=f-r<=u?f-r:u;e--;u-=e;r+=e;e>0&&(i=a+l.substr(0,e),c=l.substring(e),c.length>0&&(i+=c),r=i.indexOf("."));r===-1&&(r=i.length);f=i.length}if(h=t==0?r:r+t+1,o=h-f,o>0&&(h=f),i=i.substr(0,h),o>0)for(r==f&&(i+=".",o--);o>0;o--)i+="0";return u!==0?i+"e"+u:i}function i(n,t){var i=n+"",r=i.indexOf("."),e=i.indexOf("e"),u,o,h,c,s;if(r===-1&&(r=e===-1?i.length:e),u=0,e!==-1)if(r<=e){if(u=parseFloat(i.substring(e+1)),u<t-1)return"0";i=i.substring(0,e)}else u=parseFloat(i.substring(e+1)),i=i.substring(0,e);if(o=i.length,u!==0&&r+u>1){var a=i.substr(0,r),l=i.substring(r+1),f=o-r<=u?o-r:u;f=Math.abs(f+f===0?0:f<0?1:-1);u-=f;r+=f;f>0&&(i=a+l.substr(0,f),h=l.substring(f),h.length>0&&(i+=h),r=i.indexOf("."));r===-1&&(r=i.length);o=i.length}if(c=t==0?r:r+t+1,s=t-(i.length-r),s>0&&(c=o),i=i.substr(0,c),s>0)for(r==o&&(i+=".",s--);s>=0;s--)i+="0";return u!==0?i+"e"+u:i}n.round1=t;n.round=i}(ui=t.math||(t.math={})),function(n){function t(n,t){var i=n==8||n==9||n==13||n==27,r=n==19||n==20||n==45||n==46||n==144||n==145||n>32&&n<41||n>111&&n<124;return!i&&!(t==0&&r)}n.IsPrintable=t}(fi=t.string||(t.string={})),function(n){function t(n,t,i,r){try{if(t)return t.apply(n,r);var u=new Error("Undefined Try Block")}catch(f){u=f}return i&&i.apply(n,(r=r.slice(),r.unshift(u),r))}n.TryCatch=t}(o=t.helper||(t.helper={})),function(n){function ct(n){return n||(n=document.location.origin),n.endsWith("/")&&(n=n.substr(0,n.length-1)),n}function lt(n,i){t=n;r=i}function at(){if(t==null||t>=r){var n=Date.now()*1e5+Math.floor(Math.random()*775823);return n<ni?n:Date.now()/1|Math.random()*771}return t>=r-300&&h.update(),t++}function vt(n){for(var t=document.activeElement;t;){if(t==n)return!0;t=t.parentElement}return!1}function yt(n){return u.bound=n,u.focuseNext(!0)}function pt(n){return u.bound=n,u.focusOn()}function wt(n){try{if(n.focus(),document.activeElement==n)return n.select&&n.select(),n}catch(t){}}function b(n){for(var t;n&&!(t=n.nextElementSibling);)n=n.parentElement;return t}function a(n,t){var r,i;if(!n||t.indexOf(n)!=-1)return!1;if(t.push(n),n===document.activeElement){if(n=b(n),!n)return!0;t.push(n)}return n instanceof HTMLInputElement&&wt(n)?n:n instanceof HTMLElement&&(r=a(n.firstElementChild,t))?r:(i=b(n),i)?a(i,t):!0}function bt(n){return a(n||document.activeElement,[])}function kt(n,t){var r;if(typeof n=="string")r=y[n]||t||i.context.GetEnum(n);else throw"the Path Inspecified";if(!(r instanceof s.List&&r.IsFrozen())){if(r==null)return undefined;if(r.constructor!==Object)throw"Error Parsing Enum";y[n]=r=new s.List(v,dt(r));r.Freeze()}return r}function dt(t){var r=[];for(var i in t)isNaN(parseFloat(i))&&r.push(new n.EnumValue(i,t[i]));return r}function gt(n,t,i){return w.Compile(n,t,i)}var ot,st,ht,t,r,h,c,u,d,g,tt,it,v,y,rt,ut,p,e,w,ft,ti,et;(function(n){function i(n){return t[n]}function r(n,i){t[n]=i;i=o.TryCatch(JSON,JSON.stringify,void 0,[i]);localStorage.setItem(n,i)}var t={};n.get=i;n.set=r,function(){for(var i,n=0;n<localStorage.length;n++)i=localStorage.key(n),t[i]=o.TryCatch(JSON,JSON.parse,void 0,[localStorage.getItem(i)])}()})(ot=n.Settings||(n.Settings={})),function(n){n[n.Fail=0]="Fail";n[n.Success=1]="Success";n[n.OperationCanceled=2]="OperationCanceled";n[n.UnknownStat=3]="UnknownStat";n[n.DataCheckError=4]="DataCheckError";n[n.DataWasChanged=16]="DataWasChanged";n[n.None=5]="None"}(st=n.DataStat||(n.DataStat={})),function(n){function t(t){return n.supportTemplate?t instanceof HTMLTemplateElement:t instanceof HTMLUnknownElement&&t.tagName==="TEMPLATE"}n.supportTemplate="content"in document.createElement("template");n.IsTemplate=t;n.supportTemplate||l(HTMLUnknownElement.prototype,"content",{get:function(){return this.tagName==="TEMPLATE"?this:undefined}})}(ht=n.polyfill||(n.polyfill={}));n.host=ct(null);n.Crypto={Decrypt:function(n){return n},Encrypt:function(n){return n},SEncrypt:function(n){return n},SDecrypt:function(n){return n}};t=null;r=null;n.setGuidRange=lt;n.New=at;h=function(){function n(n){this.vars=n}return Object.defineProperty(n,"current",{get:function(){return t},enumerable:!0,configurable:!0}),Object.defineProperty(n,"isValid",{get:function(){return t!==0&&t<r},enumerable:!0,configurable:!0}),Object.defineProperty(n,"Next",{get:function(){return++t},enumerable:!0,configurable:!0}),n.New=function(n,i){t!==0&&t<r?n(++t,i):this.update(n,i)},n.update=function(i,r){this.t==null&&(this.t=new nt.WebRequest(null),this.t.Download({Url:"/~Guid",HasBody:!1,Method:nt.WebRequestMethod.Get},i),this.t.OnComplete.On=function(){n.t.Dispose();n.t=null;i&&i(++t,r)})},n}();n.GuidManager=h;n.isFocused=vt;c=function(){function n(n,t){this.bound=n;this.andButton=t}return n.prototype.focuse=function(n,t){return this[t?"focusePrev":"focuseNext"](n)},n.prototype._focuseOn=function(n){try{if(n.focus(),document.activeElement==n)return n.select&&n.select(),n}catch(t){}},n.prototype.getNext=function(n){for(var t;n&&!(t=n.nextElementSibling);)if(this.bound.contains(n))n=n.parentElement;else return null;return t},n.prototype._focuseNext=function(n,t){var r,i;if(!n||t.indexOf(n)!==-1)return!1;if(t.push(n),n===document.activeElement){if(n=this.getNext(n),!n)return!0;t.push(n)}return n.tabIndex>=0&&typeof n.focus=="function"&&(this.andButton||n.constructor!==HTMLButtonElement)&&this._focuseOn(n)?n:n instanceof HTMLElement&&(r=this._focuseNext(n.firstElementChild,t))?r:(i=this.getNext(n),i)?this._focuseNext(i,t):!0},n.prototype.getPrev=function(n){for(var t;n&&!(t=n.previousElementSibling);)if(this.bound.contains(n))n=n.parentElement;else return null;return t},n.prototype._focusePrev=function(n,t){var r,i;if(!n||t.indexOf(n)!==-1)return!1;if(t.push(n),n===document.activeElement){if(n=this.getPrev(n),!n)return!0;t.push(n)}return n.tabIndex>=0&&typeof n.focus=="function"&&this._focuseOn(n)?n:n instanceof HTMLElement&&(r=this._focusePrev(n.lastElementChild,t))?r:(i=this.getPrev(n),i)?this._focusePrev(i,t):!0},n.prototype.focusePrev=function(n){if(this.bound.contains(document.activeElement))var t=this._focusePrev(document.activeElement,[]);else t=!0;return n&&t==!0?this._focusePrev(this.bound,[]):t},n.prototype.focuseNext=function(n){if(this.bound.contains(document.activeElement))var t=this._focuseNext(document.activeElement,[]);else t=!0;return n&&t==!0?this._focuseNext(this.bound,[]):t},n.prototype.reFocuseOn=function(){return this._focuseNext(this.bound,[])},n.prototype.focusOn=function(){if(!this.bound.contains(document.activeElement))return this._focuseNext(this.bound,[])},n}();n.focuser=c;u=new c(null,!1);n.focuseOn=yt;n._focuseOn=pt;n.focuseNext=bt;d=function(){function n(n,t,i,r){this.Owner=n;this.Invoke=t;this._dispose=i;this.objectStat=r}return n.prototype.handleEvent=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.Invoke.apply(this.Owner,t)},n.prototype.Dispose=function(){this._dispose(this);this.Owner=null;this._dispose=null;this.Invoke=null},n}();n.Delegate=d;g=function(){function n(){this._onchanged=[];Object.freeze(this);Object.preventExtensions(this)}return Object.defineProperty(n.prototype,"Left",{get:function(){return this._x},set:function(n){this._x=n;this.OnChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Top",{get:function(){return this._y},set:function(n){this._y=n;this.OnChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Width",{get:function(){return this._w},set:function(n){this._w=n;this.OnChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Height",{get:function(){return this._h},set:function(n){this._h=n;this.OnChanged()},enumerable:!0,configurable:!0}),n.prototype.OnChanged=function(){for(var t,n=0;n<this._onchanged.length;n++)t=this._onchanged[n],t(this)},n.prototype.Set=function(n,t,i,r){this._x=n;this._y=t;this._w=i;this._h=r;this.OnChanged()},n}();n.Rectangle=g;tt=function(){function n(t){n.parse(t)}return Object.defineProperty(n.prototype,"Data",{get:function(){return n.Id},enumerable:!0,configurable:!0}),n.parse=function(t){var u,i,r;if(t!=null)for(u=n.Id,i=0,i=0;i<16;i++){if(r=t.substr(2*i,2),r==="")break;u[i]=parseInt(r,16)}},n.Id=new Array(16),n}();n.SessionId=tt;it=function(){function n(n){this._id=n.toUpperCase()}return Object.defineProperty(n.prototype,"Id",{get:function(){return this._id},enumerable:!0,configurable:!0}),n.prototype.Equals=function(t){return t instanceof n?this._id==t._id:!1},n.prototype.toString=function(){return this._id.toString()},n.FromNumber=function(t){for(var o=k._c,s=k._cnts,f=0,i="",r=0,e,u;r<32;)t!==0?(e=t/16,u=Math.floor(t%16),t=Math.floor(e)):u=Math.floor(Math.random()*16),i+=o[u],r==s[f]&&(i+="-",f++),r++;return new n(i)},Object.defineProperty(n,"New",{get:function(){return n.FromNumber(Date.now())},enumerable:!0,configurable:!0}),n.Empty=new n("00000000-0000-0000-0000-000000000000"),n}();n.iGuid=it;v=function(){function n(n,t){this.Name=n;this.Value=t;Object.freeze(this)}return n.prototype.toString=function(){return this.Name},n.GetValue=function(n,t){var r=n.AsList(),i;if(typeof t=="number"){for(i=0;i<r.length;i++)if(r[i].Value===t)return r[i]}else for(i=0;i<r.length;i++)if(r[i].Name===t)return r[i];return undefined},n}();n.EnumValue=v;y={};n.getEnum=kt;rt=/@([a-zA-Z][a-zA-Z\d\.]*)/mgi;n.CompileString=gt;ut=function(){function n(){this.script=[];this.OnFnSuccess=this.OnFnSuccess.bind(this)}return n.prototype.toRegString=function(n){for(var t,r="",i=0;i<n.length;i++)t=n[i],r+=t==='"'||t==="'"?"\\"+t:t;return r},n.prototype.generateFn=function(t,i){for(var u,f,o,s=new Array(t.length),h=!1,r=0;r<t.length;r++)u=t[r],typeof u=="string"?s[r]='"'+this.toRegString(u)+'"':(h=!0,s[r]=u.Code);return f=s.join(" + "),i||(f="return "+f),o=e.getExpression(f,n.params,this.OnFnSuccess,this,!0),this.script.push(o),o.IsString=!h,o},n.prototype._push=function(n){var t=!0;return n[0]==="="&&(t=!1,n=n.substr(1)),this.generateFn(f.Parser.StringTemplate.Compile(n),t)},n.prototype.push=function(n){var i,t;if(typeof n=="string")return this._push(n);for(i=new Array(n.length),t=0;t<n.length;t++)i[t]=this._push(n[t]);return i},n.prototype.Compile=function(){for(var t=new Array(this.script.length),n=0;n<t.length;n++)t[n]=this.script[n].code;p.Compile(t.join("\r\n"),this._onload,this._onerror,this)},n.prototype.reset=function(){this.script.length=0},n.prototype._onload=function(n){n.onload&&n.onload(n)},n.prototype._onerror=function(n){n.onerror&&n.onerror(n)},n.prototype.OnFnSuccess=function(n,t){o.TryCatch(this,this.onFnLoad,void 0,[n,t])},n.prototype.remove=function(n){var t=this.script.indexOf(n);t!==-1&&this.script.splice(t,1)},n.params=["$ovalue","$value","$scope","$dom","$job","$fn"],n}();n.CodeCompiler=ut;p=function(){function n(){}return n.Compile=function(n,t,i,r){var f=new Blob([n],{type:"text/javascript"}),u=document.createElement("script");u.src=URL.createObjectURL(f,{oneTimeOnly:!0});u.addEventListener("load",function(){"msClose"in f&&f.msClose();document.head.removeChild(u);t&&t(r)});u.addEventListener("error",function(){"msClose"in f&&f.msClose();document.head.removeChild(u);i&&i(r)});document.head.appendChild(u)},n.CompileExpression=function(n,t,i,r,u){var s=e.getExpression(n,t,i,r,u),o=new Blob([s.code],{type:"text/javascript"}),h=URL.createObjectURL(o,{oneTimeOnly:!0}),f=document.createElement("script");f.src=h;f.addEventListener("load",function(){"msClose"in o&&o.msClose();document.head.removeChild(f)});document.head.appendChild(f)},n}();n.EvalCode=p,function(n){function r(n){t[n.name]&&console.error("Duplicated ExprFn Occurred {}");t[n.name]=n}function u(n,i){var r=t[n];delete t[n];r.evalCode=i;r.callback&&r.callback(i,r)}function f(n,t,u,f,e){var o="$$__exprFn__"+i++,h=t.join(","),c="window.defineExpression('"+o+"', function ("+h+") { "+(e?"":" return ")+n+"; });",s={name:o,callback:u,stat:f,code:c};return r(s),s}var t={},i=0;n.getExpression=f;l(window,"defineExpression",{get:function(){return u},set:function(){},configurable:!1,enumerable:!1})}(e||(e={}));w=function(){function n(n,t,i){this.indexer=n;this.getString=t;this.params=i;this.onDataChanged=this.onDataChanged.bind(this)}return n.generateIndexer=function(n,t){for(var u,i,f=[],r=0,e=0;e<t.length;e++)u=t[e],i=u.Index-r,i>0&&f.push(n.substr(r,i)),f.push(u),r=u.Index+u.Name.length+1;return i=n.length-r,i>0&&f.push(n.substr(r,i)),f},n.Compile=function(t,i,r){for(var u,f=[];u=rt.exec(t);)f.push({Name:u[1],Index:u.index});return new n(this.generateIndexer(t,f),i,r)},n.prototype.apply=function(n){for(var t,i=this.indexer.slice(),r=0;r<i.length;r++)t=i[r],typeof t!="string"&&(i[r]=this.getString?this.getString(t.Name,n[t.Name]):String(n[t.Name]));return String.prototype.concat.apply("",i)},n.prototype.bind=function(n){var t=this.data;t&&t.removeListener(this.onDataChanged);n&&n.addListener(this.onDataChanged);this.data=n;return this.onDataChanged(null)},n.prototype.onDataChanged=function(){for(var i,n=this.indexer.slice(),t=0;t<n.length;t++)i=n[t],typeof i!="string"&&(n[t]=this.data[i.Name]||"");return this.Value=String.prototype.concat.apply("",n)},n}();n.StringCompile=w;ft=function(){function n(){this.index=-1;this.stats=[]}return n.prototype.Push=function(n){this.stats.splice(this.index+1,0,n)},n.prototype.goBack=function(){var n=this.Current;n.Back();this.Index--;n=this.Current;n&&n.Go()},n.prototype.goForward=function(){var n=this.Current;n&&n.Forward();this.Index++;n=this.Current;n&&n.Go()},Object.defineProperty(n.prototype,"Current",{get:function(){return this.stats[this.index]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Index",{get:function(){return this.index},set:function(n){this.index=n<0?-1:n>=this.stats.length?this.stats.length-1:n},enumerable:!0,configurable:!0}),n}();n.History=ft,function(n){var i,t;(function(n){function i(i,r,u){n.supported?t.dispatch(u)&&n.pushState(i,r,u):n.fallback&&(window.location.hash="#"+u)}function r(){var i=!n.initial.popped&&location.href==n.initial.URL;(n.initial.popped=!0,i)||t.dispatch(document.location.pathname)}function u(i){if(n.supported=!!(window.history&&window.history.pushState),n.fallback=i,n.supported)n.initial.popped="state"in window.history,n.initial.URL=location.href,window.onpopstate=n.popState;else if(n.fallback){for(var r in t.routes.defined)r.charAt(0)!="#"&&(t.routes.defined["#"+r]=t.routes.defined[r],t.routes.defined["#"+r].path="#"+r);t.listen()}}n.supported=!!(window.history&&window.history.pushState);n.initial={popped:null,URL:null};n.pushState=i;n.popState=r;n.listen=u})(i=n.history||(n.history={})),function(n){function t(t){return n.routes.defined.hasOwnProperty(t)?n.routes.defined[t]:new n.core.route(t)}function i(t){n.routes.root=t}function r(t){n.routes.rescue=t}function u(t,i){var h={},u=null,s,f,r,o,e;for(u in n.routes.defined)if(u!==null&&u!==undefined)for(u=n.routes.defined[u],s=u.partition(),o=0;o<s.length;o++){if(f=s[o],e=t,f.search(/:/)>0)for(r=0;r<f.split("/").length;r++)r<e.split("/").length&&f.split("/")[r].charAt(0)===":"&&(h[f.split("/")[r].replace(/:/,"")]=e.split("/")[r],e=e.replace(e.split("/")[r],f.split("/")[r]));if(f===e)return i&&(u.params=h),u}return null}function f(t){var i,r;if(n.routes.current!==t){if(n.routes.previous=n.routes.current,n.routes.current=t,r=n.match(t,!0),n.routes.previous&&(i=n.match(n.routes.previous),i!==null&&i.do_exit!==null&&i.do_exit()),r!==null)return r.run(),!0;n.routes.rescue!==null&&n.routes.rescue()}}function e(){var t=function(){n.dispatch(location.hash)},i;location.hash===""&&n.routes.root!==null&&(location.hash=n.routes.root);"onhashchange"in window&&(!document.documentMode||document.documentMode>=8)?(i=Object.getOwnPropertyDescriptor(window,"onhashchange"),l(window,"onhashchange",{set:function(){i.set.call(this,t)},get:function(){return t},configurable:!1,enumerable:!1}),i=Object.getOwnPropertyDescriptor(window,"onpopstate"),l(window,"onpopstate",{set:function(){i.set.call(this,t)},get:function(){return t},configurable:!1,enumerable:!1})):setInterval(t,50);location.hash!==""&&n.dispatch(location.hash)}n.map=t;n.root=i;n.rescue=r;n.match=u;n.dispatch=f;n.listen=e;var o;(function(t){var i=function(){function t(t){this.path=t;this.action=null;this.do_enter=[];this.do_exit=null;this.params={};n.routes.defined[t]=this}return t.prototype.to=function(n){return this.action=n,this},t.prototype.enter=function(n){return n instanceof Array?this.do_enter=this.do_enter.concat(n):this.do_enter.push(n),this},t.prototype.exit=function(n){return this.do_exit=n,this},t.prototype.partition=function(){for(var i=[],n=[],u=/\(([^}]+?)\)/g,r,t;r=u.exec(this.path);)i.push(r[1]);for(n.push(this.path.split("(")[0]),t=0;t<i.length;t++)n.push(n[n.length-1]+i[t]);return n},t.prototype.run=function(){var i=!1,t,r;if(n.routes.defined[this.path].hasOwnProperty("do_enter")&&n.routes.defined[this.path].do_enter.length>0)for(t=0;t<n.routes.defined[this.path].do_enter.length;t++)if(r=n.routes.defined[this.path].do_enter[t].apply(this,null),r===!1){i=!0;break}i||n.routes.defined[this.path].action()},t}();t.route=i})(o=n.core||(n.core={}));n.routes={current:null,root:null,rescue:null,previous:null,defined:{}}}(t=n.Path||(n.Path={}))}(ti=n.Routing||(n.Routing={}));et=function(){function n(n){n&&this.init(n)}return n.prototype.getEName=function(n){if(this.IsFolder)return"";var n=this.ext?this.ext:this.moduleType>=0?ModuleExt[this.moduleType]||n:n,t=this.moduleName;return n&&(t+="."+n),this.params&&(t+="?"+this.params),t},n.prototype.toString=function(){var n="";return this.IsExternal&&(n=this.host),n+="/",this.path.length>0&&(n+=this.path.join("/")+"/"),n+this.getEName()},n.prototype.init=function(t){var o,s,u,i,r,f,e;return t=t.toLowerCase().trim(),u=t.indexOf("|"),u!==-1&&(this.moduleType=ModuleType[t.substr(0,u)],t=t.substr(u+1)),t.indexOf("//")===0?(o=n.getHost(t=t.substr(2)),this.host=o[0],this.path=o[1]):(s=n.getFullHost(t),this.host=s[0],this.path=s[1]),i=this.path.pop(),i?(this.IsFolder=!1,r=i.indexOf("?"),f=r===-1?i:i.substr(0,r),this.params=r==-1?"":i.substr(r+1),r=r===-1?i.length-1:u,e=f.lastIndexOf("."),e!==-1?(this.ext=f.substr(e+1),this.moduleName=f.substr(0,e)):this.moduleName=f):(this.IsFolder=!0,this.moduleType=ModuleType.folder),this.moduleType==undefined&&(this.moduleType=this.ext?ModuleType[ModuleType[ModuleExt[this.ext]]]:ModuleType.code),this.moduleType===undefined&&this.ext&&(this.moduleType=ModuleType.uknown),this},n.getHost=function(t){var u=t.indexOf("://"),e=t.indexOf("/");if(e<u)return r=t.split("/"),e===0&&(r.shift(),f=n.rootUrl.host),[f,r];if(u===-1)throw" Invalid Url ";var i=t.indexOf("/",u+3),f=i===-1?t:t.substr(0,i),r=i===-1?[""]:t.substr(i+1).split("/");return[f,r]},n.getFullHost=function(t){var r=t.indexOf("://"),f=t.indexOf("/");if(r===-1||f<r)u=t.split("/"),f===0&&(u.shift(),e=n.rootUrl.host);else var i=t.indexOf("/",r+3),e=i===-1?t:t.substr(0,i),u=i===-1?[""]:t.substr(i+1).split("/");return[e,u]},n.prototype.Combine=function(t){var i=typeof t=="string"?new n(t):t,r;return i.IsExternal?i:(r=new n,r.host=this.host,r.path=this.path==null?i.path:i.path==null?null:this.path.concat(i.path),r.moduleType=i.moduleType,r.moduleName=i.moduleName,r.ext=i.ext,r.params=i.params,r)},Object.defineProperty(n.prototype,"IsExternal",{get:function(){return this.host!=null&&this.host!=""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isAsset",{get:function(){return this.moduleType!==ModuleType.code},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this._path},set:function(t){n.RevalidatePath(t,this.IsExternal);this._path=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"FullPath",{get:function(){return this.toString()},enumerable:!0,configurable:!0}),n.prototype.SameHostAs=function(t){var i=this.IsExternal?this.host:n.rootUrl.host,r=t.IsExternal?t.host:n.rootUrl.host;return i===r},n.RevalidatePath=function(n,t){if(n)for(var r,i=0;i<n.length;i++)if(r=n[i],r===".")n.splice(i,1),i-=1;else if(r==="..")if(t)i==0?(n.splice(i,1),i-=1):(n.splice(i-1,2),i-=2);else if(i===0||i===1&&n[2]===".."||n[i-1]==="..")continue;else i>0&&(n.splice(i-1,2),i-=2)},n.prototype.intersect=function(t){if(!this.SameHostAs(t))return null;var i=new n;return i.host=this.host,i},Object.defineProperty(n.prototype,"IsInternal",{get:function(){return this.IsExternal?n.rootUrl.SameHostAs(this):!0},enumerable:!0,configurable:!0}),n.rootUrl=new n(document.location.href),n}();n.Url=et}(g=t.basic||(t.basic={})),function(n){function f(n,t,i){return t instanceof Element&&t.classList.contains(i)}function e(n,t,i){return t instanceof Element&&t.tagName===i.toUpperCase()}function u(n,t){var i=t.nextSibling;i?t.parentNode.insertBefore(n,i):t.parentNode.appendChild(n)}function o(n){return n instanceof Array?new t(n):new i(n)}var t,i,r;n.hasClass=f;n.hasTag=e;t=function(){function n(n){this.dom=n}return n.prototype.eq=function(n){var t=n<0?this.dom[this.dom.length-n]:this.dom[n];return t?new i(t):new r},n.prototype.removeClass=function(n){for(var i,t=0;t<this.dom.length;t++)i=this.dom[t],i instanceof Element&&i.classList.remove(n);return this},n.prototype.addClass=function(n){for(var i,t=0;t<this.dom.length;t++)i=this.dom[t],i instanceof Element&&i.classList.add(n);return this},n.prototype.hasClass=function(n){for(var i,t=0;t<this.dom.length;t++)if(i=this.dom[t],i instanceof Element&&i.classList.contains(n))return!0;return!1},n.prototype.parent=function(n,t){if(this.dom.length==1)return new i(this.dom[0]).parent(n,t);if(this.dom.length===0)return new r;throw null;},n.prototype.submit=function(){for(var t,n=0;n<this.dom.length;n++)t=this.dom[n],t instanceof HTMLFormElement&&t.submit()},n.prototype.siblings=function(){throw new Error("Method not implemented.");},n.prototype.appendTo=function(){throw new Error("Method not implemented.");},Object.defineProperty(n.prototype,"length",{get:function(){return this.dom.length},enumerable:!0,configurable:!0}),n.prototype.detach=function(){for(var t,n=0;n<this.dom.length;n++)t=this.dom[n],t.parentNode.removeChild(t);return this},n.prototype.insertBefore=function(n){for(var t,i=0;i<this.dom.length;i++)t=this.dom[i],t!=null&&t.parentNode.removeChild(t),n.parentElement.insertBefore(t,n);return this},n.prototype.insertAfter=function(n){for(var t,i=0;i<this.dom.length;i++)t=this.dom[i],t!=null&&t.parentNode.removeChild(t),u(t,n);return this},n.prototype.find=function(t,i){for(var e,u,f=[],r=0;r<this.dom.length;r++)for(e=this.dom[r],u=document.createTreeWalker(e,NodeFilter.SHOW_ALL,{param:i,"this":this,acceptNode:function(n){return t(this.this,n,this.param)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}},!1);u.nextNode();)f.push(u.currentNode);return new n(f)},n.prototype.children=function(t,i){for(var u,f,e=[],r=0;r<this.dom.length;r++)if(u=this.dom[r],u instanceof Element)for(r=0;r<u.children.length;r++)f=u.children[r],t(this,f,i)&&e.push(f);return new n(e)},n.prototype.removeChildren=function(n,t){for(var r,u,i=0;i<this.dom.length;i++)if(r=this.dom[i],r instanceof Element)for(i=0;i<r.children.length;i++)u=r.children[i],n(this,u,t)&&(r.removeChild(u),i--);return this},n.prototype.add=function(n){if(n instanceof Array)for(var t=0;t<n.length;t++)this.dom.push(n[t]);else this.dom.push(n);return this},n.prototype.toggleClass=function(n){for(var t,r=this.dom,i=0;i<r.length;i++)t=r[i],t instanceof Element&&(t.classList.contains(n)?t.classList.remove(n):t.classList.add(n));return this},n.prototype.toArray=function(){return this.dom},n}();n.__=t;i=function(){function n(n){this.dom=n}return n.prototype.eq=function(n){return n===0||n===-1?this:new r},n.prototype.hasClass=function(n){var t=this.dom;return t instanceof Element&&t.classList.contains(n)?!0:!1},n.prototype.parent=function(t,i){for(var u=this.dom.parentNode;u!=document;){if(t(this,u,i))return new n(u);u=u.parentNode}return new r},Object.defineProperty(n.prototype,"length",{get:function(){return 1},enumerable:!0,configurable:!0}),n.prototype.submit=function(){var n=this.dom;n instanceof HTMLFormElement&&n.submit()},n.prototype.siblings=function(n,i){for(var r=this.dom,u;r.previousSibling;)r=r.previousSibling;u=[];do n(this,r,i)&&u.push(r),r=r.nextSibling;while(r);return new t(u)},n.prototype.detach=function(){return this.dom.parentNode!=null&&this.dom.parentNode.removeChild(this.dom),this},n.prototype.add=function(n){var i;return n instanceof Array?(i=n.slice(),i.unshift(this.dom)):i=[this.dom,n],new t(i)},n.prototype.toggleClass=function(n){var t=this.dom;t instanceof Element&&(t.classList.contains(n)?t.classList.remove(n):t.classList.add(n))},n.prototype.insertBefore=function(n){return this.dom.parentNode!=null&&this.dom.parentNode.removeChild(this.dom),n.parentElement.insertBefore(this.dom,n),this},n.prototype.insertAfter=function(n){return this.dom.parentNode!=null&&this.dom.parentNode.removeChild(this.dom),u(this.dom,n),this},n.prototype.children=function(n,i){var e=[],u=this.dom,r,f;if(u instanceof HTMLElement)for(r=0;r<u.children.length;r++)f=u.children[r],n(this,f,i)&&e.push(f);return new t(e)},n.prototype.removeChildren=function(n,t){var r=this.dom,i,u;if(r instanceof HTMLElement)for(i=0;i<r.children.length;i++)u=r.children[i],n(this,u,t)&&(r.removeChild(u),i--);return this},n.prototype.appendTo=function(n){this.detach();n.appendChild(this.dom)},n.prototype.find=function(n,i){for(var r=[],u=document.createTreeWalker(this.dom,NodeFilter.SHOW_ALL,{param:i,"this":this,acceptNode:function(t){return n(this.this,t,this.param)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}},!1);u.nextNode();)r.push(u.currentNode);return new t(r)},n.prototype.removeClass=function(n){var t=this.dom;return t instanceof Element&&t.classList.remove(n),this},n.prototype.addClass=function(n){var t=this.dom;return t instanceof Element&&t.classList.add(n),this},n.prototype.toArray=function(){return[this.dom]},n}();n._=i;r=function(){function i(){}return i.prototype.eq=function(){return this},i.prototype.removeClass=function(){return this},i.prototype.addClass=function(){return this},i.prototype.hasClass=function(){return!1},i.prototype.detach=function(){return this},i.prototype.insertBefore=function(){return this},i.prototype.insertAfter=function(){return this},i.prototype.children=function(){return new t([])},i.prototype.removeChildren=function(){return this},i.prototype.find=function(){return new t([])},i.prototype.add=function(t){return n.$$(t)},i.prototype.toggleClass=function(){return this},i.prototype.siblings=function(){return new t([])},i.prototype.appendTo=function(){return this},Object.defineProperty(i.prototype,"length",{get:function(){return 0},enumerable:!0,configurable:!0}),i.prototype.submit=function(){return this},i.prototype.parent=function(){return this},i.prototype.toArray=function(){return[]},i}();n.$$=o}(yt=t.query||(t.query={}));t.$$=ei,function(n){function w(n){return n instanceof t?n:new t(n)}function b(n,i,r){var u;try{typeof n=="function"?u=n.apply(i,r):n instanceof t?u=n.Invoke.apply(n,r):"Invoke"in n&&(u=n.Invoke.apply(n.Owner||i,r))}catch(f){}return u}function f(n,t,i){if(n||(n=this.Stack[this.Stack.length-1]),typeof n=="number")var n=this.Stack[n];return t&&t.apply(n.caller,n.arguments),n?(i?this.fn:this.proxy).apply(n.caller,n.arguments):void 0}function e(n,t){return n.Stack||(n.Stack=[]),n.ReCalc=f,n.proxy=function(){var t=u.call(arguments),i;if(n.obsArgs!==!1)for(i=0;i<t.length;i++)typeof t[i]=="function"&&t[i].__isProxy&&e({save:n.save,callback:n.callback,obsArgs:n.obsArgs,Stack:n.Stack,fn:t[i],ReCalc:f,debug:!1},function(n){t[i]=n.proxy});return n.debug&&stop(),n.save&&n.Stack.push({caller:this,arguments:t,fn:n.fn}),n.callback&&n.callback.apply(this,t),n.fn&&n.fn.apply(this,t)},n.proxy.__isProxy=!0,n.proxy.__Fn=n.fn,t&&t(n),n}function k(n,t){while(n=n.__proto__)if(n.constructor.name==t)return!0;return!1}function d(n,t){while(n=n.__proto__)if(n.constructor===t)return!0;return!1}function g(n,t){for(var i=n;n;){if(n==t)return!0;i=i.base}return!1}function h(t){if(t instanceof n.GenericType)return t.GetBaseType();var i=t.prototype.__proto__;return i==null?null:i.constructor}function nt(n,t){var r=[],i=n.prototype;do{if(i.constructor==t)break;r.push(i.constructor);i=i.__proto__}while(i!==null);return r}function i(t,i){if(t===i||i===Object)return!0;t.constructor==n.GenericType&&(t=t.Constructor);i.constructor==n.GenericType&&(i=i.Constructor);var r=t.prototype;do{if(r.constructor===i)return!0;r=r.__proto__}while(r!==null);return!1}function r(){return a||(a=new s.Dictionary("GTypes",!0))}function p(n){return n&&"prototype"in n&&typeof n=="function"}function it(n){return typeof n=="object"&&"constructor"in n&&p(n.constructor)&&!(n instanceof n.constructor)}function rt(n){return"constructor"in n&&n instanceof n.constructor}var t=function(){function n(n,t){this.Owner=t;this._list=[];n&&this._list.push(n)}return n.prototype.add=function(n){return this._list.push(n),this},n.prototype.With=function(n){for(var r,u,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return r=this.Owner,this.Owner=n,u=o.TryCatch(this,this.Invoke,void 0,i),this.Owner=r,u},n.prototype.Clone=function(){var t=new n;return t._list=this._list.slice(),t},n}(),u,c,a,v,y,tt;n.MethodGroup=t;t.prototype.Invoke=function(){for(var n,r,i=0;i<this._list.length;i++){n=this._list[i];try{typeof n=="function"?r=n.apply(this.Owner,arguments):n instanceof t?r=n.Invoke.apply(n,arguments):"Invoke"in n&&(r=n.Invoke.apply(n.Owner||this.Owner,arguments))}catch(u){}}return r};n.ToMethodGroup=w;n.Invoke=b;u=Array.prototype.slice;n.isInstanceOfClassName=k;n.isInstanceOfClass=d;n._isInstanceOf=g;n.GetBaseType=h;n.GetBaseTypes=nt;n.IsInstanceOf=i;c=function(){function n(n){this.passed=[];this.type=n}return n.prototype._getPath=function(n){var i,t,r;for(i in n)if(t=n[i],this.passed.indexOf(t)===-1){this.passed.push(t);switch(typeof t){case"string":case"number":case"boolean":case"undefined":continue;default:if(t===this.type)return i;if(t instanceof Function)continue;if(r=this._getPath(t),r!=null)return i+"."+r}}},n.prototype.GetType=function(n){return this.passed==null&&(this.passed=[]),this.passed.length=0,this._getPath(n)},n}();n.Type=c;v=function(){function n(n,t,i){if(this.Constructor=n,this.Params=t,this.prototype=n.prototype,!lt)throw this;r().Set(this,i);lt=!1}return Object.defineProperty(n.prototype,"base",{get:function(){return r().Get(this)},enumerable:!0,configurable:!0}),n.prototype.GetBaseType=function(){return r().Get(this)},n.GetType=function(t,i,u,f){var e,o,s,c;if(typeof t!="function")throw"type must be fanction";if(i==null||i.length===0)return t;for(e=this.i(t),e=r().Count-1;e>=0;e--)if(o=r().GetKeyAt(e),t==o.Constructor&&i.length==o.Params.length){for(s=o.Params,c=s.length-1;c>=0;c--)if(s[c]!=i[c]){s=undefined;break}if(s)return o}if(!u)return lt=!0,new n(t,i,f==null?h(t):f)},n.i=function(t){return t instanceof n?1:0},n.IsInstanceOf=function(n,t){return this._isInstanceOf[this.i(n)+this.i(t)*2](n,t)},n._isInstanceOf=[function(n,t){return i(n,t)},function(n,t){return i(n,t.Constructor)},function(n,t){return i(n.Constructor,t.Constructor)},function(n,t){return i(n.Constructor,t)}],n}();n.GenericType=v;Function.prototype.IsInstanceOf=n.IsInstanceOf;y=function(){function n(n){this._type=n}return Object.defineProperty(n.prototype,"Type",{get:function(){return this._type()},enumerable:!0,configurable:!0}),n}();n.DelayedType=y,function(n){function i(n,i,r){var u=Object.getOwnPropertyDescriptor(n,i);l(n,i,{get:u.get,set:function(n){var f=u.get.call(this),i;n!==f&&(u.set.call(this,n),i=t.length==0?document.createEvent("Event"):t.pop(),i.initEvent(r,!0,!0),i.oldValue=f,i.newValue=n,dispatchEvent(new Event(r,{bubbles:!1,cancelable:!0,scoped:!1})),this instanceof EventTarget?this.dispatchEvent(i):dispatchEvent(i),t.push(i))}})}function r(n,i,r,u,f){l(n,i,{get:r,set:function(n){var e=r.call(this),i;n!==e&&(u.call(this,n),i=t.length==0?document.createEvent("Event"):t.pop(),i.initEvent(f,!0,!0),i.oldValue=e,i.newValue=n,dispatchEvent(new Event(f,{bubbles:!0,cancelable:!0,scoped:!0})),this instanceof EventTarget?this.dispatchEvent(i):dispatchEvent(i),t.push(i))}})}function u(){}var t=[];n.observeProperty=i;n.setObservableProperty=r;l(Node.prototype,"value",{get:function(){return this.textContent},set:function(n){this.textContent=n}});i(Node.prototype,"textContent","textContentChanged");n.ObjectToObservable=u}(tt=n.Observable||(n.Observable={}));n.IsClass=p;n.IsPrototype=it;n.IsInstance=rt}(h=t.reflection||(t.reflection={})),function(n){n.Service=function(){function i(){for(var t=n.length>100?100:n.length,i;t>0;){t--;var r=n.pop(),u=r[0],f=r[1];for(t=0;t<u.length;t++)i=u[t],i.handleEvent(f),i.IsWaiting=!1}}var r=function(){function r(){}return r.Push=function(t,i){for(var r,e=i.prop.IsAsync,u=[],f=0;f<t.length;f++)if(r=t[f],e){r.IsWaiting||(r.IsWaiting=!0,u.push(r));continue}else r.handleEvent(i);u.length>0&&n.push([u,i])},r.Close=function(){t=!0;clearInterval(w)},r.Restart=function(){clearInterval(w);w=setInterval(i,1e3);t=!0},Object.defineProperty(r,"IsRunning",{get:function(){return t},enumerable:!0,configurable:!0}),r}(),t=!0,n=[];return r}()}(oi=t.services||(t.services={})),function(n){var t=function(){function n(n,t,i){this.name=n;this.event=t;this.delegate=i}return n}();n.__data=t}(at||(at={})),function(n){function i(n){var i=t.get(n);return typeof i=="undefined"&&t.set(n,i=[]),i}function r(n,t,i){Object.defineProperty(n,t,{value:i,configurable:!1,enumerable:!1,writable:!1})}function u(n,t,u,f,o,s,c){return function(l,a){if(!h.IsPrototype(l))throw"Invalid Implimentation of property Attribute";var y=i(l.constructor),v=e.DObject.CreateField(u||a,n,t,f,o,s);c===void 0&&(c="DP"+(u||a));c&&r(l.constructor,c,v);y.push(v);n=void 0;t=void 0;f=void 0;o=void 0}}function f(n,t){return function(u,f){if(!h.IsPrototype(u))throw"Invalid Implimentation of property Attribute";var s=i(u.constructor),o=e.DObject.CreateField(t.Name||f,n,t.defaultValue,t.changed,t.check,t.attribute);t.StaticName===void 0&&(t.StaticName="DP"+(t.Name||f));t.StaticName&&r(u.constructor,t.StaticName,o);s.push(o);t=void 0}}function o(n){return n=h.IsClass(n)?n:n.constructor,i(n)}function s(n){return t.delete(n)}function c(n,t,i){return rt.Manager.registerComponent({name:n,execute:t,check:i,attribute:void 0}),void 0}var t=new Map;n.property=u;n.property1=f;n.getProperties=o;n.Delete=s;n.ComponentParser=c}(it=t.attributes||(t.attributes={})),function(n){function f(n){var i=d[n];return i==null?u(new t(n,null,null,null,null,null)):i}function u(n,t){var i=d[n.Name];return i!=null?t?(d[n.Name]=n,n):i:d[n.Name]=n}var t=function(){function n(n,t,i,r,u,f){this.Name=n;this.Todo=t;this.Check=i;this.OnError=r;this.OnInitialize=u;this.OnScopDisposing=f;d[n]=this}return n}(),i,r;n.Job=t;i=function(){function n(n){this.Name=n;d[n]=this}return n.prototype.Todo=function(){},n.prototype.Check=function(){},n.prototype.OnError=function(){},n.prototype.OnInitialize=function(){},n.prototype.OnScopDisposing=function(){},n.prototype.push=function(){},n}();n.Jobs=i;r=function(){function t(t,i,r){this.Scop=t;this.job=i;this.dom=r;this._events=[];this._store={};this.propb=t.OnPropertyChanged(n.Scop.DPValue,this.ValueChanged,this)}return t.prototype.addEventListener=function(n,t,i){this._events.push(new at.__data(n,t,i));this.dom.addEventListener(t,i)},t.prototype.removeEventListener=function(n){for(var i,r=this._events,t=r.length-1;t>=0;t--)if(i=r[t],i.name==n){this.dom.removeEventListener(i.event,i.delegate);r.splice(t,1);return}},t.prototype.getEvent=function(n){for(var i,r=this._events,t=r.length;t>=0;t--)if(i=r[t],i.name==n)return i.delegate;return null},t.prototype.ValueChanged=function(n,t){ht.Push(this,t,n)},t.prototype.Dispose=function(){var u=this.job.OnScopDisposing,i,t,r;for(u!=null&&u(this,null),i=this._events,t=i.length-1;t>=0;t--)r=i[t],this.dom.removeEventListener(r.event,r.delegate),i[t]=null;this._events.splice(0);this._events=null;this._store=null;this.Checker=null;this.dom=null;this.Handle=null;this.job=null;this.Scop.removeEvent(n.Scop.DPValue,this.propb);this.Scop=null;this.propb.Dispose();this.propb=null;this.IsDisposed=!0},t.prototype.addValue=function(n,t){this._store[n]=t},t.prototype.getValue=function(n){return this._store[n]},t.prototype.handleEvent=function(n){this.Handle&&this.Handle(this,n)},t}();n.JobInstance=r;n.GetJob=f;n.Register=u}(e=t.bind||(t.bind={})),function(n){function f(){var f,e,n,r;for(t=!0,f=i.slice(),e=0,n=0;n<f.length;n++)r=f[n],r.once&&(i.splice(n-e,1),e++),o.TryCatch(r.owner,r.callback);t=!1;y.length!=0&&(clearTimeout(w),w=setTimeout(u.start,1),v=!0)}var r=function(){function n(n,t){this.id=n;this.params=t||[]}return n.prototype.Set=function(){for(var r,n,i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];for(n=i.length-1;n>=0;n--)if((r=i[n])===undefined)continue;else this.params[n]=r;return this},n.prototype.Set1=function(n){for(var i,t=n.length-1;t>=0;t--)if((i=n[t])===undefined)continue;else this.params[t]=i;return this},n.prototype.Clone=function(){var t=new n(this.id);return t.Set1(this.params),t},n}(),i,t,u,e;n.JobParam=r;i=[];u=function(){function n(){}return n.OnIdle=function(n,r,u){t||!v?o.TryCatch(n,r):i.push({owner:n,callback:r,once:u==!0})},n.InIdle=function(){return!v},n.GC=function(){for(var t,n=0,i=b.length;n<i;n++)t=b[n],t.children.length=0,t.ce=0;y.length=0;p=0;f()},n.clone=function(n,t,i){var u={callback:n.callback,_this:i===undefined?n._this:i,id:n.id,isWaiting:!0,optimizable:!1,params:new r(n.id).Set1(t||n.params.params)};return n.children.push(u),u},n.cretaeJob=function(n,t,i,u){var f={callback:n,params:new r(b.length,t),_this:i,optimizable:u,isWaiting:!1,id:b.length,children:[],ce:0};return b.push(f),f.params},n.Clear=function(n){for(var u,t=b[n.id],i=t.children,f=t.ce,e=i.length,r=e-1;r>f;r--)u=i[r],u.isWaiting=!1,u.optimizable=!0;i.length=0;t.ce=0},Object.defineProperty(n,"CurrentJob",{get:function(){return y[p]},enumerable:!0,configurable:!0}),n.start=function(){var r,i,u;if(v=!0,y.length===0){v=!1;f();return}for(t=!1,r=p+Math.min(3,y.length-p);p<r;p++)i=y[p],i.isWaiting&&o.TryCatch(i._this,i.callback,void 0,i.params.params),i.optimizable||(u=b[i.id],u.ce++),i.isWaiting=!1,y[p]=null;v=p<y.length;v?w=setTimeout(n.start,0):n.GC()},n.Push=function(i,r,u){var f=b[i.id];if(f.optimizable){if(r&&f.params.Set(r),f._this=u===undefined?f._this:u,f.isWaiting)return}else f=this.clone(f,r,u);return f.isWaiting=!0,y.push(f),v||y.length>0&&(clearTimeout(w),w=setTimeout(n.start,0),v=!0,t=!1),f},n.call=function(n,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];this.Push(e,[n,t,r])},n.IsRunning=function(){return v},n}();n.Dispatcher=u;e=n.Dispatcher.cretaeJob(function(n,t,i){t.apply(n,i)},[],null,!1)}(c=t.thread||(t.thread={})),function(n){var v=function(){function n(n,t,i,r,u,f){this.Attribute=n;this.Name=t;this.Type=i;this.DefaultValue=r;this.Changed=u;this.Check=f;i instanceof h.GenericType&&(this.GType=i);this.RedifineChecker()}return Object.defineProperty(n.prototype,"IsKey",{get:function(){return(this.Attribute&f.IsKey)===f.IsKey},enumerable:!0,configurable:!0}),n.prototype.RedifineChecker=function(){switch(this.Type){case h.GenericType:this.checkType=this.isGenerictype;break;case Object:this.checkType=n.isObject;break;case String:this.checkType=n.isString;break;case Number:this.checkType=n.isNumber;break;case Boolean:this.checkType=n.isBoolean;break;case h.DelayedType:break;default:if(this.Type.constructor==h.DelayedType)break;else this.checkType=this.Type.constructor===h.GenericType?this.isGenerictype:this._checkType}},n.prototype.checkType=function(n){var t=this.Type;return this.Type=t.Type,this.Type instanceof h.GenericType&&(this.GType=this.Type),this.RedifineChecker(),this.checkType(n)},n.prototype._checkType=function(n){return n instanceof this.Type},n.prototype.isGenerictype=function(n){return n instanceof this.Type.Constructor},n.isObject=function(){return!0},n.isString=function(n){return typeof n=="string"},n.isNumber=function(n){return typeof n=="number"},n.isBoolean=function(n){return typeof n=="boolean"},n}(),i,r,y,p,w,u,t,f,g,b,e,nt,s,k,tt,d;n.DProperty=v;i=[];r=function(){function n(){this.IsValid=!0}return n.New=function(t,r,u,f){var e=i.length==0?new n:i.pop();return e.prop=t,e.__this=r,e._new=f,e._old=u,e},n.prototype.Dispose=function(){i.push(this)},n}();n.EventArgs=r;y=function(){function n(){}return Object.defineProperty(n.prototype,"key",{get:function(){return this._key},set:function(n){this._key=n},enumerable:!0,configurable:!0}),n}();n.Ref=y;p=function(){function n(n,t){this._deleagtes=[];this.key={};this.locks=[];this.lock=!1;this.key=n;this.isSingliton=t===!0}return Object.defineProperty(n.prototype,"On",{set:function(n){this._deleagtes.push(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Off",{set:function(n){if(this.lock){this.locks.push(n);return}var t=this._deleagtes.indexOf(n);t!=-1&&this._deleagtes.splice(t,1)},enumerable:!0,configurable:!0}),n.prototype.Invoke=function(n,t){var u,i,r;if(n==this.key&&!(r<=0)){if(this.lock=!0,u=this.locks,this.isSingliton){while(this._deleagtes.length>0)o.TryCatch(this,this._deleagtes.shift(),void 0,t);this.locks.length=0}else{for(i=0,r=this._deleagtes.length;i<r;i++)o.TryCatch(this,this._deleagtes[i],void 0,t);for(this.lock=!1;u.length>0;)this.Off=this.locks.pop()}this.lock=!1}},n.prototype.Invok=function(n,t){var f,i,r,u;if(n==this.key&&!(u<=0)){if(this.lock=!0,i=new Array(1),this.isSingliton){while(this._deleagtes.length>0)i[0]=this._deleagtes.shift(),o.TryCatch(this,t,void 0,i);this.locks.length=0}else{for(r=0,u=this._deleagtes.length;r<u;r++)i[0]=this._deleagtes[r],o.TryCatch(this,t,void 0,i);for(this.lock=!1;this.locks.length>0;)this.Off=this.locks.pop()}return this.lock=!1,f}},n.prototype.PInvok=function(n,t,i){var u=this._deleagtes.length,f,e,r;if(n==this.key&&!(u<=0)){for(f=this._deleagtes.slice(),this.isSingliton&&(this._deleagtes.length=0),r=0;r<u;r++)e=o.TryCatch(i,f[r],void 0,t);return this.locks.length=0,e}},n.prototype.Add=function(n,t){this._store==null&&(this._store=[]);t!==undefined&&(this._store[t]=n);this._deleagtes.push(n)},n.prototype.Remove=function(n){if(this._store){var t=this._store[n];delete this._store[n];this.Off=t}},n.prototype.Dispose=function(){this.key=null;this.locks.length=0;this.locks=null;this._store&&(this._store.length=0,this._store=null);this._deleagtes.length=0;this._deleagtes=null},n}();n.EventListener=p;w=function(){function n(n,t){this._deleagtes=[];this.key={};this.currentIndex=-1;this.key=n;this.isSingliton=t===!0}return Object.defineProperty(n.prototype,"On",{set:function(n){this._deleagtes.push(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Off",{set:function(n){var t=this._deleagtes.indexOf(n);t!=-1&&(this._deleagtes.splice(t,1),this.currentIndex!=-1&&t<=this.currentIndex&&this.currentIndex--)},enumerable:!0,configurable:!0}),n.prototype.PInvok=function(n,t,i){var u,f,e,r,s;if(this.currentIndex!=-1)throw"";if(u=this._deleagtes.length,n==this.key&&!(u<=0)){for(f=this._deleagtes.slice(),this.currentIndex=0;this.currentIndex<this._deleagtes.length;this.currentIndex++)r=f[this.currentIndex],r&&typeof r!="function"&&(s=r.Owner,r=r.Invoke),e=o.TryCatch(s||i,r,void 0,t);return this.isSingliton&&(this._deleagtes.length=0),this.currentIndex=-1,e}},n.prototype.Add=function(n,t){this._store==null&&(this._store=[]);t!=undefined&&(this._store[t]=n);this._deleagtes.push(n)},n.prototype.Remove=function(n){if(this._store){var t=this._store[n];delete this._store[n];this.Off=t}},n.prototype.Dispose=function(){this.key=null;this._store&&(this._store.length=0,this._store=null);this._deleagtes.length=0;this._deleagtes=null},n}();n.FEventListener=w;u=function(){function n(n,t){this.Invoke=n;this.Owner=t}return n.prototype.handleEvent=function(n){if(!this._isIvnoked){if(this.Invoke==null)return!0;this._isIvnoked=!0;o.TryCatch(this.Owner||n.__this,this.Invoke,void 0,[this,n]);this._isIvnoked=!1}},n.prototype.Dispose=function(){this.Owner=null;this.Invoke=null},n}();n.PropBinding=u;t=function(){function n(n){this.Value=n}return Object.defineProperty(n.prototype,"InsBindings",{get:function(){return this._bindings===undefined&&(this._bindings=[]),this._bindings},enumerable:!0,configurable:!0}),n.prototype.Dispose=function(){if(this.Value=null,this._bindings){for(var n=this._bindings.length-1;n>=0;n--)this._bindings[n].Dispose();this._bindings.length=0;this._bindings=null}},n}();n.PropertyStore=t,function(n){n[n.NonSerializable=2]="NonSerializable";n[n.Private=4]="Private";n[n.SerializeAsId=8]="SerializeAsId";n[n.IsKey=16]="IsKey";n[n.Optional=32]="Optional"}(f=n.PropertyAttribute||(n.PropertyAttribute={})),function(n){n[n.NonSerializable=2]="NonSerializable"}(g=n.ObjectAttribute||(n.ObjectAttribute={}));b=function(){function n(n){this.Base=n;this.Fields=[];this.Fields=n?n.Fields.slice(0):[]}return Object.defineProperty(n.prototype,"length",{get:function(){return this.Fields.length},enumerable:!0,configurable:!0}),n.prototype.GetField=function(n){var t,i;if(this.Base&&(t=this.Base.GetField(n),t))return t;for(i=0;i<this.Fields.length;i++)if((t=this.Fields[i]).Name==n)return t},n}();e=function(){function i(){this.store=[];this._propertyChanged=[];i.register(this.constructor)}return i.prototype.GetType=function(){return this.constructor},i.__fields__=function(){return[]},i.__attributes__=function(){},Object.defineProperty(i,"isOpen",{get:function(){return this._isOpen},enumerable:!0,configurable:!0}),i.GetProperty=function(n,t){for(var u,e=i.getId(n),o=i._dpStore[e],f=o.Fields,r=f.length-1;r>=0;r--)if(u=f[r],u.Name==t)return u},i.GetDPropertyAt=function(n,t){var r=i.register(n);return r.Fields[t]},i.prototype.GetProperty=function(n){for(var e,t,r,f=h.GetBaseTypes(this.constructor,i),u=0;u<f.length;u++)if(e=i.getId(f[u]),t=i._dpStore[e],t)for(r=t.Fields.length-1;r>=0;r--)if(t.Fields[r].Name==n)return t.Fields[r];return null},i.prototype.ToJson=function(n,t){var f,r,u;t=t==undefined?n.getJson(this):t;t.valid=!0;f=t.json;for(var o=i._dpStore[i.getId(this.constructor)].Fields,e=0,s=o.length;e<s;e++)if(r=o[e],(r.Attribute&2)!=2){if(u=this.get(r),(r.Attribute&8)==8)if(u&&u.Id){f[r.Name]=u.Id;continue}else continue;f[r.Name]=n.ToJson(u)}return f},i.prototype.FromJson=function(n,t,r){var f,u,o;if(n==null)return this;f=n["@ref"];delete n["@ref"];f&&t.set(f.__ref__,this);r=r||!1;for(var s=i._dpStore[i.getId(this.constructor)].Fields,e=0,h=s.length;e<h;e++)(u=s[e],(u.Attribute&4)!=4)&&(o=n[u.Name],o!==undefined)&&t.FromJson(o,u.Type,new a.Path(this,u));return this},i.IsClass=function(n){return typeof n=="function"?n==i.IsClass.constructor?!1:!0:!1},i.CreateField=function(n,t,i,r,u,f){return t==null&&(t=Object),new v(f,n,t,i,r,u)},i.getId=function(n){if(n.hasOwnProperty("__id__"))return n.__id__;var t=++i.typeCount;return l(n,"__id__",{value:t,writable:!1,configurable:!1,enumerable:!1}),t},i._buildProperty=function(t,i){var r=t[i],u;return u=r!=null?r.constructor:Object,n.DObject.CreateField(i,u,r)},i.prototype.IsPropertiesChanged=function(n){var r,i,u,t;if(!n)return!0;for(r=n.values,i=this.store,t=0;t<i.length;t++)if((u=i[t])&&u.Value!==r[t])return!0;return!1},i.ToDObject=function(n,t){var r,f,i,u;if(n instanceof this||n.hasOwnProperty("__id__"))return n;if(r=n.getType instanceof Function?n.getType():n.constructor,r.hasOwnProperty("__id__")){if(r!==-1)throw"Invalid type";}else l(r,"__id__",{value:-1,writable:!1,configurable:!1,enumerable:!1});for(f=new Array(t.length),i=0;i<t.length;i++)u=f[i]=this._buildProperty(n,t[i]),u.Index=i,dt(n,u)},i.register=function(n){var f=i.getId(n),a=i._dpStore[f],l,r,s,c,t,v,y,e,o,u;if(a!=null)return a;for(l=h.GetBaseTypes(typeof n=="function"?n:n.constructor,i),c=l.length-1;c>=0;c--){if(t=l[c],f=i.getId(t),r=i._dpStore[f],r==null){for(t.hasOwnProperty("ctor")&&t.ctor(),t.hasOwnProperty("_ctor")&&t._ctor(),v=t.hasOwnProperty("__fields__")?t.__fields__:null,i._isOpen=!0,r=new b(s),y=s?s.length:0,e=v?t.__fields__():[],e.push.apply(e,it.getProperties(t)),o=0;o<e.length;o++)(u=e[o],r.GetField(u.Name))||(u.Index=y+o,u.Type instanceof h.DelayedType||Object.freeze(u),t.prototype.hasOwnProperty(u.Name)||dt(t,u),r.Fields.push(u));it.Delete(t);i._isOpen=!1;i._dpStore[f]=r;Object.freeze(r)}s=r}return i._dpStore[f]},i.prototype.getType=function(){return this.constructor},i.getFieldsCount=function(){return this.register(this).Fields.length},i.getFields=function(n){return this.register(n||this).Fields},i.prototype.set=function(n,i,u){var o,e,f;if(!this._isFrozen&&(o=this.store[n.Index]||(this.store[n.Index]=new t(n.DefaultValue)),e=o.Value,e!==i)){if(i!=null&&!n.checkType(i))throw{message:"Uncompatible type","this":this,property:n,value:i};if(f=r.New(n,this,e,i),n.Check&&n.Check.call(this,f),e!==f._new&&f.IsValid){o.Value=f._new;n.Changed&&n.Changed.call(this,f);this.onPropertyChanged(f);if(u)return f;f.Dispose()}}},i.prototype.raise=function(n){var t=this.get(n),i=r.New(n,this,t,t);this.onPropertyChanged(i)},i.prototype.get=function(n){var t=this.store[n.Index];return t?t.Value:n.DefaultValue},i.prototype.GetValues=function(){return this.store.map(function(n){return n&&n.Value})},i.prototype.GetValue=function(n){var t=this.store[n.Index];return t?t.Value:n.DefaultValue},i.prototype.SetValue=function(n,t){this.set(n,t)},i.prototype.removeListener=function(n){var t=this._propertyChanged.indexOf(n.Ref);if(t!==-1)this._propertyChanged.splice(t,1);else return!1;return!0},i.prototype.addListener=function(n){return this._propertyChanged.indexOf(n)!==-1?!1:(this._propertyChanged.push(n),!0)},i.prototype.onPropertyChanged=function(n){for(var r,i,t=0;t<this._propertyChanged.length;t++)r=this._propertyChanged[t],r(n),it.property;if(i=(i=this.store[n.prop.Index])&&i._bindings)for(t=0;t<i.length;t++)i[t].handleEvent(n)&&(i.splice(t,1),t--)},i.prototype.Observe=function(n,i,r){var f=this.store[n.Index]||(this.store[n.Index]=new t(n.DefaultValue));return f.InsBindings.push(f=new u(i,r)),f},i.prototype.UnObserve=function(n,t,i){var f=this.store[n.Index]&&this.store[n.Index]._bindings,e,o,r,u;if(f)if(typeof t!="function"){if((r=f.indexOf(t))!=-1)return this._disposeProp(this.store[n.Index],t,r)}else{for(r=f.length-1;r>=0;r--)if(u=f[r],u.Invoke===t){if(u.Owner===i&&!this._disposeProp(this.store[n.Index],u,r))return!0;e||(e=u,o=r)}if(e)return this._disposeProp(this.store[n.Index],e,o)}return!1},i.prototype._disposeProp=function(n,t,i){var r=n._bindings;return(t.Dispose(),r.length==1)?(n._bindings=void 0,!1):(r.splice(i,1),!0)},i.prototype.OnPropertyChanged=function(n,t,i){return this.Observe(n,t,i)},i.prototype.addEvent=function(n,i){var r=this.store[n.Index]||(this.store[n.Index]=new t(n.DefaultValue));r.Bindings.push(i)},i.prototype.removeEvent=function(n,t){var r=this.store[n.Index]&&this.store[n.Index]._bindings,i;return r&&(i=r.indexOf(t),i!=-1)?this._disposeProp(this.store[n.Index],t,i):null},Object.defineProperty(i.prototype,"Disposed",{get:function(){return this.store.length===0},enumerable:!0,configurable:!0}),i.prototype.OnDispose=function(){if(this.DisposingStat===2)return null;var n=this.DisposingStat==1;return this.DisposingStat=1,!n&&this.OnDisposing&&this._onDisposing.Invoke(0,[this]),n},i.prototype.Dispose=function(){var t=this.OnDispose(),u,n,r;if(t!==null){for(this._propertyChanged.length=0,u=i.getFields(this.GetType()),n=0,r=this.store.length;n<r;n++)this.store[n]&&this.store[n].Dispose();this.store.length=0;t||(this.DisposingStat=2)}},Object.defineProperty(i.prototype,"OnDisposing",{set:function(t){this._onDisposing===undefined&&(this._onDisposing=new n.EventListener(0,!0));this._onDisposing.On=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"OffDisposing",{set:function(n){this._onDisposing!=undefined&&(this._onDisposing.Off=n)},enumerable:!0,configurable:!0}),i.prototype.CloneTo=function(n){n._propertyChanged=this._propertyChanged;n.addListener=this.addListener;n.store=this.store},i.prototype.Freeze=function(){this._isFrozen=!0},i.prototype.UnFreeze=function(){this._isFrozen=!1},i.prototype.IsFrozen=function(){return this._isFrozen},i.prototype.CreateBackup=function(n){var t;return ft.GetOrAdd(this.store,[]).push(t={OnUndo:n,values:this.store.map(function(n){return n.Value})}),t},i.prototype.Commit=function(n){var t=ft.Get(this.store),i;if(t==null||t.length===0)return!1;if(n){if(i=t.indexOf(n),i===-1)return;t.splice(i)}else t.pop()},i.prototype.Rollback=function(n,t){var u,r;if(n)return this.UndoTo(n,t);if(u=ft.Get(this.store),u==null||u.length===0)return!1;var f=u.pop(),o=i._dpStore[this.constructor.__id__],e=f.values;for(r=0;r<e.length;r++)this.set(o.Fields[r],e[r]);return f.OnUndo&&f.OnUndo(this,f),!0},i.prototype.UndoTo=function(n,t){var f=ft.Get(this.store),e,s,o,u,r;if(f!=null&&f.length!==0){if(r=f.indexOf(n),r===-1)return!1;if(e=f.splice(r,f.length-r),s=i._dpStore[this.constructor.__id__],t)for(r=e.length;r>=0;r--)for(o=e[r],u=o.values,r=0;r<u.length;r++)this.set(s.Fields[r],u[r]);else for(o=e[0],u=o.values,r=0;r<u.length;r++)this.set(s.Fields[r],u[r]);return!0}},i._dpStore=[],i._isOpen=!1,i.typeCount=0,i}();n.DObject=e,function(n){n[n.None=0]="None";n[n.Disposing=1]="Disposing";n[n.Disposed=2]="Disposed"}(nt=n.DisposingStat||(n.DisposingStat={}));s=function(){function t(n){this.Name=n}return t.prototype.ListenTo=function(t,i,r){!this.Property&&t instanceof n.DObject&&(this.Property=t.GetProperty(this.Name));this.Property?(this.Binding!=null&&this.d&&this.d.UnObserve(this.Property,this.Binding,r),this.Binding=void 0,t&&(this.Value=t.GetValue(this.Property),this.Binding=t.Observe(this.Property,i,r))):(this.Binding!=null&&this.d&&st.unobserve(this.d,this.Name,this.Binding,r),this.Binding=void 0,t&&t.hasOwnProperty(this.Name)&&(this.Binding=st.observe(t,this.Name,i,r)),t&&(this.Value=t[this.Name]));this.d=t},t.prototype.Dispose=function(){this.Property&&this.d instanceof n.DObject?this.Binding!=null&&this.d!=null&&this.d.UnObserve(this.Property,this.Binding):this.Binding!=null&&this.d!=null&&st.unobserve(this.d,this.Name,this.Binding);this.Value=null;this.Binding=null},t}();n.XPath=s;k=function(t){function i(n,i,r){var u=t.call(this)||this;return u.controller=r,u.xpath=[],u.Me=n,u.Path=i,u}return __extends(i,t),Object.defineProperty(i.prototype,"Me",{get:function(){return this.get(i.DPMe)},set:function(n){this.set(i.DPMe,n)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Path",{get:function(){return this.get(i.DPPath)},set:function(n){this.set(i.DPPath,n)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Value",{get:function(){return this.get(i.DPValue)},set:function(n){this.set(i.DPValue,n)},enumerable:!0,configurable:!0}),i.__fields__=function(){return[i.DPMe,i.DPPath,i.DPValue]},i.prototype.GenType=function(){return i},i.prototype.calcPrefix=function(t){switch(t){case"this":return this.controller&&this.controller.MainControll;case"window":return n.windowScop}},i.prototype.rebuidPath=function(n){var i=n._new,t,r;for(this.disposePath(),this.xpath=new Array(i.length),t=0;t<i.length;t++)r=i[t],this.xpath[t]=new s(r);this.Start(0)},i.prototype.disposePath=function(){for(var i,t=this.xpath,r=t.length,n=0;n<r;n++)i=t[n],i.Dispose();this.Value=null},i.prototype.getValue=function(n){for(var i,t=this.Me,u=this.xpath,r=0;r<n;r++){if(i=u[r],t==null)return null;t=i.Property?t.get(i.Property):t[i.Name];i.Value=t}return t},i.prototype.Start=function(n){var u,t,r,i;for(n==void 0&&(n=0),u=this.xpath,t=this.getValue(n),r=n;r<u.length;r++)i=u[r],t?(i.ListenTo(t,this.callMe,this),t=i.Value):i&&i.Dispose();this.Value=t},i.prototype.ESetValue=function(n){var t=this.xpath.length,i,r;t<1||(i=this.xpath[t-1],r=t-2<0?this.Me:this.xpath[t-2].Value,r&&(i.Property?r.SetValue(i.Property,n):(this.Value=n,r[i.Name]=n)))},i.prototype.callMe=function(n){for(var i,t=this.xpath.length-1;t>=0;t--)if(i=this.xpath[t],i.Binding==n){this.Start(t+1);break}this.Value=this.getValue(this.xpath.length)},i.prototype.Dispose=function(){var n=this.OnDispose();n!==null&&(this.disposePath(),t.prototype.Dispose.call(this),n||(this.DisposingStat=2))},i.DPMe=n.DObject.CreateField("Me",Object,null,function(){this.Start(0)},i.prototype.disposePath),i.DPPath=n.DObject.CreateField("Path",Array,null,i.prototype.rebuidPath),i.DPValue=n.DObject.CreateField("Value",Object,null),i}(n.DObject);n.Observer=k,function(n){n[n.NotProcessed=0]="NotProcessed";n[n.Processing=1]="Processing";n[n.Processed=2]="Processed"}(tt=n.ProcessStat||(n.ProcessStat={}));d=function(t){function i(n){var i=t.call(this)||this;return i._stat=0,i.JCParent=[],i._onCompiled=[],i._onCompiling=[],i.instances=[],n&&i.JCParent.push(n),i}return __extends(i,t),i.prototype.OnNodeLoaded=function(){this.ProcessBinding()},Object.defineProperty(i.prototype,"MainControll",{get:function(){return this.JCParent[0]},enumerable:!0,configurable:!0}),i.Attach=function(t,r){var u=new i(t);return u.Scop=r instanceof n.Scop||r==null?r:new n.ValueScop(r),u.View=t.View,u},i.prototype.getStat=function(){return this._stat},Object.defineProperty(i.prototype,"Stat",{set:function(n){n<=this._stat||(this._stat=n,(n===1||n===2)&&this.processEvent(n))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"processHowEver",{get:function(){return!1},set:function(){},enumerable:!0,configurable:!0}),i.__feilds__=function(){return[i.DPView]},Object.defineProperty(i.prototype,"View",{get:function(){return this.get(i.DPView)},set:function(n){this.set(i.DPView,n)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"OnCompiled",{set:function(n){this._stat>1?n.Invoke.call(n.Owner,this):this._onCompiled.push(n)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"OnCompiling",{set:function(n){this._stat>0?n.Invoke.call(n.Owner,this):this._onCompiling.push(n)},enumerable:!0,configurable:!0}),i.prototype.ViewChanged=function(n){var t=n._new,i=n._old;t!==i&&(i&&(this.unlistenForNodeInsertion(i),i.removeAttribute("controlled")),t!=null)&&(t.setAttribute("controlled",""),this.processHowEver||this.implemented(t)?(this.Stat=0,this.ProcessBinding()):this.listenForNodeInsertion(t))},i.prototype.unlistenForNodeInsertion=function(n,t){t||this.PDispose();ut.RemoveListener(n)},i.prototype.listenForNodeInsertion=function(n){ut.OnNodeInserted(this,n)},i.prototype.implemented=function(n){return document.body.contains(n)},i.prototype.handleEvent=function(n){var t=this.View;n.srcElement==n.target&&n.currentTarget==t&&(n.preventDefault(),this.unlistenForNodeInsertion(t,!0),this.ProcessBinding(n))},i.prototype.ProcessBinding=function(){this._stat||c.Dispatcher.Push(i.explorerJob,[this])},i.pb=function(n){if(!n._stat){n.Stat=1;var t=rt.Tree.Root(null,n.Scop,n.CurrentControl,n);o.TryCatch(n,n.ParseBinding,void 0,[t.New(n.View)]);n.Stat=2}},Object.defineProperty(i.prototype,"CurrentControl",{get:function(){return this.JCParent[this.JCParent.length-1]},enumerable:!0,configurable:!0}),i.prototype.CompileChild=function(n,t,i){this.JCParent.push(i);var r=rt.Tree.Root(null,t,i,this),u=this.ParseBinding(r.New(n));return this.JCParent.pop(),u},i.prototype.ParseBinding=function(n){return rt.MyClass.ParseBinding(n)},i.prototype.processEvent=function(n){var r=n===1?this._onCompiling:this._onCompiled,u=r.slice(),t,i;for(r.length=0,t=0;t<u.length;t++)i=u[t],o.TryCatch(i.Owner,i.Invoke,void 0,[this])},i.prototype.PDispose=function(){var u=this.View,t,n,i,r;for(u!=null&&this.unlistenForNodeInsertion(u),t=0,n=this.instances[0];t<this.instances.length;++t,n=this.instances[t]){for(n.IsNew&&n.Scop.Dispose(),i=0,r=n.Jobs[0];i<n.Jobs.length;i++,r=n.Jobs[i])r.Dispose();n.Jobs=null;n.Scop=null}this.Stat=0;this.instances.length=0},i.prototype.Dispose=function(){var n=this.OnDispose();n!==null&&(this.PDispose(),t.prototype.Dispose.call(this),n||(this.DisposingStat=2))},i.DPView=n.DObject.CreateField("View",HTMLElement,null,function(n){return n.__this.ViewChanged(n)},function(n){return n.__this.PDispose()}),i.explorerJob=c.Dispatcher.cretaeJob(i.pb,[null],null,!1),i}(e);n.Controller=d}(e=t.bind||(t.bind={})),function(n){var o=function(){function n(n,t,i){this.source=n;this.getParent=t;this.dic=new s.Dictionary("nodes");this.OnChange=new e.EventListener(this.source);this.OnChange.On=i;this.Reset()}return n.prototype.Remove=function(n){this.OnRemove(n)&&this.source.Remove(n)},n.prototype.Add=function(n){this.OnAdd(n);this.source.Add(n)},n.prototype.Clear=function(){this.OnClear();this.source.Clear()},n.prototype.Reset=function(){var t,n;for(this.OnClear(),t=this.source.AsList(),n=0;n<t.length;n++)this.OnAdd(t[n])},n.prototype.OnAdd=function(n){var t=this.getParent(n),i,r=this.dic.GetOrAdd(n,{children:[],Value:n,Parent:null,get Depth(){return this._depth?this._depth:this._depth=this.Parent?this.Prent.Depth+1:0}});t&&((i=this.dic.GetOrAdd(t,{children:[],Value:t,Parent:null,get Depth(){return this._depth?this._depth:this._depth=this.Parent?this.Prent.Depth+1:0}})).children.push(r),r.Parent=i);this.OnChange.Invoke(this.source,[i,r,!0])},n.prototype.getNodes=function(){return this.dic.getValues()},n.prototype.getBases=function(){for(var i=[],t=this.dic.getValues(),n=0;n<t.length;n++)t[n].Parent==null&&i.push(t[n]);return i},n.prototype.OnRemove=function(n){var t=this.dic.Get(n),u=this.getParent(n),i,r;if(t){if(t.children.length>0)return!1;u&&(i=this.dic.Get(u),r=i.children.indexOf(t),r>=0&&i.children.splice(r,1))}return this.OnChange.Invoke(this.source,[i,t,!1]),!0},n.prototype.OnClear=function(){this.OnChange.Invoke(this.source,[]);this.dic.Clear()},n}(),r,u,t,f,i;n.Tree=o;r=function(){function n(n){this.Ref=n}return n}();n.RemoveRef=r;u=function(){function n(n,t,i,r,u){this.oldItem=n;this.newItem=t;this.startIndex=i;this.event=r;this.collection=u}return n.prototype.Dispose=function(){this.oldItem=null;this.newItem=null;this.startIndex=null;this.event=null},Object.defineProperty(n,"ResetEvent",{get:function(){return this._r||(this._r=new n(null,null,0,s.CollectionEvent.Reset,[]))},enumerable:!0,configurable:!0}),n}();n.ListEventArgs=u;t=function(n){function t(){var t=n.call(this)||this;return t._store=[],t}return __extends(t,n),Object.defineProperty(t.prototype,"Patent",{get:function(){return this._patent},set:function(n){var t,r,i,u;if(typeof n=="string"&&(t=this.convertFromString(n)),t=n,t){if(this._patent&&t.equals(this._patent))return}else if(this._patent){if(this._patent.equals(null))return}else return;for(this._patent=t,r=this._store,i=0;i<r.length;i++)u=r[i],u.callback(this,u.data)},enumerable:!0,configurable:!0}),t.prototype.OnChanged=function(n,t,r){var u=new i(n,t,r,Date.now());return this._store.push(u),u.id},t.prototype.OffChanged=function(n){var u,f,i,t,r;if(typeof n=="string")for(u=n,i=this._store,t=i.length-1;t>=0;t--)r=i[t],r.name==u&&i.splice(t,1);else if(typeof n=="number")for(f=n,i=this._store,t=i.length-1;t>=0;t--)if(r=i[t],r.id==f){i.splice(t,1);return}},t.prototype._ismath=function(n){for(var t=0;t<n.length;t++)if(n[t].indexOf(this._patent)!==-1)return!0;return!1},t}(e.DObject);n.Filter=t;f=function(n){function t(t){var i=n.call(this)||this;return i._isMatch=t,i}return __extends(t,n),t.prototype.IsMatch=function(n,t){return this._isMatch==null?!0:this._isMatch(this._patent,t)},t.prototype.convertFromString=function(n){return n},t.prototype.Begin=function(){},t}(t);n.CostumeFilter=f;i=function(){function n(n,t,i,r){this.callback=n;this.data=t;this.name=i;this.id=r;r==void 0&&(r=Date.now())}return n}();n.filterCallback=i}(et=t.utils||(t.utils={})),function(n){var t,r,l,f,v,c,y,p,u;(function(n){n[n.Added=0]="Added";n[n.Removed=1]="Removed";n[n.Replace=2]="Replace";n[n.Cleared=3]="Cleared";n[n.Reset=4]="Reset";n[n.Setted=5]="Setted"})(t=n.CollectionEvent||(n.CollectionEvent={}));r=function(n){function r(t,i){var r=n.call(this)||this,u,f;if(r.argType=t,r._list=[],r._changed=[],r._changing=[],i&&i.length)for(u=0,f=i.length;u<f;u++)r._list.push(i[u]);return r.UCount(),r}return __extends(r,n),r.__fields__=function(){return[r.DPCount]},r.prototype.UCount=function(){this.set(r.DPCount,this._list.length)},Object.defineProperty(r.prototype,"ArgType",{get:function(){return this.argType},enumerable:!0,configurable:!0}),r.prototype.GetType=function(){return h.GenericType.GetType(this.constructor,[this.argType])},r.prototype.AsList=function(){return this._list},r.prototype.Order=function(n){for(var r,f,t=this._list,u=t.length,i=0;i<u;i++)for(r=i+1;r<u;r++)n(t[i],t[r])>0&&(f=t[r],t[r]=t[i],t[i]=f)},r.prototype.OrderBy=function(n){var i=this._list.sort(n);this.OnChanged(null,0,t.Reset,null,i)},r.prototype.Filtred=function(n){var t=new f(this.argType);return t.Filter=n,t.Source=this,t},r.prototype.Set=function(n,i){if(n<0||this._list.length<=n)return!1;var r=this._list[n];if(r===i)return!0;this._list[n]=i;this.OnChanged(i,n,t.Setted,r)},r.prototype.Get=function(n){return n<0?null:this._list.length<=n?null:this._list[n]},r.prototype.Insert=function(n,i){if(!this._isFrozen)return n>=0&&n<=this._list.length?(this._list.splice(n,0,i),this.OnChanged(i,n,t.Added,null),!0):!1},r.prototype.Add=function(n){if(!this._isFrozen){if(n==null)throw"NullArgument detected";return this._list.push(n),this.OnChanged(n,this._list.length-1,t.Added,null),this}},r.prototype.AddRange=function(n){if(!this._isFrozen)for(var t=0;t<n.length;t++)this.Add(n[t])},r.prototype.CheckIndex=function(n){return n>=0&&n<this._list.length},r.prototype.Remove=function(n){if(!this._isFrozen)return typeof n!="number"&&(n=this.IndexOf(n)),this.RemoveAt(n)},r.prototype.RemoveAt=function(n){if(!this._isFrozen&&typeof n=="number"){if(this.CheckIndex(n)){var i=this._list[n];return this._list.splice(n,1),this.OnChanged(i,n,t.Removed,i),!0}return!1}},r.prototype.Clear=function(){if(!this._isFrozen){var n=this._list.length;n>0&&this.OnChanged(null,0,t.Cleared,null,this._list.splice(0,this._list.length))}},Object.defineProperty(r.prototype,"Count",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),r.prototype.IndexOf=function(n){return this._list.indexOf(n)},Object.defineProperty(r.prototype,"Listen",{set:function(n){this._changed.push(n)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Unlisten",{set:function(n){var t=this._changed.indexOf(n);t<0||this._changed.splice(t,1)},enumerable:!0,configurable:!0}),r.prototype.OnChanged=function(n,t,i,r,u){var o=new et.ListEventArgs(r,n,t,i,u),s=this._changed.length,e,f;for(this.UCount(),e=0;e<s;e++)f=this._changed[e],typeof f=="function"?f(o):f.Invoke.call(f.Owner,o)},r.prototype.getArgType=function(n){var t=this.ArgType,r;return t!=null?t:(r=n.__argtype__,t=r==undefined?Object:i.context.GetType(r),t==undefined?this.argType==undefined?Object:this.argType:t)},r.prototype.ToJson=function(t,r){var u,o,s,f,e;if(r=r==undefined?t.getJson(this):r,u=t.getJson(this),r.valid)return r.ref;for(u=n.prototype.ToJson.call(this,t,r),r.valid=!0,o=[],s=this._list,f=0;f<s.length;f++)e=s[f],e=t.ToJson(e),o.push(e);return u.__list__=o,u.__argtype__=i.context.NameOf(this.argType),u},r.prototype.FromJson=function(t,i,u){var s=t.__list__||[],h,f,o,e;for(this._list=new Array(0),h=this.argType=this.getArgType(t),f=0;f<s.length;f++)(o=s[f],o!==undefined)&&(e=r.getType(o),e===undefined&&(e=this.argType),i.FromJson(o,e===undefined?h:e,new a.LPath(this,f)));return n.prototype.FromJson.call(this,t,i,u),this.OnDeserialize(this._list),t!=null&&t.IsFrozen&&this.Freeze(),this},r.prototype.OnDeserialize=function(){},r.getType=function(n){var t=n.__type__;return t==undefined?undefined:i.context.GetType(t)},r.GenType=function(n){return h.GenericType.GetType(this,[n])},r.DPCount=r.CreateField("Count",Number,0,null,null,2),r}(e.DObject);n.List=r;l=function(n){function i(t,i){var r=n.call(this)||this;return r.Name=t,r.ReadOnly=i,r.keys=[],r.values=[],r._changed=[],i=i==null?!0:!1,r}return __extends(i,n),i.prototype.GetKeyAt=function(n){return this.keys[n]},i.prototype.GetValueAt=function(n){return this.values[n]},Object.defineProperty(i.prototype,"Count",{get:function(){return this.keys.length},enumerable:!0,configurable:!0}),i.prototype.Clear=function(){this.keys.length=0;this.values.length=0;this.OnChanged(null,null,t.Cleared,null)},i.prototype.IndexOf=function(n,t){return this.keys.indexOf(n,t)},i.prototype.IndexOfValue=function(n,t){return this.values.indexOf(n,t)},i.prototype.Set=function(n,t){var i=this.keys.indexOf(n);if(i===-1)i=this.keys.length,this.keys.push(n);else if(this.ReadOnly){if(this.values[i]===t)return;throw"key is exist";}this.values[i]=t},i.prototype.Remove=function(n){var t=this.keys.indexOf(n),i;return t===-1?undefined:(i=this.values[t],this.values.splice(t,1),this.keys.splice(t,1),i)},i.prototype.RemoveAllValues=function(n){var i=[],t;do{if(t=this.values.indexOf(n,t),t===-1)return i;i.push(this.keys[t]);this.values.splice(t,1);this.keys.splice(t,1)}while(1)},i.prototype.RemoveAt=function(n){if(n<this.keys.length&&n>=0){var t={Key:this.keys[n],Value:this.values[n]};return this.values.splice(n,1),this.keys.splice(n,1),t}return undefined},i.prototype.getValues=function(){return this.values},i.prototype.Get=function(n){var t=this.keys.indexOf(n);return t===-1?undefined:this.values[t]},i.prototype.GetOrAdd=function(n,t){var i=this.keys.indexOf(n);return i!==-1?this.values[i]:(this.keys.push(n),this.values.push(t),t)},i.prototype.GetOrCreate=function(n,t,i){var u=this.keys.indexOf(n),r;return u!==-1?this.values[u]:(r=t(n,i),this.keys.push(n),this.values.push(r),r)},i.prototype.GetKeyOf=function(n){var t=this.values.indexOf(n);return t===-1?undefined:this.keys[t]},Object.defineProperty(i.prototype,"Listen",{set:function(n){this._changed.push(n)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Unlisten",{set:function(n){var t=this._changed.indexOf(n);t<0||this._changed.splice(t,1)},enumerable:!0,configurable:!0}),i.prototype.OnChanged=function(n,t,i,r){for(var f,e=new et.ListEventArgs(r,n,t,i),o=this._changed.length,u=0;u<o;u++)f=this._changed[u],f(e)},i}(e.DObject);n.Dictionary=l;f=function(n){function i(t){var i=n.call(this,t)||this;return i._fid=null,i.sicd={Owner:i,Invoke:i.sourceItemChanged},i}return __extends(i,n),Object.defineProperty(i.prototype,"Source",{get:function(){return this.get(i.DPSource)},set:function(n){this.set(i.DPSource,n)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Filter",{get:function(){return this.get(i.DPFilter)},set:function(n){this.set(i.DPFilter,n)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"MaxResult",{get:function(){return this.get(i.DPMaxResult)},set:function(n){this.set(i.DPMaxResult,n)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Shift",{get:function(){return this.get(i.DPShift)},set:function(n){this.set(i.DPShift,n)},enumerable:!0,configurable:!0}),i.__fields__=function(){return[i.DPFilter,i.DPMaxResult,i.DPShift,i.DPSource]},i.prototype.filterChanged=function(n){n._old&&n._old.OffChanged(this._fid);n._new&&(this._fid=n._new.OnChanged(i.patentChanged,this));this.Reset()},i.prototype.sourceChanged=function(n){n._old&&(n._old.Unlisten=this.sicd);n._new&&(n._new.Listen=this.sicd);this.Reset()},i.prototype.MaxResultChanged=function(){this.Reset()},i.New=function(n,t,r){var u=new i(n==null?r:n.ArgType);return u.Filter=t,u.Source=n,u},i.patentChanged=function(n,t){t.Reset()},i.prototype.sourceItemChanged=function(i){var r,u;switch(i.event){case t.Added:if(this.MaxResult<=this.Count)return;this.isMatch(i.startIndex,i.newItem)&&n.prototype.Add.call(this,i.newItem);return;case t.Cleared:return n.prototype.Clear.call(this);case t.Removed:n.prototype.Remove.call(this,i.oldItem);return;case t.Replace:r=this.IndexOf(i.oldItem);u=this.isMatch(i.startIndex,i.newItem);u?r==-1?n.prototype.Add.call(this,i.newItem):this.Set(r,i.newItem):r!=-1&&n.prototype.RemoveAt.call(this,r);return;case t.Reset:return this.Reset();case t.Setted:r=this.IndexOf(i.oldItem);u=this.isMatch(i.startIndex,i.newItem);u?r==-1?n.prototype.Add.call(this,i.newItem):n.prototype.Set.call(this,r,i.newItem):r!==-1&&n.prototype.RemoveAt.call(this,r);return}},i.prototype.isMatch=function(n,t){var i=this.Filter;return i==null?!0:i.IsMatch(n,t)},i.prototype.Reset=function(){var t,i,o,r,f;if(n.prototype.Clear.call(this),t=this.Source,t!=null){var u=this.Filter,e=u==null,s=this.MaxResult;if(!e)if(u.Begin(this.Shift,this.MaxResult))n.prototype.AddRange.call(this,t.AsList());else for(i=0,o=t.Count;i<o&&s>0;i++)if(r=t.Get(i),e)n.prototype.Add.call(this,r);else{if(f=u.IsMatch(i,r),f===null)break;f&&n.prototype.Add.call(this,r)}}},i.DPSource=e.DObject.CreateField("Source",r,null,function(n){n.__this.sourceChanged(n)}),i.DPFilter=e.DObject.CreateField("Filter",et.Filter,null,function(n){n.__this.filterChanged(n)}),i.DPMaxResult=e.DObject.CreateField("MaxResult",Number,Infinity,function(n){n.__this.MaxResultChanged(n)}),i.DPShift=e.DObject.CreateField("Shift",Number,0,function(n){n.__this.MaxResultChanged(n)}),i}(r);n.ExList=f;v=function(n){function i(t,i,r){var u=n.call(this,t)||this;return u.converter=i,u.stat=r,u.sli={Owner:u,Invoke:u.OnSourceChanged},u}return __extends(i,n),i.__fields__=function(){return[this.DPSource]},i.prototype.SourceChanged=function(n){var t=n._old,i=n._new;t&&(t.Unlisten=this.sli);i&&(i.Listen=this.sli);this.Reset()},i.prototype.OnSourceChanged=function(i){var r;this._internal=!0;try{switch(i.event){case t.Added:r=this.converter.ConvertA2B(this,i.startIndex,i.newItem,this.stat);n.prototype.Add.call(this,r);break;case t.Cleared:n.prototype.Clear.call(this);break;case t.Removed:n.prototype.Remove.call(this,i.startIndex);break;case t.Replace:r=this.converter.ConvertA2B(this,i.startIndex,i.newItem,this.stat);n.prototype.Set.call(this,i.startIndex,r);break;case t.Reset:this.Reset()}}catch(i){}this._internal=!1},i.prototype.Reset=function(){var t,i,r,u;if(n.prototype.Clear.call(this),t=this.Source,t)for(t=t.AsList(),i=0,r=t.length;i<r;i++)u=this.converter.ConvertA2B(this,i,t[i],this.stat),n.prototype.Add.call(this,u)},i.prototype.Add=function(t){if(this._internal)return n.prototype.Add.call(this,t);this.Source.Add(this.converter.ConvertB2A(this,this._list.length,t,this.stat))},i.prototype.Remove=function(t){if(this._internal)return n.prototype.Remove.call(this,t);this.Source.Remove(this.converter.ConvertB2A(this,this._list.indexOf(t),t,this.stat))},i.prototype.Insert=function(t,i){if(this._internal)return n.prototype.Insert.call(this,t,i);this.Source.Insert(t,this.converter.ConvertB2A(this,t,i,this.stat))},i.prototype.Clear=function(){if(this._internal)return n.prototype.Clear.call(this);this.Source.Clear()},i.prototype.Order=function(){},i.prototype.OrderBy=function(){},i.prototype.Set=function(t,i){if(this._internal)return n.prototype.Set.call(this,t,i);this.Source.Set(t,this.converter.ConvertB2A(this,t,i,this.stat))},i.DPSource=e.DObject.CreateField("Source",r,null,i.prototype.SourceChanged),i}(r);n.TransList=v;c=function(){function n(n){this.DataContext=n}return n.prototype.GetType=function(){return n},Object.defineProperty(n.prototype,"DataContext",{get:function(){return this._dataContext},set:function(n){if(n!=this._dataContext){var t=this._dataContext;t!=null&&(t.Unlisten=this.initChanged);n!=null&&(n.Listen=this.initChanged);this._dataContext=n;this.OnSourceInitialized(t,n)}},enumerable:!0,configurable:!0}),n.prototype.initChanged=function(n){switch(n.event){case s.CollectionEvent.Added:this.OnItemAdded(n.newItem,n.startIndex);break;case s.CollectionEvent.Removed:this.OnItemRemoved(n.oldItem,n.startIndex);break;case s.CollectionEvent.Cleared:this.OnSourceCleared();break;case s.CollectionEvent.Reset:this.OnSourceReset();break;case s.CollectionEvent.Replace:this.OnSourceReplace(n.oldItem,n.newItem,n.startIndex)}},n}();n.Binding=c;y=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.GetType=function(){return t},Object.defineProperty(t.prototype,"RendredList",{get:function(){return this._rendredList==null&&(this._rendredList=new s.List(Object,[])),this._rendredList},enumerable:!0,configurable:!0}),t.prototype.OnItemAdded=function(n,t){this.RendredList.Insert(t,this.Render(n))},t.prototype.OnItemRemoved=function(n,t){this.RendredList.RemoveAt(t)},t.prototype.OnSourceCleared=function(){this.RendredList.Clear()},t.prototype.OnSourceInitialized=function(n,t){var r,i,u;if(t!=null)for(r=t.Count,this.RendredList.Clear(),i=0;i<r;i++)u=t.Count,this._rendredList.Add(this.Render(t.Get(u)))},t}(c);n.Render=y;p=function(n){function t(t){var i=n.call(this)||this;if(i.quee=[],i._isExecuting=!1,!i.handler||!i.handler.Invoke)throw"argument (handler) null";return i.handler={Invoke:t.Invoke,Owner:t.Owner},Object.preventExtensions(i),i}return __extends(t,n),t.prototype.push=function(n){this.quee.push(n);this._isExecuting||this.EndOperation(void 0)},t.prototype.EndOperation=function(n){if(u.Get(this)!==n)throw new Error("Unknown frame");if(this.quee.length){this._isExecuting=!0;this.CurrentData=this.quee.shift();var n={data:this.CurrentData,quee:this};u.Set(this,n);o.TryCatch(this.handler.Owner||this,this.handler.Invoke,function(n,t){t.quee.EndOperation(t)},[n])}else this._isExecuting=!1,this.CurrentData=void 0,u.Set(this,void 0)},__decorate([it.property(Object),__metadata("design:type",Object)],t.prototype,"CurrentData",void 0),t}(e.DObject);n.SyncQuee=p;u=new s.Dictionary("quee_sync_frame")}(s=t.collection||(t.collection={})),function(t){var o=function(){function n(n){this.Name=n.toLowerCase()}return n}(),h,v,r,f,u,l,a;t.ITemplate=o;h=function(n){function t(t,i,r){var u=n.call(this,i)||this;if(t==null)throw"url is null";if(i==null)throw"category is null";return(u._Url=t,r==undefined)?u:(u.Shadow=r,u)}return __extends(t,n),Object.defineProperty(t.prototype,"Url",{get:function(){return this._Url},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Shadow",{get:function(){return this._Shadow},set:function(n){if(n!=null&&!(n instanceof HTMLElement))throw"shadow is not HTMLElement";this._Shadow=n},enumerable:!0,configurable:!0}),t.prototype.Create=function(){var n=this._Shadow;return n==null?null:n.content.firstElementChild.cloneNode(!0)},t.prototype.Load=function(){},t}(o);t.iTemplate=h,function(n){n[n.Desktop=0]="Desktop";n[n.Mobile=1]="Mobile";n[n.Tablete=2]="Tablete"}(v=t.Devices||(t.Devices={}));r=function(){function n(){}return n}();t.NULL=r;f=new s.Dictionary("tfolders");u=function(){function n(n,t){this.Subs={};this.Items={};this.Name=n.toLowerCase();this.DataType=t}return Object.defineProperty(n.prototype,"DataType",{get:function(){return this._dataType},set:function(n){var i,t;if(n!=this._dataType&&n){if(this._dataType!=r&&typeof this._dataType=="function"&&n)throw"Conflit types";t=f.Get(this._dataType||r);t&&(i=t.IndexOf(this),i!==-1&&t.RemoveAt(i));t=f.Get(n||r);t||f.Set(n||r,t=new s.List(Object));t.Add(this);this._dataType=n}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Root",{get:function(){for(var n=this;n.Parent;)n=n.Parent;return n},enumerable:!0,configurable:!0}),n.prototype.Get=function(n){n=typeof n=="string"?n.toLowerCase().split("."):n;var t=this.GetFoder(n,n.length-1);return t&&t.Items[n[n.length-1]]},n.prototype.GetFoder=function(n,t){var i,r,t,u;if(n=n||"",typeof n=="string"){if(n=n.trim().toLowerCase(),n=="")return this;n=n.split(".")}for(i=this,r=0,t=t||n.length-1;r<t;r++){if(u=n[r],!i)return undefined;switch(u){case"":case".":continue;case"..":i=i.Parent;break;case"/":i=i.Root;default:i=i.Subs[u]}}return i},n.prototype.CreateFolder=function(n,t){var i,r,f,u;for(n=n||"",typeof n=="string"&&(n=n.trim().toLowerCase(),n==""&&(this.DataType=t),n=n.split(".")),i=this,r=0,f=n.length;r<f;r++){if(u=n[r],!i)return undefined;switch(u){case"":case".":continue;case"..":i=i.Parent||i;break;case"/":i=i.Root;default:i=i.Subs[u]||i.AddFolder(u,r==f-1?t:undefined)}}return i},n.prototype.Add=function(n){return this.Subs||(this.Subs={}),this.Items[n.Name]=n,this.Default||(this.Default=n),this},n.prototype.AddFolder=function(t,i){var r=this.Subs[t=t.toLowerCase()];if(r){if(r.DataType){if(i&&r.DataType!=i)throw"Conflit types";return r}return r.DataType=i,r}return this.Subs[t]=r=new n(t,i),r},n.prototype.registerTemplates=function(n,t,i){for(var u,f=n.getAttribute("name"),e=n.hasAttribute("type")?i(n.getAttribute("type")):undefined,r=0;r<n.children.length;r++)u=n.children.item(r),this.Process(u,t,i);return this},n.prototype.registerTemplate=function(n,i,r){var f=r||n.getAttribute("name"),e,o,u,s,h;if(f==null){console.error("template must have a name \r\nfrom :"+i,n);return}if(n.children.length>1){for(e=document.createElement("div"),o=n.children,u=0;u<o.length;u++)s=o.item(u),s.remove(),e.appendChild(s);n.appendChild(e)}return this.Add(h=new t.iTemplate(i+"#"+r+"+"+f,f,n)),n.hasAttribute("default")&&(this.Default=h),this},n.Get=function(n){return this.Root.Get(n)},n.GetByType=function(n){var t=f.Get(n||r);return t&&t.Count>0&&t.Get(0)},n.GetByName=function(n){var t=this.Root;for(var i in t.Subs)if(i==n)return t.Subs[i];return null},n.Add=function(n,t,i){var r=this.Root.CreateFolder("templates",e.DObject);return r.registerTemplate(n,t,i)},n.New=function(t,i){return new n(t,i)},n.prototype.Register=function(n,t,i,r){var u=this.CreateFolder(n,undefined);return u.registerTemplate(t,i,r)},n.prototype.Process=function(n,t,i){var f,r,u;switch(n.tagName){case"TEMPLATE":return this.registerTemplate(n,t);case"DESCRIPTOR":case"TEMPLATES":return r=n.getAttribute("name"),f=n.hasAttribute("type")?i(n.getAttribute("type")):undefined,this.CreateFolder(r,f).registerTemplates(n,t,i);case"IMPORT":if(r=n.getAttribute("name"),!r)return;u=this.GetFoder(n.getAttribute("from")||"");u.Subs[r]=u;return;case"DEBUGGER":stop();return;case"REQUIRE":case"DEBUGGER":return;default:console.error("Tag {"+n.tagName+"} Unresolved")}},n.Root=new n("root",function(){}),n}();t.MvcDescriptor=u;l=function(){function r(n){if(this.require=n,this._system=new s.List(t.MvcDescriptor),this._pending=0,this.templatesDescrpt=this.getDescriptor("templates",e.DObject),n==null)throw"require argument is null";if(tt)throw"App cannot have more than initializer";tt=this;this.Init()}return Object.defineProperty(r,"Instances",{get:function(){return tt||(tt=new r(n))},enumerable:!0,configurable:!0}),r.prototype.Init=function(){},r.prototype.Dispose=function(){},Object.defineProperty(r.prototype,"System",{get:function(){return this._system},enumerable:!0,configurable:!0}),r.prototype.Add=function(n,t){this.pending++;(t||this.require)("template|"+n.Url,r.gonsuccess,r.gonerror,{_this:this,tmpl:n})},r.SetTypeResolver=function(n,t){r.typeResolvers[n]=t},Object.defineProperty(r.prototype,"pending",{get:function(){return this._pending},set:function(n){if(n<0)throw"pending cannot be less then 0";if(n!==this._pending&&(this._pending=n,n===0))r.onfinish(this)},enumerable:!0,configurable:!0}),r.gonsuccess=function(n){var t=this,i=t._this;try{r.MakeAsParsed(n);i.ExcecuteTemplate(t.tmpl.Url,n.html);t.tmpl.OnSuccess&&c.Dispatcher.call(t.tmpl,t.tmpl.OnSuccess,t._this)}catch(u){}i.pending--},r.gonerror=function(){var n=this;console.error(" Group of templates ["+n.tmpl.Url+"]: error downloading");n.tmpl&&n.tmpl.OnError&&c.Dispatcher.call(n.tmpl,n.tmpl.OnError,n._this);n._this.pending--},r.onsuccess=function(n){var t=this,u=t.tmpl,i=t._this;if(i.pending--,u.Shadow=r.htmlToElements(n),i.pending===0)r.onfinish(t._this)},r.onerror=function(){var n=this;if(n._this.pending--,console.error("template ["+n.tmpl.Url+"] error downloading"),n.tmpl.Shadow=r.html2Template("<error>Error Downloading Template<\/error>"),n._this.pending===0)r.onfinish(n._this)},r.html2Template=function(n){var t=document.createElement("template");return t.innerHTML=n,t},r.htmlToElements=function(n){var t=document.createElement("div");return t.innerHTML=n,t},r.prototype.then=function(n){if(this.pending<=0)return n(this);r.callbacks.push(n)},r.then=function(n){r.callbacks.push(n)},r.prototype.onfinish=function(){for(var n=r.callbacks;n.length;)n.shift()(this)},r.onfinish=function(n){for(var t=0;t<r.callbacks.length;t++)r.callbacks[t](n)},r.Get=function(n){for(var i,r=tt.System,u=r.Count,t=0;t<u;t++)if(i=r.Get(t),i.DataType==n)return i;return null},r.prototype.getDescriptor=function(n,t){if(n=n.toLowerCase(),!n&&!t)return this.templatesDescrpt;if(n)var i=u.GetByName(n);return!i&&t&&(i=u.GetByType(t)),i&&i.Name.toLowerCase()!=n.toLowerCase()&&(i=null),i?(i.Name!==n.toLowerCase()||i.DataType!==t)&&console.log("Conflit with others template: Name("+n+","+i.Name+")==Type("+t+","+i.DataType+")"):i=u.Root.AddFolder(n,t),i},r.prototype.ExcecuteTemplate=function(n,t,r,f){function s(n){var t=o[n=n];if(t!=null)return t;if(r&&(t=r(n)),(t==null||!(t instanceof Function))&&(t=f&&f.context&&f.context.GetType(n)||i.context.GetType(n),t==undefined||!(t instanceof Function)))throw"type "+n+" unresolved";return o[n]=t,t}var o={},h=this.getDescriptor("templates",e.DObject);u.Root.Process(t,n,s)},r.Register=function(n){var t=n.exports;this.parsed.indexOf(t)===-1&&(t.html.hasAttribute("private")||this.Instances.ExcecuteTemplate(n.url.toString(),t.html,null,t))},r.MakeAsParsed=function(n){this.parsed.push(n)},r.typeResolvers={},r.callbacks=[],r.parsed=[],r}();t.Initializer=l;a=function(){function n(t){if(this._name="",this._for="",n._store===undefined&&(n._store=new s.List(n)),n.fromInside==!0){if(this._view=t,this._name=t.getAttribute("name"),this._for=t.getAttribute("for"),this._name==null)throw"name is null";n._store.Add(this)}else throw"Access violatile";}return Object.defineProperty(n.prototype,"forType",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"View",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"For",{get:function(){return this._for},enumerable:!0,configurable:!0}),n.getTemplates=function(t){for(var r,u=n._store,f=[],i=u.Count-1;i>=0;i--)r=u.Get(i),r.forType==t&&f.push(r);return f},n.LoadTemplate=function(t,i){var r=n.TempplatesPath+t;n.getWebRequest().Download(new nt.RequestUrl(r,i),null)},n.getWebRequest=function(){if(n._webRequest)return n._webRequest;var i=g.Crypto,t=new nt.WebRequest(i);return t.OnComplete.On=n.OnRecieveTemplates,n._webRequest=t},n.OnRecieveTemplates=function(){var i;if(n.getWebRequest().IsSuccess!=!1){var r=n.getWebRequest(),u=r.Response,t=document.createElement("templates");for(t.innerHTML=u,t=t.firstChild,i=0;i<t.childElementCount;i++)n.createTemplate(t.children.item(i))}},n.createTemplate=function(t){n.fromInside=!0;var i=null;try{i=new n(t)}catch(r){}return n.fromInside=!1,i},n.GetAll=function(t){var r,u,i,f;for(arguments.length==2&&(r=n._store),u=[],i=0;i<r.Count;i++)f=r.Get(i),f._name==t&&u.push(f);return u},n.Get=function(t,i){for(var r,f=n._store,u=0;u<f.Count;u++)if(r=f.Get(u),r._name==t&&i==r._for)return r;return null},n.Foreach=function(t){for(var u,r=n._store,i=r.Count-1;i>=0;i--)if(u=r.Get(i),t(u))return},n.TempplatesPath="./templates/",n.fromInside=!1,n}();t.Template=a}(pt=t.mvc||(t.mvc={})),function(n){function u(n){return n.tokon<=f.Parser.CToken.string}function lt(n){return n==null?1:rt[n]||r[n]}function vt(n){return v[n.Name]?!1:(l(v,n.Name,{value:n,writable:!1,configurable:!1,enumerable:!1}),!0)}function st(n,t,i){var u=n.indexOf(":"),f,e,r,o;return(u==-1?(f=null,e=n):(e=n.substring(0,u),f=n.substring(u+1)),r=v[e],!r)?t:(o=r.CreateNew(t,i&r.BindingMode,f),o.Initialize(),o)}var t=function(t){function i(n){var i=t.call(this)||this;return i._bindingMode=n==null?1:n,i}return __extends(i,t),i.prototype.getScop=function(n,t){return i.getAttribute(this,n.split(/[\s\\\/\.]+/),t)},i.prototype.findScop=function(n){var t=this,i,r;do{i=n.pop();switch(i){case".":continue;case"..":t=t.getParent();break;default:if(r=i.charCodeAt(0),r===36||r===126)throw"optimize your code by delete the first part befor ($|~)";r===64;t=t._scops&&t._scops[i]}}while(n.length>0)},i.prototype.getParent=function(){return this._parent},i.prototype.setParent=function(n){if(n==this._parent)return!0;if(this.canBeParent(n))this._parent=n;else return!1;return!0},i.prototype.canBeParent=function(n){for(var t=n;t&&t!=this;)t=t.getParent();return!t},i.prototype.SetExParent=function(n,t){return this.setParent(n)||this.setParent(t)},i.prototype.findAttribute=function(n){for(var t=this,i=[];t;){if(i.indexOf(t)!=-1)return undefined;if(t._scops&&t._scops.hasOwnProperty(n))return t._scops[n];i.push(t);t=this.getParent()}},i.getAttribute=function(n,t,i){var u,f,r;if(typeof t=="string"&&(t=[t]),!t||t.length==0)return n;if(u=n.findAttribute(t[0]),!u&&!i)return null;for(u&&(n=u,t.shift());t.length;){if(f=t.shift(),r=void 0,n._scops&&n._scops.hasOwnProperty(f))r=n._scops[f];else if(i)n._scops||(n._scops={}),n._scops[f]=r=new a(null),r.setParent(n);else return null;n=r}return n},i.prototype.setAttribute=function(n,t){var i=this.getScop(n,!0);i.Value=t},i.prototype.getAttribute=function(n,t){return i.getAttribute(this,[n],t)},i.__fields__=function(){return[i.DPValue]},Object.defineProperty(i.prototype,"BindingMode",{get:function(){return this._bindingMode},set:function(n){this._bindingMode=n==null?1:n},enumerable:!0,configurable:!0}),i.prototype.valueChanged=function(n,t){t.__this._OnValueChanged(t)},i.prototype._OnValueChanged_=function(n){return this._OnValueChanged(n)},i.Create=function(n,t,i,r){var u,f,e,o;if(i=i==null?1:i,u=n.split("|"),u.length===1)return this.GenerateScop(n,t,i,r);for(f=0;f<u.length;f+=2)e=u[f],o=u[f+1],t=e.length===0?t:this.GenerateScop(e,t,i,r),t=o.length==0?t:st(o,t,i||3)||t;return t},i.BuildScop=function(t,r,u,e){var o=r,h,s,l,a;switch(t.tokon){case"keyword":o=t.resut==="this"?e&&e.MainControll:t.resut==="window"?n.windowScop:r;break;case"anonymousscop":o=it.UnRegister(t.resut);o.setParent(r);break;case"bindscope":o=new n.Bind(t.resut,o,u);break;case"namedscop":o=c.Create(t.resut,null,u);break;case"parentscop":for(h=t.resut-1;h>=0;h--)o=o&&o.getParent();break;case"subscop":o=i.getAttribute(o,t.resut,!0);break;case"typedscope":o=new d(o,t.resut,u);o.setParent(r);break;case f.Parser.CToken.functionCall:o=new p(t.resut,r,e);o.setParent(r);break;case f.Parser.CToken.arrayCall:o=new w(t.resut,r,e);o.setParent(r);break;case f.Parser.CToken.path:for(s=0,l=t.resut;s<l.length;s++)a=l[s],o=this.BuildScop(a,o,u,e);break;default:return null}return o},i.GenerateScop=function(n,t,r,u){if(n==""||n==null||n==".")return t;var e=f.Parser.parseExpression(n);return e.success?i.BuildScop(e,t,r,u):(console.error("bind path : "+n),null)},i.GetStringScop=function(n,t,i){return y.GetStringScop(n,t,i)},i.prototype.AddJob=function(t,i){var r=new n.JobInstance(this,t,i);return this.__jobs__?this.__jobs__.push(r):this.__jobs__=[r],t.OnInitialize!=null&&t.OnInitialize(r,null),r},i.prototype.Dispose=function(){var r=this.OnDispose(),n,i;if(r!==null){if(this.setParent(null),this.__jobs__){for(n=0;n<this.__jobs__.length;n++)(i=this.__jobs__[n],i.IsDisposed)||(i.Dispose(),g.Url);this.__jobs__.length=0;this.__jobs__=null}t.prototype.Dispose.call(this);r||(this.DisposingStat=2)}},i.prototype.RegisterJob=function(n){this.__mjobs__||(this.__mjobs__={});this.__mjobs__[n.Name]=n},i.prototype.GetJob=function(n){return this.__mjobs__&&this.__mjobs__[n]},i.prototype.getThis=function(){return this.__Controller__&&this.__Controller__.CurrentControl},Object.defineProperty(i.prototype,"__hasSegments__",{get:function(){return!1},enumerable:!0,configurable:!0}),i.prototype.forEach=function(){},Object.defineProperty(i.prototype,"ParentValue",{get:function(){var n=this.getParent();return n&&n.Value},enumerable:!0,configurable:!0}),i.prototype.WhenIschanged=function(n,t){return this.OnPropertyChanged(i.DPValue,n,t).Dispose},i.prototype.OffIsIchangeing=function(){},i.DPValue=n.DObject.CreateField("Value",Object,void 0,i.prototype._OnValueChanged_),i}(n.DObject),y,p,w,e,c,tt,b,h,it,a,d,rt,ut,ft,at,et,nt,ot,v,r,ht,ct;n.Scop=t;y=function(i){function u(u,f,e){var o=i.call(this,n.BindingMode.SourceToTarget)||this,h,c,s;for(o.template=u,h=0,c=u;h<c.length;h++)(s=c[h],(typeof s)[0]==="o")&&(s.scop=t.GenerateScop(s.Code,f,r.SourceToTarget,e),s.pb=s.scop.OnPropertyChanged(t.DPValue,o.Reset,o));return o.setParent(f),o.Reset(void 0,void 0),o}return __extends(u,i),u.prototype.AttacheTo=function(n){this._dom=n;this._dom&&(this._dom.textContent=this.Value||"")},u.GetStringScop=function(n,t,i){for(var s,e=f.Parser.StringTemplate.Compile(n),r=0,o=e;r<o.length;r++)if(s=o[r],(typeof s)[0]!=="o")continue;else return new u(e,t,i);return n},u.prototype._OnValueChanged=function(n){this._dom&&(this._dom.textContent=n._new||"")},u.prototype.setParent=function(t){var u,r,i;if(!this.canBeParent(t))return!1;for(u=this._parent,u&&this.pb?u.removeEvent(n.Scop.DPValue,this.pb):this.pb=null,this._parent=t,r=0;r<this.template.length;r++)(i=this.template[r],(typeof i)[0]==="o"&&i.scop instanceof n.Bind)&&i.scop&&i.scop.setParent(t);return!0},u.prototype.Reset=function(){for(var n,t=0;t<this.template.length;t++)(n=this.template[t],(typeof n)[0]==="o")&&(n.result=n.scop&&n.scop.Value);this.Value=f.Parser.StringTemplate.GenearteString(this.template)},u.prototype.FromJson=function(){return this},u.prototype.ToJson=function(n,t){return i.prototype.ToJson.call(this,n,t)},u.prototype.Dispose=function(){var u=this.OnDispose(),t,r;if(u!==null){for(this.setParent(null),t=0;t<this.template.length;t++)(r=this.template[t],(typeof r)[0]==="o"&&r.scop instanceof n.Bind)&&r.scop.Dispose();i.prototype.Dispose.call(this);u||(this.DisposingStat=2)}},u}(n.Scop);n.StringScop=y;p=function(n){function i(i,f,e){var o=n.call(this,1)||this,s,h;for(o.caller={scop:t.BuildScop(i.caller,f,r.SourceToTarget,e)},o.caller.pb=o.caller.scop.OnPropertyChanged(t.DPValue,o.Reset,o),o.args=new Array(i.args.length),s=0;s<i.args.length;s++)h=i.args[s],o.args[s]={isConstant:u(h),value:u(h)?h.resut:void 0,scop:u(h)?void 0:t.BuildScop(h,f,r.SourceToTarget,e)},o.args[s].isConstant||(o.args[s].pb=o.args[s].scop.OnPropertyChanged(t.DPValue,o.Reset,o));return o.Reset(),o}return __extends(i,n),i.prototype._OnValueChanged=function(){},i.prototype.Reset=function(){var i=this.caller.scop.Value,r,n,t;if(typeof i!="function"){this.Value=i;return}for(r=new Array(this.args.length),n=0;n<this.args.length;n++)t=this.args[n],r[n]=t.isConstant?t.value:t.value=this.args[n].scop.Value;this.Value=o.TryCatch(this.caller.scop.ParentValue,i,void 0,r)},i}(n.Scop);n.FunctionCallScop=p;w=function(n){function i(i,f,e){var o=n.call(this,1)||this,s;return o.caller={scop:t.BuildScop(i.caller,f,r.SourceToTarget,e)},o.caller.pb=o.caller.scop.OnPropertyChanged(t.DPValue,o.Reset,o),s=i.index,o.index={isConstant:u(s),value:u(s)?s.resut:void 0,scop:u(s)?void 0:t.BuildScop(s,f,r.SourceToTarget,e)},o.index.isConstant||(o.index.pb=o.index.scop.OnPropertyChanged(t.DPValue,o.Reset,o)),o.Reset(),o}return __extends(i,n),i.prototype._OnValueChanged=function(){},i.prototype.Reset=function(){var n=this.caller.scop.Value,t=this.index.isConstant?this.index.value:this.index.scop.Value;this.Value=n instanceof s.List?n.Get(t):n[t]},i}(n.Scop);n.ArrayCallScop=w;e={};c=function(n){function t(t,i){var r=n.call(this,i)||this;if(t.charAt(0)=="$")throw"Name of scop cannot be started with '$' char";if(k.names_scop_fromIn!=!0)throw"Access violatil";return r._name=t,t&&(e[t]=r),k.names_scop_fromIn=!1,r}return __extends(t,n),Object.defineProperty(t.prototype,"Name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t.Get=function(n){return e[n]},t.prototype._OnValueChanged=function(){},t.Create=function(n,i,r){var u=e[n];return u!=null?u:(k.names_scop_fromIn=!0,u=new t(n,r),u.Value=i,u)},t.prototype.Dispose=function(){var t=this.OnDispose();t!==null&&(n.prototype.Dispose.call(this),e[this.Name]=undefined,delete e[this.Name],t||(this.DisposingStat=2))},t}(t);n.NamedScop=c;tt=function(i){function r(t,r,u){var f=i.call(this,u)||this;return f.pb=null,f.observer=new n.Observer(null,[]),f.int=!1,typeof t=="string"&&(t=t.split(".")),f.Path=t,typeof r=="string"&&(r=c.Create(r,undefined)),f.int=!0,f.Parent=r,f.Value=f.observer.Value,(u&1)==1&&(f.observerBinding=f.observer.OnPropertyChanged(n.Observer.DPValue,f.__OnValueChanged,f)),f.int=!1,f}return __extends(r,i),r.__fields__=function(){return[r.DPParent,r.DPPath]},r.prototype.PathChanged=function(n){this.int=!0;this.observer.Path=n._new==null?[]:n._new;this.int=!1},r.ParentChanged=function(n){var i=n.__this,r=n._new,u=n._old;u!=null&&i.pb!=null&&u.removeEvent(t.DPValue,i.pb);r!=null?(i.pb=r.OnPropertyChanged(t.DPValue,i.ParentValueChanged,i),i.observer.Me=r.Value):i.observer.Me=null},r.prototype.Dispose=function(){var r=this.OnDispose();r!==null&&(this.removeEvent(t.DPValue,this.pb),this.observer.removeEvent(n.Observer.DPValue,this.observerBinding),this.observer.Dispose(),this.pb=null,this.observerBinding=null,this.observer=null,i.prototype.Dispose.call(this),r||(this.DisposingStat=2))},r.prototype.ParentValueChanged=function(n,t){this.int=!0;this.observer.Me=t._new;this.int=!1},Object.defineProperty(r.prototype,"Path",{get:function(){return this.get(r.DPPath)},set:function(n){this.set(r.DPPath,n)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Parent",{get:function(){return this.get(r.DPParent)},set:function(n){this.set(r.DPParent,n)},enumerable:!0,configurable:!0}),r.prototype.__OnValueChanged=function(n,t){this.isChanging=!0;this.Value=t._new;this.isChanging=!1},r.prototype.AttributeChanged=function(){},r.prototype._OnValueChanged=function(n){var i,r;if(!this.isChanging&&(this.BindingMode&2)==2&&!this.int){var f=this.observer,u=f.xpath,t=u.length;if(t===0)return;r=u[t-1];i=t===1?f.Me:u[t-2].Value;i&&(r.Property!=null?i.set(r.Property,n._new):i[r.Name]=n._new)}},r.prototype.getParent=function(){return this.get(r.DPParent)},r.prototype.setParent=function(n){if(this.canBeParent(n))this.set(r.DPParent,n);else return!1;return!0},r.prototype.getChildren=function(){return[]},Object.defineProperty(r.prototype,"Values",{get:function(){return this.observer.xpath},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Segments",{get:function(){return this.observer.xpath},enumerable:!0,configurable:!0}),r.prototype.forEach=function(n,t){for(var r=this.observer.xpath,i=r.length-1;i>=0;i--)if(n(r[i].Value,t))return{value:r[i].Value}},Object.defineProperty(r.prototype,"ParentValue",{get:function(){var n=this.observer.xpath,t;return n.length==1?(t=this.getParent(),t&&t.Value):n[n.length-2].Value},enumerable:!0,configurable:!0}),r.DPPath=n.DObject.CreateField("Path",Array,null,r.prototype.PathChanged),r.DPParent=n.DObject.CreateField("Parent",t,null,r.ParentChanged),r}(t);n.Bind=tt;b=-1;h=[],function(n){function t(n){return h[++b]=n,b}function i(n){var t=h[n];return h[n]=undefined,t}function r(n){return h[n]}n.Register=t;n.UnRegister=i;n.Get=r}(it=n.AnonymouseScop||(n.AnonymouseScop={}));a=function(n){function t(t,i){var r=n.call(this,i)||this;return r.Value=t,r}return __extends(t,n),t.prototype._OnValueChanged=function(){},t}(t);n.ValueScop=a;n.windowScop=new a(window,0);d=function(n){function r(t,r,u){var f=n.call(this,u)||this;return f.eq=r.type=="=",f.itself=r.type==":",f.type=i.context.GetType(r.path)||r.type,f.setParent(t),f}return __extends(r,n),r.prototype.getParent=function(){return this.parent},r.prototype.setParent=function(n){if(n!=this.parent)return this.parent&&this.pB&&this.parent.removeEvent(t.DPValue,this.pB),this.pB=n.OnPropertyChanged(t.DPValue,this.OnParentValueChanged,this),this.parent=n,this.reProcess(),!0},r.prototype._OnValueChanged=function(){},r.prototype.OnParentValueChanged=function(){this.reProcess()},r.prototype.reProcess=function(){for(var n=this.parent,t=typeof this.type=="string";n;){if(n.__hasSegments__&&n.forEach(function(n,i){return i.checkType(n,t,!0)},this)!==undefined)return;if(this.checkType(n,t,this.itself))return;n=n.getParent();this.setAttribute}},r.prototype.checkType=function(n,t,i){var r=i?n:n.Value;if(r!=null)if(t){if(r.constructor.name==this.type)return this.Value=r,!0}else if(this.eq?r.constructor===this.type:r instanceof this.type)return this.Value=r,!0},r}(t);n.TypedScop=d;rt={"3":3,"2":2,"1":1,"":0,"false":1,"true":3};ut=function(){function n(n){var i,t,r;for(this.events={},i=n.attributes,t=0;t<i.length;t++)r=i[t].name,r.indexOf("db-")===0?this[r.substr(3)]=i[t].value:r.indexOf("on-")===0&&(this.events[r.substr(3)]=i[t].value);this.twoway&&(this.twoway=lt(this.twoway));this.init=o.TryCatch(JSON,JSON.parse,void 0,[this.init]);this.stop!=undefined&&(typeof stop!==undefined&&stop(),stop())}return n}();n.db=ut;ft=function(){function n(n){this.scopFunction=n}return Object.defineProperty(n.prototype,"Name",{get:function(){return"Todo"},enumerable:!0,configurable:!0}),n.prototype.Todo=function(n,t){var r=this.scopFunction.Value,i;r instanceof Function&&(i=this.scopFunction.getParent(),r.call(i&&i.Value,n,t))},n}();n.Todo=ft;at=function(){function n(n){this.fns=n;n.indexOf("=")==0&&(n=n.substr(1))}return Object.defineProperty(n.prototype,"Name",{get:function(){return"FnTodo"},enumerable:!0,configurable:!0}),n.prototype.Todo=function(n,t){var r=this.fn,i,u;r instanceof Function&&(i=n.Scop,u=i.__Controller__&&i.__Controller__.MainControll,r.call(u,t._old,t._new,i,n,t))},n.register=function(n){var t=g.EvalCode.CompileExpression(n,["ovalue","value","scop","job","event"],function(){stop()},this,!0)},n.fns={},n}();et=function(){function n(n){this.scop=n;this.Name="Events"}return n.prototype.Todo=function(){throw new Error("Method not implemented.");},n.prototype.Register=function(n,t,i,r){this.events||(this.events={});var u=this.events[n],f={scop:i,controller:r,dom:t};u?u.push(f):(this.events[n]=u=[f],t.addEventListener(n,this))},n.prototype.handleEvent=function(n){for(var r,i=this.events[n.type],t=0;t<i.length;t++)r=i[t],o.TryCatch(this,this.exec,void 0,[r,this.scop,n])},n.prototype.exec=function(n,t,i){var u=n.scop,r=u.Value,f;typeof r=="function"?(f=u.ParentValue,r.call(f,i,n,t,this)):r instanceof Object&&r.handleEvent&&r.handleEvent(i,n,t,this)},n}();n.events=et;nt=function(n){function i(t,i){var r=n.call(this,i)||this;return r.source=t,r}return __extends(i,n),i.prototype.Initialize=function(){this.source&&(this.dbb=this.source.OnPropertyChanged(t.DPValue,this.SourceChanged,this));this.Value=this.Convert(this.source?this.source.Value:null)},i.prototype.SourceChanged=function(n,t){(this._bindingMode&1)!=0&&(this.isChanging||(this.isChanging=!0,this.Value=this.Convert(t._new),this.isChanging=!1))},i.prototype._OnValueChanged=function(n){(this._bindingMode&2)!=0&&(this.isChanging||(this.isChanging=!0,this.source.Value=this.ConvertBack(n._new),this.isChanging=!1))},i.prototype.Update=function(){this.Value=this.Convert(this.source.Value)},i.prototype.UpdateBack=function(){this.source.Value=this.ConvertBack(this.Value)},i.prototype.getParent=function(){return this.source},i.prototype.setParent=function(n){return this.canBeParent(n)?(this.source&&this.source.removeEvent(t.DPValue,this.dbb),n&&(this.dbb=n.OnPropertyChanged(t.DPValue,this.SourceChanged,this)),this.source=n,this.Initialize(),!0):!1},i.prototype.Dispose=function(){this.source&&this.source.removeEvent(t.DPValue,this.dbb);this.source=null;n.prototype.Dispose.call(this)},i}(t);n.Filter=nt;ot=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.fraction=.3333,t}return __extends(t,n),Object.defineProperty(t.prototype,"Fraction",{set:function(n){if(this.fraction!==n){this.fraction=n;switch(this._bindingMode){case 0:return;case 2:this.UpdateBack();return;case 1:case 3:this.Update();return}}},enumerable:!0,configurable:!0}),t.prototype.Convert=function(n){return n/this.fraction},t.prototype.ConvertBack=function(n){return n*this.fraction},t}(nt);n.DoubleFilter=ot;v={};n.RegisterFilter=vt;n.CreateFilter=st,function(n){n[n.SourceToTarget=1]="SourceToTarget";n[n.TwoWay=3]="TwoWay";n[n.TargetToSource=2]="TargetToSource"}(r=n.BindingMode||(n.BindingMode={}));ht=function(){function n(n,t,i,u,f){this.bindingMode=n;this.a=t;this.b=i;this.pa=u;this.pb=f;this.dba=t.OnPropertyChanged(u,this.pac,this);this.dbb=i.OnPropertyChanged(f,this.pab,this);this.Dispose=this.Dispose.bind(this);t.OnDisposing=this.Dispose;i.OnDisposing=this.Dispose;n==r.TargetToSource?this.initB():this.init()}return n.prototype.init=function(){var n=this.a.GetValue(this.pa);this.b.set(this.pb,n)},n.prototype.initB=function(){var n=this.b.GetValue(this.pb);this.a.set(this.pa,n)},n.prototype.pac=function(n,t){(this.bindingMode&1)!=0&&(this.IsChanging||(this.IsChanging=!0,this.b.set(this.pb,t._new),this.IsChanging=!1))},n.prototype.pab=function(n,t){(this.bindingMode&2)!=0&&(this.IsChanging||(this.IsChanging=!0,this.a.set(this.pa,t._new),this.IsChanging=!1))},n.prototype.Dispose=function(){this.disposed||(this.disposed=!0,this.a.OffDisposing=this.Dispose,this.b.OffDisposing=this.Dispose,this.disposed=null,this.a.removeEvent(this.pa,this.dba),this.b.removeEvent(this.pb,this.dbb),this.a=null,this.b=null,this.dba=null,this.dbb=null,this.pa=null,this.pb=null)},n}();n.TwoBind=ht;ct=function(){function n(n,t,i,r,u,f,e){this.bindingMode=n;this.a=t;this.b=i;this.pa=r;this.pb=u;this.con=f;this.conBack=e;this.dba=t.OnPropertyChanged(r,this.pac,this);this.dbb=i.OnPropertyChanged(u,this.pab,this);this.Dispose=this.Dispose.bind(this);t.OnDisposing=this.Dispose;i.OnDisposing=this.Dispose;n==2?this.initB():this.init()}return n.prototype.pac=function(n,t){(this.bindingMode&1)!=0&&(this.IsChanging||(this.IsChanging=!0,this.b.set(this.pb,this.con?this.con(t._new):t._new),this.IsChanging=!1))},n.prototype.pab=function(n,t){(this.bindingMode&2)!=0&&(this.IsChanging||(this.IsChanging=!0,this.a.set(this.pa,this.conBack?this.conBack(t._new):t._new),this.IsChanging=!1))},n.prototype.init=function(){var n=this.a.GetValue(this.pa);this.b.set(this.pb,this.con?this.con(n):n)},n.prototype.initB=function(){var n=this.b.GetValue(this.pb);this.a.set(this.pa,this.con?this.conBack(n):n)},n.prototype.Dispose=function(){this.disposed||(this.disposed=!0,this.a.OffDisposing=this.Dispose,this.b.OffDisposing=this.Dispose,this.disposed=null,this.a.removeEvent(this.pa,this.dba),this.b.removeEvent(this.pb,this.dbb),this.a=null,this.b=null,this.dba=null,this.dbb=null,this.pa=null,this.pb=null)},n}();n.TwoDBind=ct}(e=t.bind||(t.bind={})),function(n){function s(n){i.register(n)}function h(t){return n.Manager.register(t)}function c(n){return r.Compile(n)}var o=function(){function n(){}return n.OnAttribute=function(n,t){this.lst.push({check:function(i){return i.instance.attribute==n&&i.value==t}})},n.check=function(n){for(var r,t=0,i=this.lst;t<i.length;t++)r=i[t],r.check(n)},n.lst=[],n}(),t,i,u,f,r;n.debug=o,function(n){n[n.None=0]="None";n[n.Waitting=1]="Waitting";n[n.Executing=2]="Executing";n[n.Executed=3]="Executed"}(t=n.Stat||(n.Stat={}));i=function(){function n(i){var f,r,e,u;for(this.enumerator=[],this.events={},f=i.attributes,i instanceof HTMLElement&&n._components[i.tagName]&&this.enumerator.push(this.ComponentCreator={instance:n._components[i.tagName],manager:this,stat:t.Waitting,value:i}),r=0;r<f.length;r++)if(e=f[r].name,e.indexOf("on-")===0&&(this.events[e.substr(3)]=f[r].value),n._processors.hasOwnProperty(e))if(u=n.getPrcessorByAttribute(e),e.indexOf("db-")===0)if(u)this.enumerator.push({manager:this,instance:u,value:u.valueParser?u.valueParser(f[r].value):f[r].value,stat:t.Waitting});else throw new Error("the processor "+e+" is not defined");else u&&this.enumerator.push({instance:u,value:u.valueParser?u.valueParser(f[r].value):f[r].value,manager:this,stat:t.Waitting});this.enumerator=this.enumerator.sort(n.orderInstances)}return n.getPrcessorByName=function(n){for(var t in this._processors)if(this._processors[t].name==n)return this._processors[t];return undefined},n.getPrcessorByAttribute=function(n){return this._processors[n]},n.stringIsNullOrWhiteSpace=function(n){return!(n&&n.trim())},n.registerComponent=function(n){if(this.stringIsNullOrWhiteSpace(n.name))throw new Error("attribute value is null");if(n.check&&typeof n.check!="function")throw new Error("check property is not function");if(typeof n.execute!="function")throw new Error("create property is not function");this._components[n.name]&&console.warn("The component "+n.name+" was overrided");n.name=n.name.toUpperCase();n.isPrimitive=!0;n.isFinalizer=!1;n.priority=Number.POSITIVE_INFINITY;this._components[n.name]=n},n.register=function(n){if(this.stringIsNullOrWhiteSpace(n.attribute))throw new Error("attribute value is null");if(n.check&&typeof n.check!="function")throw new Error("check value is not function");if(this.stringIsNullOrWhiteSpace(n.name)&&(n.name=n.attribute),n.attribute=n.attribute.toLowerCase(),n.name=n.name.toLowerCase(),n.priority||(n.priority=++this.maxPriority),this.maxPriority<n.priority&&(this.maxPriority=n.priority),this._processors[n.attribute])throw"processor "+n.attribute+" cannot be re-define ";if(n.isPrimitive=!!n.isPrimitive,n.isFinalizer=!!n.isFinalizer,n.isFinalizer===n.isPrimitive&&n.isFinalizer===!0)throw new Error("invalid arguments isPremitive && isFinalizer set to true");this._processors[n.attribute]=n;this.enumerator.push(n);this.enumerator.sort(this.orderDefs)},n.orderDefs=function(n,t){return!!n.isPrimitive==!!t.isPrimitive?n.priority-t.priority:n.isPrimitive?-1:n.isFinalizer?1:void 0},n.orderInstances=function(t,i){return n.orderDefs(t.instance,i.instance)},n.prototype.getProcessorByAttribute=function(n){for(var r,t=0,i=this.enumerator;t<i.length;t++)if(r=i[t],r.instance.attribute==n)return r;return undefined},n._components={},n._processors={},n.enumerator=[],n.maxPriority=0,n}();n.Manager=i;u=function(){function n(n,t,i){this.e=n;this.parent=t;this.controller=i}return Object.defineProperty(n.prototype,"Scop",{get:function(){return this.e.Scop||this.parent&&this.parent.Scop||this.controller.Scop},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Control",{get:function(){return this.e.Control||this.parent&&this.parent.Control||this.controller.CurrentControl},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Dom",{get:function(){return this.e.dom},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"IsNew",{get:function(){return this.parent?this.e.Scop!=this.parent.Scop||this.e.Control!=this.parent.Control||this.e.Jobs.length!=0:this.e.Scop!=null||this.e.Jobs.length!=0},enumerable:!0,configurable:!0}),n.prototype.validateE=function(){this.IsNew&&(this.e.Scop=this.Scop)},n.New=function(t,i,r){return new n({dom:t,Scop:null,Control:null,IsNew:!1,Jobs:[]},i,r)},n.Root=function(t,i,r,u){return new n({dom:t,Scop:i,Control:r,IsNew:!1,Jobs:[]},null,u||r.__Controller__)},n.prototype.New=function(t){return new n({dom:t,Scop:null,Control:null,IsNew:!1,Jobs:[]},this,this.controller)},Object.defineProperty(n.prototype,"Depth",{get:function(){return this.parent?this.parent.Depth+1:1},enumerable:!0,configurable:!0}),n}();n.Tree=u;f=function(){function t(){}return t.ParseBinding=function(i){var r=n.Compiler.Compile(i),u;return i.e=r,u=r.Control,(r.Jobs.length!==0||r.IsNew)&&i.controller.instances.push(r),r.Control||t.ExploreTree(i),r},t.ExploreTree=function(n){for(var i,r=n.Dom,t=0;t<r.childElementCount;t++)(i=r.children.item(t),i.hasAttribute("controlled"))||this.ParseBinding(n.New(i))},t}();n.MyClass=f;n.register=s;r=function(){function n(){}return n.initEvents=function(n,t){var s=n.e,f=n.parent.Scop,o=n.controller,r,u,i;if(t.events){for(u in t.events)r||(r=new e.events(n.Scop)),i=t.events[u],i.indexOf(".")==0&&(f=n.Scop,i=i.substring(1)),r.Register(u,s.dom,e.Scop.Create(i,f,0,o),o);return r}},n.Compile=function(t){var f=t.e.dom,e,s,o,h,r,u;if(f.hasAttribute("compiled"))return t.e;for(f.setAttribute("compiled",""),e=t.e,s=new i(f),f.hasAttribute("debugger"),o=0,h=s.enumerator;o<h.length;o++)if(r=h[o],(!r.instance.check||r.instance.check(t,r))&&(u=r.instance.execute(t,r),u&&(u.e&&(e=u.e),u.Break)))break;return n.initEvents(t,s),t.e.IsNew=t.Scop!=t.parent.Scop||t.Control!=t.parent.Control,t.validateE(),t.e.Scop||(t.e.Scop=t.parent.Scop||t.controller.Scop),e||stop(),e},n}();n.Compiler=r;n.Register=h;n.Compile=c}(rt=t.Processor||(t.Processor={}));e.RegisterFilter({Name:"2bl",BindingMode:3,CreateNew:function(n,t,i){var r=new e.DoubleFilter(n,t);return i&&(r.Fraction=parseFloat(i)),r}}),function(n){function i(n,i){t[n]=i}function r(n){var i=t[n.name];if(i)return i(n)}var t={};n.register=i;n.create=r}(si=t.ScopicControl||(t.ScopicControl={})),function(n){function r(n,r,u){var f=u?u:"@"+ ++i;return t[f]={callback:n,Param:r},f}function u(n,i,r){var u=t[n];if(u)return u.callback.Invoke.call(u.callback.Owner,n,i,r,u.Param)}function f(n){delete t[n]}function e(n){return t[n]!=null}var t={},i=0;n.Register=r;n.Call=u;n.Delete=f;n.contains=e}(hi=t.ScopicCommand||(t.ScopicCommand={})),function(n){function r(n){if(typeof n.Name!="string"||n.DoApiCallback instanceof Function==!1)return!1;var r=t[n.Name];if(r==null)r={Callback:[n],Trigger:undefined},l(t,n.Name,{value:r,configurable:!1,enumerable:!1,writable:!1});else{if(r.Callback.indexOf(n)!==-1)return;r.Callback.push(n)}i(n)}function u(n){if(typeof n.Name!="string"||n.Filter&&!(n.Filter instanceof Function))return!1;var r=t[n.Name];if(r==null)r={Callback:[],Trigger:n},t[n.Name]=r,i(r);else if(r.Trigger==null)r.Trigger=n,i(r);else throw"This Command Exist";i(n)}function f(n,i){var e=t[n],r,h,s,f,c,u;if(!e)throw"Cmd Is Not Exist";if(r=e.Trigger,r){if(r.CheckAccess&&!r.CheckAccess(r))throw"Access denied";h=r.Filter}for(s=e.Callback,f=0,c=s.length;f<c;f++)(u=s[f],!h||r.Filter(u,i))&&o.TryCatch(u,u.DoApiCallback,void 0,[r,u,i])}var i=Object.freeze,t={};n.RegisterApiCallback=r;n.RegisterTrigger=u;n.RiseApi=f}(ci=t.Api||(t.Api={})),function(n){function t(n){try{return n.parser?n.parser(n.e):n.e.value}catch(n){return n.e.value}}var p=function(){function n(n,t){this.Owner=n;this.Property=t}return n.prototype.Set=function(n){return this.Owner.set(this.Property,n),this.executed=!0,n},n}(),r,u,f,o,c,l,a,v,y,w;n.BPath=p;r=function(){function n(n,t){this.Owner=n;this.Property=t}return n.prototype.Set=function(n){return this.Property instanceof e.DProperty?this.Owner.set(this.Property,n):this.Owner[this.Property]=n,this.executed=!0,n},n}();n.Path=r;u=function(){function n(n,t){this.Owner=n;this.Property=t}return n.prototype.Set=function(n){return this.Owner.Insert(this.Property,n)||this.Owner.Add(n),this.executed=!0,n},n}();n.LPath=u;f=new s.Dictionary("SerializationContext",!1);o=function(){function n(n){this._ext=[];this.indexer=new s.Dictionary("Indexer",!0);this.refs=[];this.cnt=0;this._store=n?f:new s.Dictionary("SerializationContext",!1)}return n.prototype.Dispose=function(){this.reset();this._ext=null;this._store=null;this.cnt=null;this.indexer=null;this.refs=null},n.prototype.Register=function(n,t){this._store.Set(n,t)},n.prototype.UnRegister=function(n){return this._store.Remove(n)},n.prototype.GetRegistration=function(n){return this._store.Get(n)},n.prototype.Append=function(n){this._ext.push(n)},n.prototype.Get=function(n){var t=this._store.Get(n),r,i;if(t)return t;for(r=this._ext,i=r.length-1;i>=0;i--)if((t=r[i].Get(n))!=null)return t;return null},n.prototype.get=function(n,t){var i=this.refs[n],r;if(i){if(i.setted)return t?t.Set(this.refs[n].val):this.refs[n].val;if(t)i.paths?i.paths.push(t):i.paths=[t];else throw"entry Point not Found";}else r={val:undefined,paths:[t]},this.refs[n]=r;return undefined},n.prototype.set=function(n,t){var i=this.refs[n],r;if(i){if(i.val=t,i.setted=!0,i.paths)for(r=0;r<i.paths.length;r++)i.paths[r].Set(t)}else this.refs[n]={val:t,setted:!0}},n.prototype.getJson=function(n){var t=this.indexer.Get(n),r,u,f;return t==null&&(r={__ref__:++this.cnt},u={"@ref":r},this.indexer.Set(n,t={ref:r,json:u,valid:!1}),n instanceof e.DObject&&(f=i.context.NameOf(n.constructor),f!=null&&(u.__type__=f))),t},n.prototype.reset=function(){return this.indexer.Clear(),this.cnt=0,this.refs.length=0,this},n.getType=function(n){for(;;)if(n instanceof h.DelayedType)n=n.Type;else if(n instanceof h.GenericType)n=n.Constructor;else return n},n.prototype.FromJson=function(n,t,r){var u,f,o;return n==null?r?r.Set(n):n:(t instanceof h.DelayedType&&(t=t.Type),t instanceof h.GenericType&&(t=t.Constructor),t===String||t===Number||t===Boolean)?r?r.Set(n):n:t===Date?typeof n=="string"?r.Set(new Date(Date.parse(n))):r.Set(new Date(n)):typeof n.__ref__=="number"?this.get(n.__ref__,r):(f=n["@ref"],delete n["@ref"],h.IsInstanceOf(t,e.DObject)?(t.CreateFromJson&&(u=t.CreateFromJson(n,t,this.RequireNew?this.RequireNew(n,t):!1)),u==null&&(u=new t),f&&this.set(f.__ref__,u),u=u.FromJson(n,this)):(t.prototype!=null&&t.prototype.hasOwnProperty("fromJson")?u=t.prototype.fromJson(n,i.context,f):(o=this.Get(t),u=o!=null?o.FromJson(n,this,f):n),f&&this.set(f.__ref__,u)),r?r.Set(u):u)},n.prototype.ToJson=function(n){var t,i;if(n===null)return null;switch(typeof n){case"undefined":case"boolean":case"number":case"string":return n;case"function":return n.toString();default:return(t=this.getJson(n),t.valid)?t.ref:n===Object?this._toJson(n,t):n instanceof e.DObject?n.ToJson(this,t):(i=this.Get(n.constructor),i?i.ToJson(n,this,t):this._toJson(n,t))}},n.prototype._toJson=function(n,t){if(t.valid=!0,n instanceof Array)return this._arrayToJson(n,t);t.json={};for(var i in n)t.json[i]=this.ToJson(n[i]);return t.json},n.prototype.toString=function(){JSON.stringify(this)},n.prototype._arrayToJson=function(n,t){for(var r=[],u={__type__:l.Array,__value__:r,"@ref":t.ref.__ref__},i=0;i<n.length;i++)r[i]=this.ToJson(n[i]);return u},n.GlobalContext=new n(!0),n}();n.SerializationContext=o;c=function(){function n(t,i,r){this.input=t;this.autoParse=i;this.asJson=r;this.e={csv:this,index:-1,value:void 0,set:function(n,t){return this.value=n,this.index=t,this}};this.Columns=[];this._current=void 0;this._cursor=n.readLine(t,void 0,{cols:this.Columns,csv:this,e:this.e,parser:function(n){return n.value}});Object.defineProperty(this,"_startCursor",{value:this._cursor,configurable:!1,writable:!1,enumerable:!1});this._current=r?{}:new Array(this.Columns.length)}return n.ReadAllLines=function(n){for(var i,f=[],r=0,u=!1,t=0;t<n.length;t++){if(i=n[t],i=="\\"){t++;continue}(i=='"'&&n[t-1]!=="\\"&&(u=!u),u)||i=="\r"&&(f.push(n.substr(r,t-r)),n[t+1]=="\n"&&t++,r=t+1)}return f},n.prototype.parse=function(){},n.isEmptyLine=function(n,t){var u,r;if(t){if(t.EOF)return!0}else t={cursor:0,value:void 0};var i=t.cursor||0,e=n[i],f=n[i+1];return(f=="\r"?(u=n[i+2],r=u=="\n"?{cursor:i+3,EOF:n[i+3]==null,len:2,newLine:!0,value:"\r\n"}:{cursor:i+2,EOF:u==void 0,len:1,newLine:!0,value:"\r"}):r={cursor:i+1,EOF:f==void 0,len:0,newLine:!1,value:""},r.EOF)?!0:r.newLine&&t.newLine?!0:!1},n.trim=function(n,t){var r,u;if(t){if(t.EOF)return t}else t={cursor:0,value:void 0};var i=t.cursor||0,e=n[i],f=n[i+1];if(f=="\r")r=n[i+2],u=r=="\n"?{cursor:i+3,EOF:n[i+3]==null,len:2,newLine:!0,value:"\r\n"}:{cursor:i+2,EOF:r==void 0,len:1,newLine:!0,value:"\r"};else if(f==void 0)u={cursor:i+1,EOF:!0,len:0,newLine:void 0,value:void 0};else return t;return u},n.nextChar=function(n,t){var f,i,e,r,u;if(t){if(t.EOF)return t}else t={cursor:0,value:void 0};for(f=t.cursor,i=f;i<n.length;){if(e=r,r=n[i++],r===this.separator)return{value:r,cursor:i};if(r==='"'){if(e!=="\\")return{value:'"',cursor:i-1}}else if(r==="\r")return u=n[i]==="\n",u&&i++,{value:u?"\r\n":r,cursor:i,newLine:!0,len:u?2:1}}return{value:void 0,cursor:n.length,EOF:!0}},n.readString=function(n,t){var u=t.cursor,i=u,r=n[i];if(r!=='"')return null;while(++i<n.length){if(n[i]=='"'&&r!=="\\")return{value:n.substring(t.cursor,i+1),cursor:i+1,EOF:i==n.length-1};r=n[i]}return{value:n.substring(u),cursor:n.length,EOF:!0}},n.readColumn=function(n,t){var r,i,u;if(t){if(t.EOF)return void 0}else t={cursor:0,value:void 0};for(r=t;;){if(i=this.nextChar(n,r),i.value===this.separator)return{value:n.substring(t.cursor,i.cursor-1),EOF:!1,cursor:i};if(i.EOF)return{value:n.substr(t.cursor),EOF:!0,cursor:i};if(i.newLine)return{value:n.substring(t.cursor,i.cursor-i.len),EOF:!1,cursor:i};i.value==='"'&&(u=this.readString(n,i),r=u)}},n.clear=function(n,t){for(;t<n.length;t++)n[t]=void 0;return n},n.fillColumns=function(n,i,r){var f,u,e,c;r.e||(r.e={csv:void 0,set:function(n,t){return this.value=n,this.index=t,this}});var o=r.cols,h=r.header,s=o instanceof Array;if(i&&i.EOF)return s&&this.clear(o,0),i;f=0;u=i;do{if(e=this.readColumn(n,u),!e)return s&&this.clear(o,f),{EOF:!0,cursor:n.length,value:void 0};u=e.cursor;r.e.set(e.value,f);c=t(r);s?o[f]=c:h[f]&&(o[h[f]]=c);f++}while(!u.EOF&&f<(s?o:h).length&&!u.newLine);if(!u.EOF&&!e.cursor.newLine)while(u&&!u.EOF&&!u.newLine)e=this.readColumn(n,u),u=e&&e.cursor;return s&&this.clear(o,f),u},n.readLine=function(n,i,r){var o,f,u,s;r.e||(r.e={csv:void 0,set:function(n,t){return this.value=n,this.index=t,this}});var e=r.cols,h=r.header,c=e instanceof Array;if(c&&(e.length=0),i&&i.EOF)return i;o=i;f=0;do{if(u=this.readColumn(n,o),!u)return{EOF:!0,cursor:n.length,value:void 0};o=u.cursor;r.e.set(u.value,f);s=t(r);c?e.push(s):h[f]&&(e[h[f]]=s);f++}while(!u.EOF&&!u.cursor.newLine);return o},n.prototype.ColumnName=function(n){return this.Columns[n]||""},n.prototype.ColumnIndex=function(n){return this.Columns.indexOf(n)},Object.defineProperty(n.prototype,"Cursor",{get:function(){return this._cursor},enumerable:!0,configurable:!0}),n.prototype.Reset=function(){return this._cursor=this._startCursor,this},n.prototype.Next=function(t){if(this._cursor.EOF)return!1;if(!this.AllowNullValue)for(;;){var i=n.trim(this.input,this._cursor);if(i===this._cursor)break;if(i.EOF)return!1;if(i.newLine){this._cursor=i;continue}else break}return this._cursor=n.fillColumns(this.input,this._cursor,this.swapArgs(t)),!0},n.prototype.swapArgs=function(n){return n?(n.cols||(n.cols=this._current),n.header||(n.header=this.Columns||[]),n.csv||(n.csv=this),n.e||(n.e=this.e),n):{cols:this._current,parser:this.autoParse?this.jsonParser:void 0,header:this.Columns||[],csv:this,e:this.e}},n.prototype.jsonParser=function(n){if(n.value)return JSON.parse(n.value)},Object.defineProperty(n.prototype,"Current",{get:function(){return this._current},enumerable:!0,configurable:!0}),n.prototype.Field=function(n){var t=this.Current;return t?this.Current[typeof n=="string"?this.Columns.indexOf(n):n]:null},n.separator=";",n.emptyArray=Object.freeze([]),n}();n.CSV=c,function(n){n[n.Nullable=0]="Nullable";n[n.Boolean=1]="Boolean";n[n.Number=2]="Number";n[n.String=3]="String";n[n.Function=4]="Function";n[n.Array=5]="Array";n[n.Object=6]="Object";n[n.DObject=7]="DObject"}(l=n.NativeTypes||(n.NativeTypes={}));window.GC=function(){return n.SerializationContext.GlobalContext};a=function(){function n(){}return n.ToArray=function(n,t,i,r){var o,f,e,u;if(!(r>0))return 0;for(o=i,f=i+r-1,e=0;e<n.length;++e)if(u=n.charCodeAt(e),u>=55296&&u<=57343&&(u=65536+((u&1023)<<10)|n.charCodeAt(++e)&1023),u<=127){if(i>=f)break;t[i++]=u}else if(u<=2047){if(i+1>=f)break;t[i++]=192|u>>6;t[i++]=128|u&63}else if(u<=65535){if(i+2>=f)break;t[i++]=224|u>>12;t[i++]=128|u>>6&63;t[i++]=128|u&63}else if(u<=2097151){if(i+3>=f)break;t[i++]=240|u>>18;t[i++]=128|u>>12&63;t[i++]=128|u>>6&63;t[i++]=128|u&63}else if(u<=67108863){if(i+4>=f)break;t[i++]=248|u>>24;t[i++]=128|u>>18&63;t[i++]=128|u>>12&63;t[i++]=128|u>>6&63;t[i++]=128|u&63}else{if(i+5>=f)break;t[i++]=252|u>>30;t[i++]=128|u>>24&63;t[i++]=128|u>>18&63;t[i++]=128|u>>12&63;t[i++]=128|u>>6&63;t[i++]=128|u&63}return t[i]=0,i-o},n.lengthOf=function(n){for(var t,r=0,i=0;i<n.length;++i)t=n.charCodeAt(i),t>=55296&&t<=57343&&(t=65536+((t&1023)<<10)|n.charCodeAt(++i)&1023),t<=127?++r:r+=t<=2047?2:t<=65535?3:t<=2097151?4:t<=67108863?5:6;return r},n.ToString=function(t,i){for(var o=i,r,u,e,s,h,l,f,c;t[o];)++o;if(o-i>16&&t.subarray&&n.UTF8Decoder)return n.UTF8Decoder.decode(t.subarray(i,o));for(f="";;){if(r=t[i++],!r)return f;if(!(r&128)){f+=String.fromCharCode(r);continue}if(u=t[i++]&63,(r&224)==192){f+=String.fromCharCode((r&31)<<6|u);continue}e=t[i++]&63;(r&240)==224?r=(r&15)<<12|u<<6|e:(s=t[i++]&63,(r&248)==240?r=(r&7)<<18|u<<12|e<<6|s:(h=t[i++]&63,(r&252)==248?r=(r&3)<<24|u<<18|e<<12|s<<6|h:(l=t[i++]&63,r=(r&1)<<30|u<<24|e<<18|s<<12|h<<6|l)));r<65536?f+=String.fromCharCode(r):(c=r-65536,f+=String.fromCharCode(55296|c>>10,56320|c&1023))}},n.GetBytes=function(n){var t=this.lengthOf(n)+1,i=new Array(t);return this.ToArray(n,i,0,t),i},n.UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):undefined,n}();n.UTF8=a;v=function(){function n(){}return n.ToString=function(t,i){var r,u,f,e,o;for(console.assert(i%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!"),r=i,u=r>>1;t[u];)++u;if(r=u<<1,r-i>32&&n.UTF16Decoder)return n.UTF16Decoder.decode(new Uint8Array(t,i,r-i+1));for(f=0,e="";;){if(o=t[i+f*2>>1],o==0)return e;++f;e+=String.fromCharCode(o)}},n.ToArray=function(n,t,i,r){var f,e,u,o;if(console.assert(i%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),console.assert(typeof r=="number","stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),r===undefined&&(r=2147483647),r<2)return 0;for(r-=2,f=i,e=r<n.length*2?r/2:n.length,u=0;u<e;++u)o=n.charCodeAt(u),t[i>>1]=o,i+=2;return t[i>>1]=0,i-f},n.lengthBytesUTF16=function(n){return n.length*2},n.UTF16Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf-16le"):undefined,n}();n.UTF16=v;y=function(){function n(){}return n.UTF32ToString=function(n,t){var u,r,i,f;for(console.assert(t%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!"),u=0,r="";;){if(i=n[t+u*4>>2],i==0)return r;++u;i>=65536?(f=i-65536,r+=String.fromCharCode(55296|f>>10,56320|f&1023)):r+=String.fromCharCode(i)}},n.stringToUTF32=function(n,t,i,r){var e,o,f,u,s;if(console.assert(i%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),console.assert(typeof r=="number","stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),r===undefined&&(r=2147483647),r<4)return 0;for(e=i,o=e+r-4,f=0;f<n.length;++f)if(u=n.charCodeAt(f),u>=55296&&u<=57343&&(s=n.charCodeAt(++f),u=65536+((u&1023)<<10)|s&1023),t[i>>2]=u,i+=4,i+4>o)break;return t[i>>2]=0,i-e},n.lengthBytesUTF32=function(n){for(var i,r=0,t=0;t<n.length;++t)i=n.charCodeAt(t),i>=55296&&i<=57343&&++t,r+=4;return r},n}();n.UTF32=y,function(n){function e(n){for(var r=[],i=0,f=n.length,t,u;i<f;)t=n.charCodeAt(i++),t>=55296&&t<=56319&&i<f?(u=n.charCodeAt(i++),(u&64512)==56320?r.push(((t&1023)<<10)+(u&1023)+65536):(r.push(t),i--)):r.push(t);return r}function s(n){for(var f=n.length,u=-1,i,r="";++u<f;)i=n[u],i>65535&&(i-=65536,r+=t(i>>>10&1023|55296),i=56320|i&1023),r+=t(i);return r}function h(n){if(n>=55296&&n<=57343)throw Error("Lone surrogate U+"+n.toString(16).toUpperCase()+" is not a scalar value");}function o(n,i){return t(n>>i&63|128)}function a(n){if((n&4294967168)==0)return t(n);var i="";return(n&4294965248)==0?i=t(n>>6&31|192):(n&4294901760)==0?(h(n),i=t(n>>12&15|224)+o(n,6)):(n&4292870144)==0&&(i=t(n>>18&7|240),i+=o(n,12),i+=o(n,6)),i+t(n&63|128)}function c(n){for(var t=e(n),f=t.length,i=-1,r,u="";++i<f;)r=t[i],u+=a(r);return u}function r(){if(i>=f)throw Error("Invalid byte index");var n=u[i]&255;if(i++,(n&192)==128)return n&63;throw Error("Invalid continuation byte");}function v(){var t,e,o,s,n;if(i>f)throw Error("Invalid byte index");if(i==f)return!1;if(t=u[i]&255,i++,(t&128)==0)return t;if((t&224)==192){if(e=r(),n=(t&31)<<6|e,n>=128)return n;throw Error("Invalid continuation byte");}if((t&240)==224){if(e=r(),o=r(),n=(t&15)<<12|e<<6|o,n>=2048)return h(n),n;throw Error("Invalid continuation byte");}if((t&248)==240&&(e=r(),o=r(),s=r(),n=(t&7)<<18|e<<12|o<<6|s,n>=65536&&n<=1114111))return n;throw Error("Invalid UTF-8 detected");}function l(n){u=e(n);f=u.length;i=0;for(var t=[],r;(r=v())!==!1;)t.push(r);return s(t)}var y=function(){},t=String.fromCharCode,u,f,i;n.ucs2decode=e;n.ucs2encode=s;n.utf8encode=c;n.utf8decode=l;n.version="3.0.0";n.encode=c;n.decode=l}(w=n.Utf8||(n.Utf8={}))}(a=t.encoding||(t.encoding={}));wt=function(){function n(n,t,i){this.node=n;this.param=t;this.unknown=i;this.children=[];i||(this.unknown=[])}return n.prototype.add=function(t,i){var r=new n(t,i,this.unknown);return(r=this.__add(r),this.unknown.length)?this.Validate():r},n.prototype.__add=function(n){var i=this._add(n),t;if(i)return i;for(t=0;t<this.unknown.length;t++)if(i=this.unknown[t]._add(n))return i;for(t=0;t<this.unknown.length;t++)if(this.unknown[t].node==n.node)return this;return this.unknown.push(n),this},n.prototype.Validate=function(){for(var t,i=this,n=0;n<this.unknown.length;n++)t=this._add(this.unknown[n]),t&&(this.unknown.splice(n,1),n--);return this},n.prototype.ReValidate=function(n){if(this.unknown)for(var t=0;t<this.unknown.length;t++)this.node.contains(this.unknown[t].node)&&(n(this.unknown[t]),this.unknown.splice(t,1),t--)},n.prototype.get=function(n){for(var t,i=0;i<this.children.length;i++)if((t=this.children[i],t.node==n)||(t=t.get(n)))return t},n.prototype._add=function(n){var t,i;if(this.node.contains(n.node)){for(t=0;t<this.children.length;t++){if((i=this.children[t],n.node==i.node)||i._add(n))return this;n.node.contains(i.node)&&this.children.splice(t,1,i)}return this.children.indexOf(n)==-1&&this.children.push(n),this}return this.node==n.node?this:n.node.contains(this.node)?n._add(this):undefined},n.prototype.remove=function(n){for(var t,i=0;i<this.children.length;i++){if(t=this.children[i],t.node==n)return this.children.push.apply(this.children,t.children),this.children.splice(i,1),t;if(t=t.remove(n))return t}},n.prototype.hasChild=function(n){for(var t,i=0;i<this.children.length;i++)if((t=this.children[i],n.contains(t.node))||(t=t.hasChild(n)))return t},n.prototype.foreach=function(n,t){var i=n(t,this),r;if(i>0)return i;for(r=0;r<this.children.length;r++)if(i=this.children[r].foreach(n,this),i>0)return i-1;return 0},n}();t.xNode=wt;bt=function(){function n(){this.dic=new s.Dictionary("s");this.unknown=new s.Dictionary("s1")}return n.prototype.add=function(n,t){var r=this.dic.Get(n),i;if(!r&&(i=this.unknown.Get(n),!i)){if(window.document.body.contains(n))return this.dic.Set(n,t);this.unknown.Set(n,t)}},n.prototype.ReValidate=function(n,t){var r,i,u;if(this.unknown)for(i=0,u=this.unknown.Count;i<u;i++)window.document.body.contains(r=this.unknown.GetKeyAt(i))&&(n(r,this.unknown.GetValueAt(i)),this.unknown.RemoveAt(i),i--);t&&t()},n.prototype.Remove=function(n){var t=this.dic.Remove(n)},n.prototype.GetAndRemove=function(n){return this.dic.Remove(n)},n.prototype.Dispose=function(n){var t=this.dic.Remove(n);return this.unknown.Remove(n)||t},n}(),function(n){function t(n){ut.pushToIdl(n)}n.OnIdle=t}(li=t.UIDispatcher||(t.UIDispatcher={})),function(n){function e(n,i){t.add(i,n);__global.useListenerOrMutation||i.addEventListener(ct,n)}function s(n){var i=t.Dispose(n);__global.useListenerOrMutation||n.removeEventListener(ct,i)}function h(n){var f,i,e,r,o;if(t.dic.Count)for(i=0;i<n.length;i++)if(e=n[i],e.type=="childList")for(f=e.addedNodes,r=0;r<f.length;r++)o=t.GetAndRemove(f[r]),o&&o.OnNodeLoaded();t.unknown.Count&&c.Dispatcher.call(t,t.ReValidate,function(n,t){t.OnNodeLoaded()},u)}function u(){r||f()}function f(){if(i.length!=0){if(r=!0,c.Dispatcher.IsRunning())return c.Dispatcher.OnIdle(null,f);c.Dispatcher.call(null,l)}}function l(){for(var n=0;n<i.length;n++)o.TryCatch(undefined,i[n]);i.splice(0,i.length);r=!1}function a(n){n instanceof Function&&(i.push(n),u())}function v(){if(t=new bt,__global.useListenerOrMutation){var n=new MutationObserver(h);n.observe(document.body,{childList:!0,subtree:!0})}}var i=[],r,t;n.OnNodeInserted=e;n.RemoveListener=s;n.pushToIdl=a;v()}(ut||(ut={}));ai=!0,function(n){var f=function(){function n(n,t){this._key=n;this._value=t}return Object.defineProperty(n.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),n}(),i,t,s,r,u,h;n.Header=f,function(n){n[n.json=0]="json";n[n.document=1]="document";n[n.text=2]="text";n[n.arraybuffer=3]="arraybuffer";n[n.blob=4]="blob"}(i=n.ResponseType||(n.ResponseType={})),function(n){n[n.Get=0]="Get";n[n.Post=1]="Post";n[n.Head=2]="Head";n[n.Put=3]="Put";n[n.Delete=4]="Delete";n[n.Options=5]="Options";n[n.Connect=6]="Connect";n[n.Create=7]="Create";n[n.Open=8]="Open";n[n.Close=9]="Close";n[n.Validate=10]="Validate";n[n.FastValidate=11]="FastValidate";n[n.Print=12]="Print";n[n.UPDATE=13]="UPDATE";n[n.SUPDATE=14]="SUPDATE";n[n.Set=15]="Set"}(t=n.WebRequestMethod||(n.WebRequestMethod={}));s=function(){function n(n){this.crypt=n;this.http=new XMLHttpRequest;this._responseType=null;this.key={};this.OnComplete=new e.EventListener(this.key);this.http.addEventListener("loadend",this.downloadDelegate=new g.Delegate(this,this._onprogress,function(n){n.Owner.http.removeEventListener("loadend",n);n.Owner.http.removeEventListener("error",n)}));typeof __global.https!="undefined"&&__global.https&&(this.crypt=new ot.AesCBC(vi.slice(0)));this.http.addEventListener("error",this.downloadDelegate)}return n.prototype.getResponseType=function(){return typeof this._responseType=="number"?this._responseType:i.text},n.prototype.setResponseType=function(n){return this._responseType=n,n},Object.defineProperty(n.prototype,"Crypto",{set:function(n){this.crypt=n},enumerable:!0,configurable:!0}),n.prototype.Dispose=function(){this.OnComplete.Dispose();this.downloadDelegate.Dispose();this.key=null;this.http=null;this.OnComplete=null;this.downloadDelegate=null},n.prototype._onprogress=function(){var n=null,t;switch(this.http.readyState){case 4:n=this.OnComplete;break;default:return}n&&(t=this,n.Invoke(this.key,[t]))},Object.defineProperty(n.prototype,"IsSuccess",{get:function(){return this.http.status==200&&this.http.readyState==4},enumerable:!0,configurable:!0}),n.prototype.Download=function(n,r){this.http.open(t[n.Method],n.Url,!0,this.Uid,this.Pwd);this.http.setRequestHeader("xreq",btoa((this.Uid||"")+":"+(this.Pwd||"")));this.http.responseType=i[this.getResponseType()].toLowerCase();n.Method===t.Get?this.http.send():this.http.send(JSON.stringify(r))},n.prototype.Download2=function(n){if(n.url.beforRequest&&!n.url.beforRequest(n.url))return this.OnComplete&&this.OnComplete.Invoke(this.key,[this]);var r=n.url;this.http.open(t[r.Method],this.getUrlOf(n),!0,this.Uid,this.Pwd);this.http.setRequestHeader("xreq",btoa((this.Uid||"")+":"+(this.Pwd||"")));this.http.setRequestHeader("Access-Control-Allow-Origin","*");this.http.timeout=n.url.timeout?n.url.timeout:0;this.http.responseType=i[n.url.ResponseType]||"text";this.http.send(this.getDataOf(n))},n.prototype.getUrlOf=function(n){var u=n.url,t=u.Url,i,r;if(n.params){i=t.lastIndexOf("?")!=-1;for(r in n.params)t+=(i?"&":(i=!0)&&"?")+(encodeURI(r)+"="+encodeURI(String(n.params[r])))}return t},n.prototype.getDataOf=function(n){var r=n.url,i;if(r.HasBody===!0&&r.Method!==t.Get&&n.data!==undefined)return __global.https?(i=a.Utf8.ucs2decode(n.data.OutputData()),this.crypt&&(i=this.crypt.Encrypt(i)),new Uint8Array(i)):n.data.OutputData()},n.prototype.GetFileSize=function(n,t){this.http.open("HEAD",n,!0,this.Uid,this.Pwd);this.http.onreadystatechange=function(){this.readyState==this.DONE&&t&&t(parseInt(this.getResponseHeader("Content-Length")))};this.http.send()},n.prototype.RequestHeader=function(n,t){this.http.open("HEAD",n,!0);this.http.onreadystatechange=function(){var i,r,n,u,e;if(this.readyState==this.DONE&&t){for(i=this.getAllResponseHeaders().split("\r\n"),r=[],n=i.length-1;n>=0;n--)u=i[n],u&&(e=u.split(": "),r.push(new f(e[0],e[1])));t(r)}};this.http.send()},Object.defineProperty(n.prototype,"Response",{get:function(){return this.http.response},enumerable:!0,configurable:!0}),n.prototype.GetHeader=function(n){return this.http.getResponseHeader(n)},n.prototype.GetHeaders=function(){return this.http.getAllResponseHeaders()},n}();n.WebRequest=s;r=function(){function n(n,t,i){this.callback=n;this.data=t;this.isPrivate=i;this.IsSuccess=null;i==void 0&&(this.isPrivate=!1)}return n.prototype.Callback=function(n,t){this.callback&&this.callback(n,t)},n}();n.RequestParams=r;u=function(){function n(n,t,i){this.url=n;this.data=t;this.params=i;this.fail=undefined}return n}();n.Request=u;h=function(){function t(t){this.crypt=t;this.quee=[];this.isRunning=!1;this.isDownloading=!1;this.OnSuccess=new e.EventListener(1);this.OnFail=new e.EventListener(1);this.OnFinish=new e.EventListener(1);this.webr=new n.WebRequest(t);this.webr.setResponseType(n.ResponseType.text);this.webr.OnComplete.Add(this.DownloadComplete.bind(this),"DCT")}return Object.defineProperty(t.prototype,"Uid",{set:function(n){this.webr.Uid=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Pwd",{set:function(n){this.webr.Pwd=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Request",{get:function(){return this.webr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Crypto",{set:function(n){this.webr.Crypto=n},enumerable:!0,configurable:!0}),t.prototype.OnError=function(){if(this.isDownloading=!1,this.current){var t=!0,n=this.current.data;n instanceof r&&(n.IsSuccess=!1,o.TryCatch(n,n.Callback,void 0,[this,this.webr]),t=!n.isPrivate);t&&this.OnFail.PInvok(1,[this,n],this)}this.Next()},t.prototype.DownloadComplete=function(){var i,t,n;this.isDownloading=!1;i=this.webr.IsSuccess?this.OnSuccess:this.OnFail;this.current&&(t=!0,n=this.current.data,n instanceof r&&(n.IsSuccess=this.webr.IsSuccess,o.TryCatch(n,n.Callback,void 0,[this,this.webr]),t=!n.isPrivate),t&&i.PInvok(1,[this,n],this));this.Next()},t.prototype.Push=function(n,t,i){this.quee.push(new u(n,t,i));this.isRunning||this.Start()},t.prototype.Insert=function(n){this.quee.push(n);this.isRunning||this.Start()},t.prototype.Start=function(){this.isDownloading||(this.isRunning=!0,this.Next())},t.prototype.Next=function(){if(0==this.quee.length){this.isRunning=!1;this.isDownloading=!1;var n=this;this.OnFinish.Invoke(1,[n,n.current.data]);return}try{this.webr.Download2(this.current=this.quee.shift());this.isDownloading=!0}catch(t){this.isDownloading=!1;this.OnError()}},t.prototype.Restart=function(){this.isDownloading=!1;this.Start()},t}();n.QueeDownloader=h}(nt=t.net||(t.net={})),function(n){var t=function(){function t(t,i,r,u,f,e){this._url=t;this.context=i;this.Header=r;this.Method=u;this.HasBody=f;this.ResponseType=e;u==undefined&&(this.Method=n.WebRequestMethod.Get)}return Object.defineProperty(t.prototype,"Url",{get:function(){return this.context?this.context.GetPath(this._url):this._url},set:function(n){this._url=n},enumerable:!0,configurable:!0}),t}();n.RequestUrl=t}(nt=t.net||(t.net={})),function(n){var t=new s.Dictionary("ethandler"),i=function(){function n(n,i,r,u,f){this.dom=n;this.event=i;this.owner=r;this.handle=u;this.param=f;this.Started=!1;t.Set(this,n)}return n.prototype.Start=function(){this.Started===!1&&(this.Started=!0,this.dom.addEventListener(this.event,this))},n.prototype.Pause=function(){this.Started===!0&&(this.Started=!1,this.dom.removeEventListener(this.event,this))},n.prototype.Dispose=function(){this.Started!==undefined&&(this.Pause(),t.Remove(this),this.dom=undefined,this.event=undefined,this.handle=undefined,this.Started=undefined,this.param=undefined)},n.prototype.Reset=function(){this.Pause();this.Start()},n.prototype.handleEvent=function(n){this.handle.call(this.owner,this,n,this.param)},n.Dispose=function(n,i){var u,r,f;if(i==null)for(r=0,f=t.RemoveAllValues(n);r<f.length;r++)f[r].Dispose();else do if((u=t.IndexOfValue(n,u))===-1)break;else t.RemoveAt(u).Key.Dispose();while(1)},n}();n.DomEventHandler=i}(g=t.basic||(t.basic={})),function(n){function l(n){for(var i=new Uint16Array(n.length),t=0;t<n.length;t++)i[t]=n.charCodeAt(t);return i}function a(n){for(var i="",t=0;t<n.length;t++)i+=String.fromCharCode(n[t]);return i}function e(n){var i,t,r;if(n instanceof Array)return n.slice(0);for(i=new Array(n.length),t=0;t<n.length;t++){if(r=n.charCodeAt(t),r>255)throw"Invalid ASCII Charactere";i[t]=r}return i}function h(n){for(var i="",t=0;t<n.length;t++)i+=String.fromCharCode(n[t]);return i}var i=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],s=[0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11],u,f,r,t,o,c;for(n.string2bytes_16=l,n.bytes2string_16=a,n.string2bytes=e,n.bytes2string=h,f=Array(256),t=0;t<256;t++)f[i[t]]=t;for(u=Array(16),t=0;t<16;t++)u[s[t]]=t;for(r=Array(256),t=0;t<128;t++)r[t]=t<<1,r[128+t]=t<<1^27;o=function(){function n(n){if("string"==typeof n)this.Key=this.InitKey(e(n));else if(n instanceof Array)this.Key=this.InitKey(n);else throw"Invalid Key";}return n.prototype.InitKey=function(n){return n},n.ExpandKey=function(n){var t=n.length,o,s=1,e=t,u,r,f;if(t<=16)e=16,o=176;else if(t<=24)e=24,o=208;else if(t<=32)e=32,o=240;else throw"my.ExpandKey: Only key lengths of 16, 24 or 32 bytes allowed!";for(n.length=e;t<e;t++)n[t]=0;for(u=t;u<o;u+=4)for(r=n.slice(u-4,u),u%t==0?(r=[i[r[1]]^s,i[r[2]],i[r[3]],i[r[0]]],(s<<=1)>=256)&&(s^=283):t>24&&u%t==16&&(r=[i[r[0]],i[r[1]],i[r[2]],i[r[3]]]),f=0;f<4;f++)n[u+f]=n[u+f-t]^r[f]},n.prototype.Encrypt=function(t){var u=this.Key,f=u.length,r;for(n.AddRoundKey(t,u.slice(0,16)),r=16;r<f-16;r+=16)n.SubBytes(t,i),n.ShiftRows(t,s),n.MixColumns(t),n.AddRoundKey(t,u.slice(r,r+16));return n.SubBytes(t,i),n.ShiftRows(t,s),n.AddRoundKey(t,u.slice(r,f)),t},n.prototype.Decrypt=function(t){var r=this.Key,i=r.length;for(n.AddRoundKey(t,r.slice(i-16,i)),n.ShiftRows(t,u),n.SubBytes(t,f),i-=32;i>=16;i-=16)n.AddRoundKey(t,r.slice(i,i+16)),n.MixColumns_Inv(t),n.ShiftRows(t,u),n.SubBytes(t,f);return n.AddRoundKey(t,r.slice(0,16)),t},n.prototype.SEncrypt=function(n){return h(this.Encrypt(e(n)))},n.prototype.SDecrypt=function(n){return h(this.Decrypt(e(n)))},n.SubBytes=function(n,t){for(var i=0;i<16;i++)n[i]=t[n[i]]},n.AddRoundKey=function(n,t){for(var i=0;i<16;i++)n[i]^=t[i]},n.ShiftRows=function(n,t){for(var r=[].concat(n),i=0;i<16;i++)n[i]=r[t[i]]},n.MixColumns=function(n){for(var i=r,t=0;t<16;t+=4){var f=n[t+0],e=n[t+1],o=n[t+2],s=n[t+3],u=f^e^o^s;n[t+0]^=u^i[f^e];n[t+1]^=u^i[e^o];n[t+2]^=u^i[o^s];n[t+3]^=u^i[s^f]}},n.MixColumns_Inv=function(n){for(var i=r,t=0;t<16;t+=4){var f=n[t+0],e=n[t+1],o=n[t+2],s=n[t+3],u=f^e^o^s,h=i[u],c=i[i[h^f^o]]^u;u^=i[i[h^e^s]];n[t+0]^=c^i[f^e];n[t+1]^=u^i[e^o];n[t+2]^=c^i[o^s];n[t+3]^=u^i[s^f]}},n}();n.Aes=o;c=function(t){function i(n){return t.call(this,n)||this}return __extends(i,t),i.prototype.InitKey=function(n){return o.ExpandKey(n),n},i.blockXOR=function(n,t){for(var r=Array(16),i=0;i<16;i++)r[i]=n[i]^t[i];return r},i.blockIV=function(){var i=new n.SecureRandom,t=Array(16);return i.nextBytes(t),t},i.pad16=function(n){for(var t=n.slice(0),r=(16-n.length%16)%16,i=n.length;i<n.length+r;i++)t.push(0);return t},i.depad=function(n){for(n=n.slice(0);n[n.length-1]==0;)n=n.slice(0,n.length-1);return n},i.prototype.Encrypt=function(n){for(var u,e=i.pad16(n),f=i.blockIV(),r=0;r<e.length/16;r++)u=e.slice(r*16,r*16+16),u=i.blockXOR(f.slice(r*16,r*16+16),u),t.prototype.Encrypt.call(this,u),f=f.concat(u);return f},i.prototype.Decrypt=function(n){for(var u,e,f=[],r=1;r<n.length/16;r++)u=n.slice(r*16,r*16+16),e=n.slice((r-1)*16,(r-1)*16+16),t.prototype.Decrypt.call(this,u),u=i.blockXOR(e,u),f=f.concat(u);return i.depad(f)},i}(o);n.AesCBC=c}(ot=t.crypto||(t.crypto={})),function(n){function c(){return new h}function l(n){i[t++]^=n&255;i[t++]^=n>>8&255;i[t++]^=n>>16&255;i[t++]^=n>>24&255;t>=u&&(t-=u)}function o(){l((new Date).getTime())}var h=function(){function n(){this.S=[]}return n.prototype.init=function(n){for(var i,r,t=0;t<256;++t)this.S[t]=t;for(t=i=0;t<256;++t)i=i+this.S[t]+n[t%n.length]&255,r=this.S[t],this.S[t]=this.S[i],this.S[i]=r;this.j=this.i=0},n.prototype.next=function(){var n;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,n=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=n,this.S[n+this.S[this.i]&255]},n}(),u=256,f,i,t,r,e,s;if(i==null){if(i=new Uint8Array(u),t=0,navigator.appName=="Netscape"&&navigator.appVersion<"5"&&window.crypto)for(e=window.crypto.random(32),r=0;r<e.length;++r)i[t++]=e.charCodeAt(r)&255;for(;t<u;)r=Math.floor(65536*Math.random()),i[t++]=r>>>8,i[t++]=r&255;t=0;o()}s=function(){function n(){}return n.prototype.nextBytes=function(n){for(var t=0;t<n.length;++t)n[t]=this.rng_get_byte()},n.prototype.rng_get_byte=function(){if(f==null){for(o(),f=c(),f.init(i),t=0;t<i.length;++t)i[t]=0;t=0}return f.next()},n}();n.SecureRandom=s}(ot=t.crypto||(t.crypto={})),function(n){function s(n){for(var i=new Uint8Array(n.length),t=0;t<n.length;t++)i[t]=n.charCodeAt(t);return i}function c(n){for(var i="",t=0;t<n.length;t++)i+=String.fromCharCode(n[t]);return i}var i=new Uint8Array([99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]),o=new Uint8Array([0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11]),u,f,r,t,e,h;for(n.string2bytes=s,n.bytes2string=c,f=new Uint8Array(256),t=0;t<256;t++)f[i[t]]=t;for(u=new Uint8Array(16),t=0;t<16;t++)u[o[t]]=t;for(r=new Uint8Array(256),t=0;t<128;t++)r[t]=t<<1,r[128+t]=t<<1^27;e=function(){function n(n){if("string"==typeof n)this.Key=this.InitKey(s(n));else if(n instanceof Uint8Array)this.Key=this.InitKey(n);else throw"Invalid Key";}return n.prototype.InitKey=function(n){return n},n.ExpandKey=function(n){var u=n.length,e,o=1,r,t,f;switch(u){case 16:e=176;break;case 24:e=208;break;case 32:e=240;break;default:alert("my.ExpandKey: Only key lengths of 16, 24 or 32 bytes allowed!")}for(r=u;r<e;r+=4)for(t=n.slice(r-4,r),r%u==0?(t=new Uint8Array([i[t[1]]^o,i[t[2]],i[t[3]],i[t[0]]]),(o<<=1)>=256)&&(o^=283):u>24&&r%u==16&&(t=new Uint8Array([i[t[0]],i[t[1]],i[t[2]],i[t[3]]])),f=0;f<4;f++)n[r+f]=n[r+f-u]^t[f]},n.prototype.Encrypt=function(t){var u=this.Key,f=u.length,r;for(n.AddRoundKey(t,u.slice(0,16)),r=16;r<f-16;r+=16)n.SubBytes(t,i),n.ShiftRows(t,o),n.MixColumns(t),n.AddRoundKey(t,u.slice(r,r+16));return n.SubBytes(t,i),n.ShiftRows(t,o),n.AddRoundKey(t,u.slice(r,f)),t},n.prototype.Decrypt=function(t){var r=this.Key,i=r.length;for(n.AddRoundKey(t,r.slice(i-16,i)),n.ShiftRows(t,u),n.SubBytes(t,f),i-=32;i>=16;i-=16)n.AddRoundKey(t,r.slice(i,i+16)),n.MixColumns_Inv(t),n.ShiftRows(t,u),n.SubBytes(t,f);return n.AddRoundKey(t,r.slice(0,16)),t},n.SubBytes=function(n,t){for(var i=0;i<16;i++)n[i]=t[n[i]]},n.AddRoundKey=function(n,t){for(var i=0;i<16;i++)n[i]^=t[i]},n.ShiftRows=function(n,t){for(var r=[].concat(n),i=0;i<16;i++)n[i]=r[t[i]]},n.MixColumns=function(n){for(var i=r,t=0;t<16;t+=4){var f=n[t+0],e=n[t+1],o=n[t+2],s=n[t+3],u=f^e^o^s;n[t+0]^=u^i[f^e];n[t+1]^=u^i[e^o];n[t+2]^=u^i[o^s];n[t+3]^=u^i[s^f]}},n.MixColumns_Inv=function(n){for(var i=r,t=0;t<16;t+=4){var f=n[t+0],e=n[t+1],o=n[t+2],s=n[t+3],u=f^e^o^s,h=i[u],c=i[i[h^f^o]]^u;u^=i[i[h^e^s]];n[t+0]^=c^i[f^e];n[t+1]^=u^i[e^o];n[t+2]^=c^i[o^s];n[t+3]^=u^i[s^f]}},n}();n.ExAes=e;h=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.InitKey=function(n){return e.ExpandKey(n),n},t.blockXOR=function(n,t){for(var r=new Uint8Array(16),i=0;i<16;i++)r[i]=n[i]^t[i];return r},t.blockIV=function(){var t=new ot.SecureRandom,n=new Uint8Array(16);return t.nextBytes(n),n},t.pad16=function(n){for(var i=n.slice(0),r=(16-n.length%16)%16,i=new Uint8Array(n.length+r),t=0,u=n.length;t<u;t++)i[t]=n[t];return i},t.depad=function(n){for(var t=n.length-1;t>=0;t--)if(n[t]!=0)return n.slice(0,t+1);return new Uint8Array(0)},t.prototype.concate=function(n,t){for(var r=new Uint8Array(n.length+t.length),i=0,u=n.length;i<u;i++)r[i]=n[i];for(var i=0,f=n.length,u=t.length;i<u;i++,f++)r[f]=t[i];return r},t.prototype.Encrypt=function(i){var o=this.Key,u,r,f,e;for(i=t.pad16(i),u=t.blockIV(),r=0;r<i.length/16;r++)f=i.slice(r*16,r*16+16),e=u.slice(r*16,(r+1)*16),f=t.blockXOR(e,f),n.prototype.Encrypt.call(this,f),u=this.concate(u,f);return u},t.prototype.Decrypt=function(i){for(var r,h,o=new Uint8Array(i.length),f=0,u=16,e=32,s=1;s<i.length/16;s++)r=i.slice(u,e),h=i.slice(f,u),n.prototype.Decrypt.call(this,r),r=t.blockXOR(h,r),o.set(r,f),f=u,u=e,e+=16;return t.depad(o)},t}(e);n.AesCBC=h}(kt=t.crypto1||(t.crypto1={})),function(n){function c(){return new h}function l(n){i[t++]^=n&255;i[t++]^=n>>8&255;i[t++]^=n>>16&255;i[t++]^=n>>24&255;t>=u&&(t-=u)}function o(){l((new Date).getTime())}var h=function(){function n(){this.S=new Uint8Array(256)}return n.prototype.init=function(n){for(var i,r,t=0;t<256;++t)this.S[t]=t;for(t=i=0;t<256;++t)i=i+this.S[t]+n[t%n.length]&255,r=this.S[t],this.S[t]=this.S[i],this.S[i]=r;this.j=this.i=0},n.prototype.next=function(){var n;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,n=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=n,this.S[n+this.S[this.i]&255]},n}(),u=256,f,i,t,r,e,s;if(i==null){if(i=new Uint8Array(u),t=0,navigator.appName=="Netscape"&&navigator.appVersion<"5"&&window.crypto)for(e=window.crypto.random(32),r=0;r<e.length;++r)i[t++]=e.charCodeAt(r)&255;for(;t<u;)r=Math.floor(65536*Math.random()),i[t++]=r>>>8,i[t++]=r&255;t=0;o()}s=function(){function n(){}return n.prototype.nextBytes=function(n){for(var t=0;t<n.length;++t)n[t]=this.rng_get_byte()},n.prototype.rng_get_byte=function(){if(f==null){for(o(),f=c(),f.init(i),t=0;t<i.length;++t)i[t]=0;t=0}return f.next()},n}();n.SecureRandom=s}(kt=t.crypto1||(t.crypto1={}));ft=new s.Dictionary("buckups");var vi=[234,23,196,234,69,238,92,244,50,110,70,181,109,139,252,209,146,174,40,140,129,41,58,89,102,193,99,194,178,192,239,152],vt=[],yi=function(){function n(t,i){var r,o,f,u,e;if(r=this,t instanceof CSSMediaRule){for(o=t,f=o.cssRules,u=0;u<f.length;u++)e=f[u],e instanceof CSSMediaRule&&new n(e,this);r.IsMedia=!0}i&&(r.Parent=i,i.children?i.children.push(this):i.children=[this]);vt.push(this);r.Rule=t}return n.prototype.Dispose=function(){var n=vt.indexOf(this);n!=-1&&vt.splice(n,1)},Object.defineProperty(n.prototype,"Selectors",{get:function(){var n=null,t;return(n=this,t=n.Rule,n.IsMedia)?[]:(n._selectors=t.selectorText.split(","),n._selectors)},enumerable:!0,configurable:!0}),n.prototype.IsMatch=function(){for(var n=this.Selectors,t=0;n.length;t++);},n}();(function(n){var r=function(){function n(){}return n}(),t,i;n.t1=r;t=function(){function n(){}return n}();n.t2=t;i=function(){function n(){}return n}();n.t3=i})(pi=t.Ids||(t.Ids={}));wi=function(){function n(){}return n.parse=function(n,t,i){i=i||n.__name__;var r=n.value;switch(n.__type__){case"namespace":t[i]=this.parseNamedScop(n);break;case"namedscop":this.context.FromJson(n,e.NamedScop,new a.Path(t,i));break;case"valuepace":this.context.FromJson(n,e.ValueScop,new a.Path(t,i));break;case"stringscop":this.context.FromJson(n,e.StringScop,new a.Path(t,i));break;case"templatestring":this.context.FromJson(n,e.NamedScop,new a.Path(t,i));break;case"template":this.context.FromJson(n,e.NamedScop,new a.Path(t,i))}return t},n.parseNamespace=function(){},n.parseNamedScop=function(){},n.context=new a.SerializationContext(!0),n}(),function(n){function u(n,i,u,f){var s,o,h;return(i=String(i),n instanceof e.DObject&&(s=n.GetProperty(i),s))?(r=n,n.OnPropertyChanged(s,function(n,t){u(t._new,t._old)},f)):(o=Object.getOwnPropertyDescriptor(n,i),!o||o&&o.configurable&&!o.get)?(h=t.create(n),h.observe(o,i,u,f)):(r=null,null)}function h(n,r){function s(i){var o=n;for(i=0;i<r.length;i++){var s=r[i],f=u[i],e=f.obj;if(!e)return;f.pb&&(e instanceof t?e.unobserve(f.propName,f.pb):e.UnObserve(e.GetProperty(f.propName),f.pb),f.pb=null)}}for(var e,u=new Array(r.length),o=n,f=0;f<r.length;f++)e=o[r[f]],u.push({propName:r[f],obj:null,value:e,pb:null}),o=e;s(0)}function i(n,i,r,u){var o,f,s;return(i=String(i),n instanceof e.DObject&&(o=n.GetProperty(i),o))?n.UnObserve(o,r,u):(f=t.create(n),!f)?!1:(f.unobserve(i,r,u),s=f.get(i),s)?s.UnObserve(r,u):!1}function c(n,t,i){if(t&&n)return u(this,typeof n=="string"?n:n.Name,t,i)}function l(n,t,r){if(t&&n)return i(this,typeof n=="string"?n:n.Name,t,r)}var t=function(){function n(n){this.obj=n;this.props={}}return n.prototype.create=function(n,t){var i=this.props[n];return i?i:this.props[n]=new f(this,n,t)},n.prototype.get=function(n){return this.props[n]},n.create=function(t){var i=this.store.Get(t);return i||this.store.Set(t,i=new n(t)),i},n.get=function(n){return this.store.Get(n)},n.prototype.observe=function(n,t,i,r){var u,f;return(n=Object.getOwnPropertyDescriptor(this.obj,t),!n||n&&n.configurable&&!n.get)?(u=this.create(t,n),n?n.set?Object.defineProperty(this.obj,t,{get:n.get,set:u.set,enumerable:n.enumerable}):Object.defineProperty(this.obj,t,{get:u.get,set:u.set,enumerable:n.enumerable}):Object.defineProperty(this.obj,t,n={get:u.get,set:u.set}),u.callback.push(f=new e.PropBinding(i,r)),f):null},Object.defineProperty(n.prototype,"Obj",{set:function(n){for(var t in this.props)this.props[t].set(n&&n[t])},enumerable:!0,configurable:!0}),n.prototype.unobserve=function(n,t,i){var r=this.get(n);return r?r.UnObserve(t,i):!1},n.store=new s.Dictionary(""),n}(),f=function(){function n(n,t,i){this.parent=n;this.p=i;this.callback=[];this.prop={Name:t,Type:Object,Index:-1};this.set=this.set.bind(this);this.get=this.get.bind(this);this.value=n.obj[t]}return n.prototype.getInstCallback=function(){return this.callback},n.prototype.set=function(n){var t=this.value;if(n!=t){this.value=n;this.p&&this.p.set&&this.p.set.call(this.parent.obj,n);this.onPropertyChanged(t,n)}},n.prototype.get=function(){return this.p&&this.p.get&&this.p.get.call(this.parent.obj),this.value},n.prototype.onPropertyChanged=function(n,t){for(var r,u=e.EventArgs.New(this.prop,this.parent.obj,n,t),i=0;i<this.callback.length;i++)r=this.callback[i],o.TryCatch(r,r.handleEvent,void 0,[u])},n.prototype.addEventListener=function(n,t){this.callback.push(new e.PropBinding(n,t))},n.prototype.UnObserve=function(n,t){var u,f,i,r;if(this)if(typeof n!="function"){if(i=this.callback.indexOf(n),i!=-1)return n.Dispose(),this.callback.splice(i,1)}else{for(i=this.callback.length-1;i>=0;i--)if(r=this.callback[i],r.Invoke==n){if(r.Owner===t)return r.Dispose(),this.callback.splice(i,1),!0;u||(u=r,f=i)}if(u)return u.Dispose(),this.callback.splice(f,1),!0}return!1},n}(),r;n.observe=u;n.observePath=h;n.unobserve=i;Object.defineProperty(Object.prototype,"Observe",{writable:!1,enumerable:!1,value:c});Object.defineProperty(Object.prototype,"UnObserve",{writable:!1,enumerable:!1,value:l})}(st=t.injecter||(t.injecter={})),function(n){function r(n,r){l(r,"Id",{value:r.Id||++i,writable:!1,configurable:!1,enumerable:!0});t[n]?t[n].push(r):t[n]=[r]}function u(n,i){var u=t[n],e,f,r;if(u&&u.length)for(e={data:i,name:n,handler:void 0},i=i?i.slice(0):[],i.unshift(e),f=0;f<u.length;f++)r=u[f],e.handler=r,o.TryCatch(r.owner||r,r.callback,void 0,i)}function f(n,i){var r=t[n],u,f,e;if(!r||!r.length)return!0;if(u=r.indexOf(i),u==-1)for(f=0;f<r.length;f++)if(e=r[f],e.Id===i){u=f;break}return u!==-1&&r.splice(u,1),!0}var t={},i=0;n.on=r;n.fire=u;n.off=f}(bi=t.Notification||(t.Notification={})),function(n){function o(n,t,r){var u=i.get(n);u||i.set(n,u=new Map);u.set(t,r)}function s(n,t){o(n,this,t)}function c(n){return e(n,this)}function l(n,t){n.declare=s;n.getData=c;r.set(n,t)}function u(n){return r.get(n)}function a(n,i){var f=u(n);if(!f)return!0;var r=i[2],o=i[1],e=i[0];switch(f.Target){case t.All:return!0;case t.Class:return h.IsClass(e);case t.Function:return!!(r&&typeof r.value=="function");case t.Object:return!!h.IsInstance(e);case t.Property:return!!r;default:return!1}}function f(n,t){var r=i.get(n);return r&&r.get(t)}function v(n){return i.get(n)}function e(n,t){var i=f(n,t),r,e,o;if(!i&&(r=u(t),r&&r.Heritable)){e=h.GetBaseTypes(n,Object);for(o in e)if(i=f(o,t))return i}return i}var t,i,r;(function(n){n[n.Class=2]="Class";n[n.Object=4]="Object";n[n.Function=8]="Function";n[n.Property=16]="Property";n[n.All=-1]="All"})(t=n.AttributeTargets||(n.AttributeTargets={}));i=new Map;r=new Map;n.asAttribute=l;n.getAttributeDef=u;n.check=a;n.getAttributesOf=v;n.getAttributeOf=e}(ki=t.Attributes||(t.Attributes={})),function(n){function o(n,e,o){if(!n)throw"Argument inst is null";switch(i){case t.Stoped:i=t.Waitting;f();case t.Waitting:u[++r]={ins:n,e:e,scop:o};break;case t.Executing:h({ins:n,e:e,scop:o})}}function s(n){if(!n.method)throw"Argument inst is null";switch(i){case t.Stoped:i=t.Waitting;f();case t.Waitting:u[++r]=n;break;case t.Executing:l(n)}}function f(){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame;t?t(e):c.Dispatcher.OnIdle(n,e,!0)}function h(n){try{var t=n.ins.job;t&&t.Todo&&t.Todo(n.ins,n.e)}catch(i){}}function l(n){try{var t=n;t.method&&t.method.apply(t.owner,t.args)}catch(i){}}function a(n){var i,t;try{n.ins?(i=n.ins.job,i&&i.Todo&&i.Todo(n.ins,n.e)):(t=n,t.method&&t.method.apply(t.owner,t.args))}catch(r){}}function e(){for(i=t.Executing;r>=0;r--)a(u[r]);i=t.Stoped}var t;(function(n){n[n.Stoped=0]="Stoped";n[n.Waitting=1]="Waitting";n[n.Executing=2]="Executing"})(t||(t={}));var i=0,u=new Array(100),r=-1;n.Push=o;n.OnPaint=s}(ht=t.PaintThread||(t.PaintThread={})),function(n){function s(n,o,s){switch(r){case t.Stoped:r=t.Waitting;f();case t.Waitting:var h=u[++i];h?(h.prop=o,h.value=s,h.scop=n):u[i]={prop:o,scop:n,value:s};break;case t.Executing:e({prop:o,scop:n,value:s})}}function f(){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame;t?t(f):c.Dispatcher.InIdle()?c.Dispatcher.call(n,function(){c.Dispatcher.OnIdle(ht,o,!0)}):c.Dispatcher.OnIdle(ht,o,!0)}function e(n){try{n.scop.set(n.prop,n.value)}catch(t){}}function o(){for(r=t.Executing;i>=0;i--)e(u[i]);r=t.Stoped}var t;(function(n){n[n.Stoped=0]="Stoped";n[n.Waitting=1]="Waitting";n[n.Executing=2]="Executing"})(t||(t={}));var r=0,u=new Array(100),i=-1;n.Push=s}(gt||(gt={}));e.NamedScop.Create("window",window,0)});define("sys/defs",["require","exports"],function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})});define("sys/Consts",["require","exports"],function(n,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),function(n){n.IDENT="(?:[a-zA-Z_$][\\w.:$\\-*]*)";n.NUMBER="(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)";n.SQUOTE_STRING="(?:'(?:[^'\\\\]|\\\\.)*')";n.DQUOTE_STRING='(?:"(?:[^"\\\\]|\\\\.)*")';n.STRING="(?:"+n.SQUOTE_STRING+"|"+n.DQUOTE_STRING+")";n.ARGUMENT="(?:"+n.IDENT+"|"+n.NUMBER+"|"+n.STRING+"\\s*)";n.ARGUMENTS="(?:"+n.ARGUMENT+"(?:,\\s*"+n.ARGUMENT+")*)";n.ARGUMENT_LIST="(?:\\(\\s*(?:"+n.ARGUMENTS+"?)\\)\\s*)";n.BINDING="("+n.IDENT+"\\s*"+n.ARGUMENT_LIST+"?)";n.OPEN_BRACKET="(\\[\\[|{{)\\s*";n.CLOSE_BRACKET="(?:]]|}})";n.NEGATE="(?:(!)\\s*)?";n.EXPRESSION=n.OPEN_BRACKET+n.NEGATE+n.BINDING+n.CLOSE_BRACKET;n.IS_TOUCH_ONLY=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/);n.css={comments:/\/\*[^*]*\*+([^\/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/,multipleSpaces:/\s+/g}}(i=t.Consts||(t.Consts={})),function(n){n[n.New=0]="New";n[n.Downloading=1]="Downloading";n[n.Downloaded=2]="Downloaded";n[n.Defining=3]="Defining";n[n.Defined=4]="Defined";n[n.Executing=5]="Executing";n[n.Executed=6]="Executed";n[n.Failed=7]="Failed"}(r=t.ModuleStat||(t.ModuleStat={}));Object.freeze(i)});define("sys/db",["require","exports","sys/Corelib","sys/System","context"],function(n,t,i,r,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f;(function(n){var f=typeof openDatabase=="function",l=function(){function n(){this.databaseName="data_store";this.databaseDesc="Data store";this.sqlLiteDBVersion="1.0";this.FIVE_MB=5120;this.tableName="data-store";this._tables__=new h(this);this.shemas=new e(this,"__tables__",t);this.OnLoad=new i.bind.FEventListener(0,!0);this.queue=[];this._commands=[];this._current={value:null};this._IsExecuting=!1;this._job=i.thread.Dispatcher.cretaeJob(this._runCmd,[],this,!1);this._store={};this.__info__=new e(this,"__info__",c)}return n.prototype.initialize=function(){var n=this;return f?(this.database=openDatabase(this.databaseName,this.sqlLiteDBVersion,this.databaseDesc,this.FIVE_MB),this._transaction=this._transaction.bind(this),this._OnError=this._OnError.bind(this),this._OnSuccess=this._OnSuccess.bind(this),this.shemas.CreateIfNotExist(function(){n.__info__.CreateIfNotExist(function(){n.shemas.LoadTableFromDB(n._tables__,function(){n.IsLoaded=!0;n.OnLoad.PInvok(0,[n],n)})})}),this):this},n.prototype.Push=function(n){var t=this,i;if(f)if(n.async){if(this.queue.push(n),this.isExecuting)return;this.queue=[];this.isExecuting=!0;i=this.queue;this.database.transaction(function(n){for(var i=0;i<t.queue.length;i++)typeof t.queue[i].cmd=="string"?t._exeScalSQL(n,t.queue[i]):t._exeVectorSQL(n,t.queue[i]);t.isExecuting=!1},function(n){for(var r,u=0;u<i.length;u++)r=i[u],typeof r.cmd=="string"?r.callback&&r.callback(!1,t,n):r.callback&&r.callback(0,!1,t,n)})}else this.database.transaction(function(i){typeof n.cmd=="string"?t._exeScalSQL(i,n):t._exeVectorSQL(i,n)},function(i){typeof n.cmd=="string"?n.callback&&n.callback(!1,t,i):n.callback&&n.callback(0,!1,t,i)})},n.prototype.execute=function(n,t,i){this.Push({cmd:t,callback:i,async:n})},n.prototype._exeScalSQL=function(n,t){var i=this;n.executeSql(t.cmd,[],t.callback?function(n,r){t.callback(!0,i,n,r);t.callback=undefined}:void 0)},n.prototype._exeVectorSQL=function(n,t){for(var f=this,i=-1,e=t.callback?function(n,u){i++;t.callback&&t.callback(i,!0,f,n,u);i==r.length-1&&(t.callback=undefined)}:void 0,r=t.cmd,u=0;u<r.length;u++)n.executeSql(r[u],[],e)},n.prototype.executes=function(n,t,i){this.Push({async:n,cmd:t,callback:i})},n.prototype.syncExecute=function(n,t){f&&this._Push({cmd:n,callback:t})},n.prototype._Push=function(n){return this._commands.push(n),this._IsExecuting?void 0:this._next()},n.prototype._runCmd=function(){this.database.transaction(this._transaction,this._OnError)},n.prototype._transaction=function(n){n.executeSql(this._current.value.cmd,[],this._OnSuccess)},n.prototype._OnSuccess=function(n,t){try{this._current.value.callback&&this._current.value.callback(!0,this,n,t)}catch(i){}this._next()},n.prototype._OnError=function(n){try{this._current.value.callback&&this._current.value.callback(!1,this,n)}catch(t){}this._next()},n.prototype._next=function(){if(this._commands.length===0){this._IsExecuting=!1;return}this._IsExecuting=!0;this._current.value=this._commands.pop();i.thread.Dispatcher.Push(this._job,[this._current])},n.prototype.CreateTable=function(n,t){if(!f)return this;var i=new e(this,n,t),r={table:i,info:this._tables__.gettableByName(n,t),_dbInfo_:this.shemas};return i.CreateIfNotExist(),this._store[n]=r,this},n.prototype.Get=function(n){return this._store[n]},n.prototype.MakeUpdate=function(n,t){if(f){t==null&&(t=0);typeof t!="number"&&(t=t.valueOf());var i=this._store[n];i&&(i.info.LastUpdate=t,i._dbInfo_.ExecuteOperation({op:o.Update,row:i.info},function(){}))}},n}(),s,e,t,h,c,a,o;n.Database=l;s=function(){function n(n,t){this.tableName=n;this.type=t;this._map={};this.init()}return Object.defineProperty(n.prototype,"Key",{get:function(){return this._key},enumerable:!0,configurable:!0}),n.prototype.init=function(){for(var n,r=i.bind.DObject.getFields(this.type),t=0;t<r.length;t++)n=r[t],n.IsKey&&(this._key=n),this._map[n.Name]=n.Type;this.cretaeCmd=this.getCreateCmd();this.insertCmd=this.getInsertCmd();this.updateCmd=this.getUpdateCmd();this.selectCmd=this.getSelectCmd();this.deleteCmd=this.getDeleteCmd()},n.prototype.getSB=function(n){return i.basic.CompileString(n,this.getDbValue,this)},n.prototype.getCreateCmd=function(){for(var n,u,f=i.bind.DObject.getFields(this.type),t="CREATE TABLE IF NOT EXISTS ["+this.tableName+"] (",r=0;r<f.length;r++){if(n=f[r],u=this.getTypeName(n.Type),u==undefined){console.error("Filed ["+n.Name+"] of table "+this.tableName+" cannot be created");continue}r!==0&&(t+=",");t+="["+n.Name+"] "+u+((n.Attribute&i.bind.PropertyAttribute.IsKey)===i.bind.PropertyAttribute.IsKey?" PRIMARY KEY":" ")}return t+=")",this.getSB(t)},n.prototype.getInsertCmd=function(){for(var u,f=i.bind.DObject.getFields(this.type),t="",r="",n=0;n<f.length;n++)u=f[n],n!==0&&(t+=",",r+=","),t+="["+u.Name+"]",r+="@"+u.Name;return this.getSB("INSERT INTO ["+this.tableName+"] ("+t+") VALUES ("+r+")")},n.prototype.getUpdateCmd=function(){for(var t,f=i.bind.DObject.getFields(this.type),n="",r=null,u=0;u<f.length;u++)t=f[u],u!==0&&(n+=","),!r&&t.IsKey&&(r=t),n+="["+t.Name+"] = @"+t.Name+"";return n="UPDATE ["+this.tableName+"] SET "+n+" WHERE ["+r.Name+"] = @"+r.Name,this.getSB(n)},n.prototype.getSelectCmd=function(){return this.getSB("SELECT * FROM ["+this.tableName+"] WHERE ["+this._key.Name+"] = @"+this._key.Name+" LIMIT 1")},n.prototype.getDeleteCmd=function(){return this.getSB("DELETE FROM ["+this.tableName+"] WHERE ["+this._key.Name+"] = @"+this._key.Name)},n.prototype.getTypeName=function(n){if(n===String)return"TEXT";if(n===Number||n===Date)return"Number";if(n===Boolean)return"Boolean";if(i.reflection.IsInstanceOf(n,r.sdata.DataRow))return"number";if(i.reflection.IsInstanceOf(n,r.sdata.DataTable))return undefined;console.error("Unresolved Type = "+n,n);throw"unresolved type";},n.prototype.getDbValue=function(n,t){var u,f,e;if(t==null)return"null";u=this.params;f=u._map[n];switch(f){case String:return t==null?"null":"'"+t+"'";case Number:return u.getNumber(t);case Boolean:return t==undefined?"null":t?"1":"0";case Date:return u.getNumber(t&&t.valueOf());default:return i.reflection.IsInstanceOf(f,r.sdata.DataRow)?(e=t&&t.Id,e==null)?"null":String(e):undefined}},n.prototype.getNumber=function(n){return n==null||isNaN(n)?"null":String(Math.abs(n)>Number.MAX_VALUE?Number.MAX_VALUE:n)},n.parseBool=function(n){if(n==null)return null;switch(typeof n){case"string":return n==="true"?!0:n==="false"?!1:(n=parseFloat(n),!!n);case"number":break;case"boolean":return n;default:return!!n}},n.prototype.getJsValue=function(t,u){var o=this.params,e=o._map[t],f;switch(e){case String:return u;case Number:return typeof u=="string"?parseFloat(u):u;case Boolean:return n.parseBool(u);case Date:return u===null?n.emptyDate:new Date(typeof u=="string"?parseInt(u):u);default:return i.reflection.IsInstanceOf(e,r.sdata.DataRow)?(f=u&&u.Id,f==null)?"null":String(f):undefined}},n.prototype.getAvaibleCmd=function(n){return n==null?n="["+this._key.Name+"]":n=="*"?n="*":typeof n!="string"&&(n=this.jointCols(n)),"SELECT "+n+" FROM ["+this.tableName+"]"},n.prototype.jointCols=function(n){return n.length==0?"":n.length==1?"["+n[0]+"]":"["+n.join("],[")+"]"},n.emptyDate=new Date(0),n}();n.SQLInstructureBuilder=s;e=function(){function n(n,t,r){if(this.database=n,!i.reflection.IsInstanceOf(r,i.bind.DObject))throw"Type not implimented";this.builder=new s(t,r)}return n.prototype.Insert=function(n,t){this.database.syncExecute(this.builder.insertCmd.apply(n),t)},n.prototype.Delete=function(n,t){this.database.syncExecute(this.builder.deleteCmd.apply(n),t)},n.prototype.Update=function(n,t){this.database.syncExecute(this.builder.updateCmd.apply(n),t)},n.prototype.Select=function(n,t){this.database.syncExecute(this.builder.selectCmd.apply(n),t)},n.prototype.Create=function(n){this.database.syncExecute(this.builder.cretaeCmd.apply({}),n)},n.prototype.ExecuteOperation=function(n,t){var i=this,u=this.getCmd(n),r;this.database.execute(!1,u,r=function(u,f,e,s){if(u=u&&!((n.op==o.Update||n.op==o.UpdateOnly)&&s.rowsAffected==0),!u)do{if(n.op==2)n={op:4,row:n.row};else if(n.op==1)n={op:5,row:n.row};else break;return i.database.execute(!1,i.getCmd(n),r)}while(0);n&&t&&t(u,f,e,s)})},n.prototype.getAvaible=function(n,t){this.database.execute(!1,this.builder.getAvaibleCmd(n),t)},n.prototype.ExecuteOperations=function(n,t){var f=this,i,r,u;if(n.length==0)return t&&t(!0,0);i=0;r=0;this.ExecuteOperation(n[i],u=function(e){if(e||r++,i++,n.length==i)return t&&t(r==0,r);f.ExecuteOperation(n[i],u)})},n.prototype.ExecuteOperations1=function(t,i){var e=n.__count,r,u,f;if(t.length==0)return i&&i(!0,0);for(r=0;r<t.length;r++)t[r]=this.getCmd(t[r]);u=[];this.database.executes(!1,t,f=function(n,r){return r||u.push(t[n]),n==t.length-1?i&&i(u.length!=0,u.length):void 0})},n.prototype.UpdateTableToDB=function(n,t,i){var s=this,e=n instanceof r.sdata.DataTable?n.AsList():n,u=e.slice(0),o=u.map(function(n){return n.Id}),f=[];(i||o.length)&&this.getAvaible(["Id","LastModified"],function(n,r,h,c){var y,v,p,b,a,w,l;if(c==null)return console.error("HardError");for(y=c.rows,l=0;l<y.length;l++)for(v=y[l],p=o.indexOf(v.Id),p==-1?i&&f.push({row:a,op:3}):(b=v.LastModified||0,a=e[p],v.LastModified<a.LastModified&&f.push({row:a,op:1}));(w=u.indexOf(a))!=-1;)u.splice(w,1);for(l=0;l<u.length;l++)f.push({row:u[l],op:2});s.ExecuteOperations1(f,t)})},n.prototype.LoadTableFromDB=function(n,t){var r=this,u=new i.encoding.SerializationContext(!0);this.getAvaible("*",function(f,e,o,s){if(f){var h=s.rows,c=0,l=function(){var r=c+100,e;for(r>h.length&&(r=h.length);c<r;c++)e=h[c],n.Add(n.CreateNewItem(e.Id).FromJson(e,u));r<h.length?i.thread.Dispatcher.call(this,l):t&&t(f)};i.thread.Dispatcher.call(r,l)}else t&&t(f)})},n.prototype.getCmd=function(n){switch(n.op){case 0:return null;case 1:case 4:return this.builder.updateCmd.apply(n.row);case 2:case 5:return this.builder.insertCmd.apply(n.row);case 3:return this.builder.deleteCmd.apply(n.row)}},n.prototype.MakeUpdate=function(n){this.database.MakeUpdate(this.builder.tableName,n)},n.prototype.IsExist=function(n){this.database.execute(!1,"SELECT * FROM ["+this.builder.tableName+"] limit 0",function(t){n&&n(t)})},n.prototype.CreateIfNotExist=function(n){var t=this;this.IsExist(function(i){if(i)return t.Created=!0,n&&n(!0,t);t.Create(function(i){return t.Created=i,n&&n(i,t)})})},n.__count=1,n}();n.DatabaseTable=e;t=function(n){function t(t){var r=n.call(this,i.basic.New())||this;return r.table=t,t&&(r.Type=u.context.NameOf(t.builder.type),r.TableName=t.builder.tableName),r}return __extends(t,n),t.prototype.getStore=function(){return t.store},t.__fields__=function(){return[this.DPTableName,this.DPType,this.DPLastUpdate]},t.prototype.onPropertyChanged=function(){},t.store=new i.collection.Dictionary("_Table__"),t.DPTableName=i.bind.DObject.CreateField("TableName",String),t.DPType=i.bind.DObject.CreateField("Type",String),t.DPLastUpdate=i.bind.DObject.CreateField("LastUpdate",Number),t}(r.sdata.QShopRow);n._Table__=t;h=function(n){function r(i){var r=n.call(this,null,t,function(){return new t(null)})||this;return r.database=i,r}return __extends(r,n),r.prototype.gettableByName=function(n,r){for(var f,e=0;e<this._list.length;e++)if(this._list[e].TableName==n)return this._list[e];return f=new t(this.database.shemas),f.Id=i.basic.New(),f.Type=u.context.NameOf(r),f.TableName=n,f.LastUpdate=1,f.LastModified=new Date(0),this.Add(f),this.database.shemas.ExecuteOperation({op:o.Insert,row:f}),f},r}(r.sdata.DataTable);n._Tables__=h;c=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.__fields__=function(){return[this.DPCount]},t.prototype.getStore=function(){return null},t.prototype.Update=function(){throw new Error("Method not implemented.");},t.prototype.Upload=function(){throw new Error("Method not implemented.");},t.DPCount=i.bind.DObject.CreateField("Count",Number),t}(r.sdata.DataRow);n.__ExeInfo__=c;a=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.c=function(){},t}(r.sdata.DataTable),function(n){n[n.None=0]="None";n[n.Update=1]="Update";n[n.Insert=2]="Insert";n[n.Delete=3]="Delete";n[n.UpdateOnly=4]="UpdateOnly";n[n.InsertOnly=5]="InsertOnly"}(o=n.Operation||(n.Operation={}))})(f=t.db||(t.db={}))});define("sys/Decorators",["require","exports","sys/Corelib"],function(n,t,i){"use strict";function r(n){return function(t,r){if(t=t[r],!i.reflection.IsPrototype(t))throw"Invalid Implimentation of property Attribute";if(i.reflection.IsClass(t))throw"invalid params type";if(typeof t!="function")throw"invalid params type";i.Api.RegisterApiCallback({Name:n,DoApiCallback:t})}}Object.defineProperty(t,"__esModule",{value:!0});t.AsAPI=r});define("sys/Dom",["require","exports"],function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object","[object Error]":"error","[object Symbol]":"symbol"},r=i.toString,u;(function(n){function t(n){return null!=n&&n===n.window}function u(n){return t(n)?n:9===n.nodeType&&n.defaultView}function e(n){var t;if(n){if(n.getClientRects().length){if(t=n.getBoundingClientRect(),t.width||t.height){var i=n.ownerDocument,r=u(i),f=i.documentElement;return{top:t.top+r.pageYOffset-f.clientTop,left:t.left+r.pageXOffset-f.clientLeft}}return t}return{top:0,left:0}}}function o(n){for(var t=n.offsetTop,i=n.offsetLeft,r=n.offsetWidth,u=n.offsetHeight;n.offsetParent;)n=n.offsetParent,t+=n.offsetTop,i+=n.offsetLeft;return t<window.pageYOffset+window.innerHeight&&i<window.pageXOffset+window.innerWidth&&t+u>window.pageYOffset&&i+r>window.pageXOffset}function s(n){for(var t=n.offsetTop,i=n.offsetLeft,r=n.offsetWidth,u=n.offsetHeight;n.offsetParent;)n=n.offsetParent,t+=n.offsetTop,i+=n.offsetLeft;return t>=window.pageYOffset&&i>=window.pageXOffset&&t+u<=window.pageYOffset+window.innerHeight&&i+r<=window.pageXOffset+window.innerWidth}n.offset=e;n.elementInViewport=o;n.elementEntirelyInViewport=s})(u=t.Dom||(t.Dom={}))});define("sys/Encoding",["require","exports","sys/Corelib"],function(n,t,i){"use strict";function e(){}var c,f,r,l,a,v;Object.defineProperty(t,"__esModule",{value:!0});i.encoding.SerializationContext.GlobalContext.Register(Number,{FromJson:function(n){if(n==null)return 0;if(typeof n=="number")return n;if(typeof n=="string")return parseInt(n);throw"basic.Guid.FromNumber(parseInt(a));";},ToJson:function(n){return n==null?0:n.toString()}});i.encoding.SerializationContext.GlobalContext.Register(Date,{FromJson:function(n){return n==null?null:typeof n=="number"?new Date(n):typeof n=="string"?new Date(n):undefined},ToJson:function(n){return n.toJSON()}});t.init=e;var u=function(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return h(n,Array.prototype.slice.call(arguments,1))},o=function(n,t){function o(n){r.length&&r[r.length-1].type==="string"?r[r.length-1].value+=n:r.push({type:"string",value:n})}function c(n,t,i){r.push({type:"specifier",specifier:n,precision:t,substitutionIndex:i})}for(var h,e,r=[],s=0,i=0,u=n.indexOf("%",i);u!==-1;u=n.indexOf("%",i)){if(n.length===i)break;if(o(n.substring(i,u)),i=u+1,n[i]==="%"){o("%");++i;continue}if(f(n,i)){for(h=parseInt(n.substring(i),10);f(n,i);)++i;h>0&&n[i]==="$"&&(s=h-1,++i)}if(e=-1,n[i]===".")for(++i,e=parseInt(n.substring(i),10),isNaN(e)&&(e=0);f(n,i);)++i;if(!(n[i]in t)){o(n.substring(u,i+1));++i;continue}c(n[i],e,s);++s;++i}return o(n.substring(i)),r},s={d:function(n){return isNaN(n)?0:n},f:function(n,t){return n&&t.precision>-1&&(n=n.toFixed(t.precision)),isNaN(n)?t.precision>-1?Number(0).toFixed(t.precision):0:n},s:function(n){return n}},h=function(n,t){return n(n,t,s,"",function(n,t){return n+t}).formattedResult},y=function(n,t,i,r,u,f){function l(){return'String.format("'+n+'", "'+Array.prototype.join.call(t,'", "')+'")'}function p(n){console.warn(l()+": "+n)}function a(n){console.error(l()+": "+n)}var e,c,h;if(!n||!t||!t.length)return{formattedResult:u(r,n),unusedSubstitutions:t};var s=r,v=f||o(n,i),y={};for(h=0;h<v.length;++h){if(e=v[h],e.type==="string"){s=u(s,e.value);continue}if(e.type!=="specifier"){a('Unknown token type "'+e.type+'" found.');continue}if(e.substitutionIndex>=t.length){a("not enough substitution arguments. Had "+t.length+" but needed "+(e.substitutionIndex+1)+", so substitution was skipped.");s=u(s,"%"+(e.precision>-1?e.precision:"")+e.specifier);continue}if(y[e.substitutionIndex]=!0,!(e.specifier in i)){p("unsupported format character “"+e.specifier+"”. Treating as a string.");s=u(s,t[e.substitutionIndex]);continue}s=u(s,i[e.specifier](t[e.substitutionIndex],e))}for(c=[],h=0;h<t.length;++h)h in y||c.push(t[h]);return{formattedResult:s,unusedSubstitutions:c}};String.prototype.unescapeHTML=function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#58;/g,":").replace(/&quot;/g,'"').replace(/&#60;/g,"<").replace(/&#62;/g,">").replace(/&amp;/g,"&")};String.prototype.collapseWhitespace=function(){return this.replace(/[\s\xA0]+/g," ")};String.prototype.trimMiddle=function(n){if(this.length<=n)return String(this);var t=n>>1,i=n-t-1;return this.substr(0,t)+"…"+this.substr(this.length-i,i)};String.prototype.trimEnd=function(n){return this.length<=n?String(this):this.substr(0,n-1)+"…"};String.prototype.trimURL=function(n){var t=this.replace(/^(https|http|file):\/\//i,"");return n&&t.toLowerCase().startsWith(n.toLowerCase())&&(t=t.substr(n.length)),t};String.prototype.toTitleCase=function(){return this.substring(0,1).toUpperCase()+this.substring(1)};String.prototype.compareTo=function(n){return this>n?1:this<n?-1:0};String.prototype.removeURLFragment=function(){var n=this.indexOf("#");return n==-1&&(n=this.length),this.substring(0,n)};c=function(n){var t,i;if(!n)return 0;for(t=0,i=0;i<n.length;++i)t=t*31+n.charCodeAt(i)|0;return Math.abs(t)};f=function(n,t){var i=n.charCodeAt(t);return 48<=i&&i<=57};String.prototype.toBase64=function(){function t(n){return n<26?n+65:n<52?n+71:n<62?n-4:n===62?43:n===63?47:65}var o=new window.TextEncoder,f=o.encode(this),e=f.length,i="",r,n,u;if(e===0)return i;for(n=0,u=0;u<e;u++)r=u%3,n|=f[u]<<(16>>>r&24),r===2&&(i+=String.fromCharCode(t(n>>>18&63),t(n>>>12&63),t(n>>>6&63),t(n&63)),n=0);return r===0?i+=String.fromCharCode(t(n>>>18&63),t(n>>>12&63),61,61):r===1&&(i+=String.fromCharCode(t(n>>>18&63),t(n>>>12&63),t(n>>>6&63),61)),i};r={Color:null};l=function(){function n(n,t,i){this.Format={Original:"original",Nickname:"nickname",HEX:"hex",ShortHEX:"shorthex",RGB:"rgb",RGBA:"rgba",HSL:"hsl",HSLA:"hsla"};this.prototype={format:function(){return this._format},hsla:function(){var s,u,h;if(this._hsla)return this._hsla;var n=this._rgba[0],t=this._rgba[1],f=this._rgba[2],i=Math.max(n,t,f),e=Math.min(n,t,f),r=i-e,o=i+e;return s=e===i?0:n===i?(1/6*(t-f)/r+1)%1:t===i?1/6*(f-n)/r+1/3:1/6*(n-t)/r+2/3,u=.5*o,h=u===0?0:u===1?0:u<=.5?r/o:r/(2-o),this._hsla=[s,h,u,this._rgba[3]],this._hsla},canonicalHSLA:function(){var n=this.hsla();return[Math.round(n[0]*360),Math.round(n[1]*100),Math.round(n[2]*100),n[3]]},hsva:function(){var i=this.hsla(),r=i[0],n=i[1],t=i[2];return n*=t<.5?t:1-t,[r,n!==0?2*n/(t+n):0,t+n,i[3]]},hasAlpha:function(){return this._rgba[3]!==1},canBeShortHex:function(){var n,t;if(this.hasAlpha())return!1;for(n=0;n<3;++n)if(t=Math.round(this._rgba[n]*255),t%17)return!1;return!0},asString:function(n){function t(n){return Math.round(n*255)}function e(n){var t=Math.round(n*255).toString(16);return t.length===1?"0"+t:t}function o(n){return(Math.round(n*255)/17).toString(16)}var f,i;if(n===this._format&&this._originalTextIsValid)return this._originalText;n||(n=this._format);switch(n){case r.Color.Format.Original:return this._originalText;case r.Color.Format.RGB:return this.hasAlpha()?null:u("rgb(%d, %d, %d)",t(this._rgba[0]),t(this._rgba[1]),t(this._rgba[2]));case r.Color.Format.RGBA:return u("rgba(%d, %d, %d, %f)",t(this._rgba[0]),t(this._rgba[1]),t(this._rgba[2]),this._rgba[3]);case r.Color.Format.HSL:return this.hasAlpha()?null:(f=this.hsla(),u("hsl(%d, %d%, %d%)",Math.round(f[0]*360),Math.round(f[1]*100),Math.round(f[2]*100)));case r.Color.Format.HSLA:return i=this.hsla(),u("hsla(%d, %d%, %d%, %f)",Math.round(i[0]*360),Math.round(i[1]*100),Math.round(i[2]*100),i[3]);case r.Color.Format.HEX:return this.hasAlpha()?null:u("#%s%s%s",e(this._rgba[0]),e(this._rgba[1]),e(this._rgba[2])).toUpperCase();case r.Color.Format.ShortHEX:return this.canBeShortHex()?u("#%s%s%s",o(this._rgba[0]),o(this._rgba[1]),o(this._rgba[2])).toUpperCase():null;case r.Color.Format.Nickname:return this.nickname()}return this._originalText},rgba:function(){return this._rgba.slice()},canonicalRGBA:function(){for(var t=new Array(4),n=0;n<3;++n)t[n]=Math.round(this._rgba[n]*255);return t[3]=this._rgba[3],t},nickname:function(){var t,n;if(!r.Color._rgbaToNickname){r.Color._rgbaToNickname={};for(t in r.Color.Nicknames)n=r.Color.Nicknames[t],n.length!==4&&(n=n.concat(1)),r.Color._rgbaToNickname[n]=t}return r.Color._rgbaToNickname[this.canonicalRGBA()]||null},toProtocolRGBA:function(){var n=this.canonicalRGBA();return{r:n[0],g:n[1],b:n[2],a:n[3]!=1?n[3]:undefined}},invert:function(){var n=[];return n[0]=1-this._rgba[0],n[1]=1-this._rgba[1],n[2]=1-this._rgba[2],n[3]=this._rgba[3],new r.Color(n,r.Color.Format.RGBA)},setAlpha:function(n){var t=this._rgba.slice();return t[3]=n,new r.Color(t,r.Color.Format.RGBA)}};this._tmpHSLA=[0,0,0,0];this._blendedFg=[0,0,0,0];this._rgba=n;this._originalText=i||null;this._originalTextIsValid=!!this._originalText;this._format=t;typeof this._rgba[3]=="undefined"&&(this._rgba[3]=1);for(var f=0;f<4;++f)this._rgba[f]<0&&(this._rgba[f]=0,this._originalTextIsValid=!1),this._rgba[f]>1&&(this._rgba[f]=1,this._originalTextIsValid=!1)}return n.prototype.parse=function(n){var a=n.toLowerCase().replace(/\s+/g,""),t=a.match(/^(?:#([0-9a-f]{3}|[0-9a-f]{6})|rgb\(((?:-?\d+%?,){2}-?\d+%?)\)|(\w+)|hsl\((-?\d+\.?\d*(?:,-?\d+\.?\d*%){2})\))$/i),i,h,e,c,o,y,f,u;if(t){if(t[1]){i=t[1].toUpperCase();i.length===3?(h=r.Color.Format.ShortHEX,i=i.charAt(0)+i.charAt(0)+i.charAt(1)+i.charAt(1)+i.charAt(2)+i.charAt(2)):h=r.Color.Format.HEX;var p=parseInt(i.substring(0,2),16),w=parseInt(i.substring(2,4),16),b=parseInt(i.substring(4,6),16);return new r.Color([p/255,w/255,b/255,1],h,n)}if(t[2])return e=t[2].split(/\s*,\s*/),u=[r.Color._parseRgbNumeric(e[0]),r.Color._parseRgbNumeric(e[1]),r.Color._parseRgbNumeric(e[2]),1],new r.Color(u,r.Color.Format.RGB,n);if(t[3])return(c=t[3].toLowerCase(),c in r.Color.Nicknames)?(u=r.Color.Nicknames[c],o=r.Color.fromRGBA(u),o._format=r.Color.Format.Nickname,o._originalText=n,o):null;if(t[4]){var l=t[4].replace(/%/g,"").split(/\s*,\s*/),v=[r.Color._parseHueNumeric(l[0]),r.Color._parseSatLightNumeric(l[1]),r.Color._parseSatLightNumeric(l[2]),1],u=[];return r.Color.hsl2rgb(v,u),new r.Color(u,r.Color.Format.HSL,n)}return null}if(y=/^(?:rgba\(((?:-?\d+%?,){3}-?(?:\d+|\d*\.\d+))\)|hsla\((-?(?:\d+|\d*\.\d+)(?:,-?(?:\d+|\d*\.\d+)*%){2},-?(?:\d+|\d*\.\d+))\))$/,t=a.match(y),t){if(t[1])return f=t[1].split(/\s*,\s*/),u=[r.Color._parseRgbNumeric(f[0]),r.Color._parseRgbNumeric(f[1]),r.Color._parseRgbNumeric(f[2]),r.Color._parseAlphaNumeric(f[3])],new r.Color(u,r.Color.Format.RGBA,n);if(t[2]){var s=t[2].replace(/%/g,"").split(/\s*,\s*/),v=[r.Color._parseHueNumeric(s[0]),r.Color._parseSatLightNumeric(s[1]),r.Color._parseSatLightNumeric(s[2]),r.Color._parseAlphaNumeric(s[3])],u=[];return r.Color.hsl2rgb(v,u),new r.Color(u,r.Color.Format.HSLA,n)}}return null},n.prototype.fromRGBA=function(n){return new r.Color([n[0]/255,n[1]/255,n[2]/255,n[3]],r.Color.Format.RGBA)},n.prototype.fromHSVA=function(n){var t=[];return r.Color.hsva2rgba(n,t),new r.Color(t,r.Color.Format.HSLA)},n.prototype._parseRgbNumeric=function(n){var t=parseInt(n,10);return t/(n.indexOf("%")!==-1?100:255)},n.prototype._parseHueNumeric=function(n){return isNaN(n)?0:parseFloat(n)/360%1},n.prototype._parseSatLightNumeric=function(n){return Math.min(1,parseFloat(n)/100)},n.prototype._parseAlphaNumeric=function(n){return isNaN(n)?0:parseFloat(n)},n.prototype._hsva2hsla=function(n,t){var f=n[0],i=n[1],u=n[2],r=(2-i)*u;u===0||i===0?i=0:i*=u/(r<1?r:2-r);t[0]=f;t[1]=i;t[2]=r/2;t[3]=n[3]},n.prototype.hsl2rgb=function(n,t){function e(n,t,i){return i<0?i+=1:i>1&&(i-=1),i*6<1?n+(t-n)*i*6:i*2<1?t:i*3<2?n+(t-n)*(2/3-i)*6:n}var f=n[0],i=n[1],r=n[2],u;i<0&&(i=0);u=r<=.5?r*(1+i):r+i-r*i;var o=2*r-u,s=f+1/3,h=f,c=f-1/3;t[0]=e(o,u,s);t[1]=e(o,u,h);t[2]=e(o,u,c);t[3]=n[3]},n.prototype.hsva2rgba=function(n,t){r.Color._hsva2hsla(n,r.Color.hsva2rgba._tmpHSLA);r.Color.hsl2rgb(r.Color.hsva2rgba._tmpHSLA,t);for(var i=0;i<r.Color.hsva2rgba._tmpHSLA.length;i++)this._tmpHSLA[i]=0},n.prototype.luminance=function(n){var t=n[0],i=n[1],r=n[2],u=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),f=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4),e=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4);return.2126*u+.7152*f+.0722*e},n.prototype.blendColors=function(n,t,i){var r=n[3];i[0]=(1-r)*t[0]+r*n[0];i[1]=(1-r)*t[1]+r*n[1];i[2]=(1-r)*t[2]+r*n[2];i[3]=r+t[3]*(1-r)},n.prototype.calculateContrastRatio=function(n,t){var i;r.Color.blendColors(n,t,r.Color.calculateContrastRatio._blendedFg);var u=r.Color.luminance(r.Color.calculateContrastRatio._blendedFg),f=r.Color.luminance(t),e=(Math.max(u,f)+.05)/(Math.min(u,f)+.05);for(i=0;i<r.Color.calculateContrastRatio._blendedFg.length;i++)r.Color.calculateContrastRatio._blendedFg[i]=0;return e},n.prototype.desiredLuminance=function(n,t,i){function u(){return i?(n+.05)*t-.05:(n+.05)/t-.05}var r=u();return(r<0||r>1)&&(i=!i,r=u()),r},n}(),function(n){function f(n){var i=n.length,t,r;if(i%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return t=n.indexOf("="),t===-1&&(t=i),r=t===i?0:4-t%4,[t,r]}function s(n){var t=f(n),r=t[0],i=t[1];return(r+i)*3/4-i}function h(n,t,i){return(t+i)*3/4-i}function c(n){for(var r,l=f(n),c=l[0],s=l[1],u=new e(h(n,c,s)),o=0,a=s>0?c-4:c,i=0;i<a;i+=4)r=t[n.charCodeAt(i)]<<18|t[n.charCodeAt(i+1)]<<12|t[n.charCodeAt(i+2)]<<6|t[n.charCodeAt(i+3)],u[o++]=r>>16&255,u[o++]=r>>8&255,u[o++]=r&255;return s===2&&(r=t[n.charCodeAt(i)]<<2|t[n.charCodeAt(i+1)]>>4,u[o++]=r&255),s===1&&(r=t[n.charCodeAt(i)]<<10|t[n.charCodeAt(i+1)]<<4|t[n.charCodeAt(i+2)]>>2,u[o++]=r>>8&255,u[o++]=r&255),u}function l(n){return i[n>>18&63]+i[n>>12&63]+i[n>>6&63]+i[n&63]}function a(n,t,i){for(var u,f=[],r=t;r<i;r+=3)u=(n[r]<<16&16711680)+(n[r+1]<<8&65280)+(n[r+2]&255),f.push(l(u));return f.join("")}function v(n){for(var t,r=n.length,e=r%3,f=[],o=16383,u=0,s=r-e;u<s;u+=o)f.push(a(n,u,u+o>s?s:u+o));return e===1?(t=n[r-1],f.push(i[t>>2]+i[t<<4&63]+"==")):e===2&&(t=(n[r-2]<<8)+n[r-1],f.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"=")),f.join("")}for(var i=[],t=[],e=typeof Uint8Array!="undefined"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,o=u.length;r<o;++r)i[r]=u[r],t[u.charCodeAt(r)]=r;t["-".charCodeAt(0)]=62;t["_".charCodeAt(0)]=63;n.byteLength=s;n.toByteArray=c;n.fromByteArray=v}(a=t.Base64||(t.Base64={})),function(n){function t(n,t,i,r,u){var f,o,l=u*8-r-1,a=(1<<l)-1,v=a>>1,e=-7,s=i?u-1:0,c=i?-1:1,h=n[t+s];for(s+=c,f=h&(1<<-e)-1,h>>=-e,e+=l;e>0;f=f*256+n[t+s],s+=c,e-=8);for(o=f&(1<<-e)-1,f>>=-e,e+=r;e>0;o=o*256+n[t+s],s+=c,e-=8);if(f===0)f=1-v;else{if(f===a)return o?NaN:(h?-1:1)*Infinity;o=o+Math.pow(2,r);f=f-v}return(h?-1:1)*o*Math.pow(2,f-r)}function i(n,t,i,r,u,f){var e,o,s,l=f*8-u-1,a=(1<<l)-1,h=a>>1,y=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=r?0:f-1,v=r?1:-1,p=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===Infinity?(o=isNaN(t)?1:0,e=a):(e=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-e))<1&&(e--,s*=2),t+=e+h>=1?y/s:y*Math.pow(2,1-h),t*s>=2&&(e++,s/=2),e+h>=a?(o=0,e=a):e+h>=1?(o=(t*s-1)*Math.pow(2,u),e=e+h):(o=t*Math.pow(2,h-1)*Math.pow(2,u),e=0));u>=8;n[i+c]=o&255,c+=v,o/=256,u-=8);for(e=e<<u|o,l+=u;l>0;n[i+c]=e&255,c+=v,e/=256,l-=8);n[i+c-v]|=p*128}n.read=t;n.write=i}(v=t.IEEE754||(t.IEEE754={}))});define("sys/Jobs",["require","exports","sys/Corelib","context"],function(n,t,i,r){"use strict";function u(n){return n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement}function f(n){var i=n.getAttribute("target"),t,u,r;if(i!=null){if(t=i.split("/"),u=n,t.length>2)throw"Error";return t.length>1?(i=t[1],r=parseInt(t[0])+1):r=1,{depth:r,href:i}}}function e(n,t,i){for(var u,r=n,f=0;f<t;f++)r=r.parentElement;return!i||i==""?r:(u=$(i,r),u&&(u instanceof Array?u.length!=0&&(r=u[0]):r=u),r)}function s(n){var t=f(n);return t?e(n,t.depth,t.href):n}var o,h;Object.defineProperty(t,"__esModule",{value:!0});o=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];t.parseTarget=f;t.getTarget=e;t.getTargetFrom=s,function(n){function v(){}function y(){}function p(n){return(n-621355968000000000)/1e4}function c(n){var r=n.dom.getAttribute("target"),i;if(!r)return n.dom;for(var u=r.split("/"),f=parseInt(u[0])||0,e=u[1],t=n.dom;f!=0;)f--,t=t.parentElement||t;return e&&(i=$(e,t),i&&(i instanceof Array?i.length!=0&&(t=i[0]):t=i)),t||n.dom}var f,t,e,o,s,h,a,l;n.InputChecks=v;n.Load=y,function(n){function r(n,i,r){Object.defineProperty(t,n,{value:i,configurable:!r,writable:!r,enumerable:!1})}function i(){var i=/(0{1}[5|7|6|9]{1}\d{8})/,r=/(0{1}[2|3]{1}\d{7})/,f=/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,e=/^[a-z|A-Z\s]*$/,u=/^([a-zA-Z\@][a-zA-Z\d\@\._]{5,20})$/,o=/[\w\s\.\d\/\*\ \+\-\%\=°]*/;t.readonly=function(){return!1};t.alphanumeric=function(n){return!!n.match(/^[a-zA-Z0-9]*$/)};t.ip=function(n){return!!n.match(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/)};t.numeric=function(n){return!!n.match(/^-?[0-9]+$/)};t.int=function(n){return!!n.match(/^(?:-?(?:0|[1-9][0-9]*))$/)};t.decimal=function(n){return!!n.match(/^(?:-?(?:0|[1-9][0-9]*))?(?:\.[0-9]*)?$/)};t.text=function(){return!0};t.password=function(n){return!!n.match(/^[a-zA-Z0-9\s\.\@\!\?]+$/)};t.any=function(){return!0};t.ref=function(n){return!!n.match(/^[A-Z]{2}[0-9]{1,5}$/)};t.creditcard=function(n){var r,f,t,u,i;if(n=n.replace(/[^0-9]+/g,""),!n.match(/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/))return!1;for(r=0,u=!1,i=n.length-1;i>=0;i--)f=n.substring(i,i+1),t=parseInt(f,10),u?(t*=2,r+=t>=10?t%10+1:t):r+=t,u=u?!1:!0;return r%10!=0?!1:!0};t.tel=function(n){return n=n.trim(),r.test(n)&&n.length===9||i.test(n)&&n.length===10};t.mail=function(n){var t=f.exec(n);return t!==null&&t[0].length===n.length};t.name=function(n){var t=e.exec(n);return t!==null&&t[0].length===n.length};t.username=function(n){var t=u.exec(n);return t!==null&&t[0].length===n.length};t.dimention=function(n){var t=o.exec(n);return t!==null&&t[0].length===n.length};t.select=function(n){var t=u.exec(n);return t!==null&&t[0].length===n.length};Object.freeze(n);Object.freeze(i);Object.freeze(r)}function e(n){if(!n.Ischanging){n.Ischanging=!0;try{n.dom.value=n.Scop.Value||""}catch(e){}n.Ischanging=!1}}function o(){return!0}function s(){}function h(n,i){var r=n.dom.getAttribute("db-check");r==="readonly"&&(n.dom.contentEditable="false");n.Checker=t[r];n.Handle=this.handleEvent;this.Todo(n,i);n.addEventListener("ochange",u(n.dom)?"change":"textContentChanged",n)}function c(n){if(!n.Ischanging){n.Ischanging=!0;try{var t=n.dom.value;n.Checker?n.Checker(t)?n.Scop.Value=t:n.dom.value=n.Scop.Value:n.Scop.Value=t}catch(e){}n.Ischanging=!1}}function l(n){n.removeEventListener("ochange")}function a(){return{Name:f,Todo:e,OnInitialize:h,Check:o,OnScopDisposing:l,OnError:s,handleEvent:c}}n.Register=r;var t={},f="input";n.init=i;n.Instance=a;i()}(f||(f={}));t=new i.basic.CodeCompiler;e=function(){function n(){this.Name="$"}return n.prototype.Todo=function(n){for(var i,u=n.getValue("regs"),f=n.Scop,e=n.Scop.Value,t=[e,f,undefined,n,undefined],r=0;r<u.length;r++)i=u[r],t[2]=i.stat||n.dom,t[4]=i.evalCode,t[2].textContent=i.evalCode.apply(f,t)},n.prototype.OnError=function(){},n.prototype.OnInitialize=function(n,r){var o=this,u=n.dom.firstChild,e=[],f;n.addValue("regs",e);do u instanceof Text&&(f=t.push(u.textContent),f.IsString?t.remove(f):(f.stat=u,e.push(f),i.bind.Observer));while(u=u.nextSibling);t.onload=function(t){t.reset();o.Todo(n,r)};t.Compile()},n.prototype.OnScopDisposing=function(n){var t=n.getValue("regs");t.length=0},n}();n.interpolation=e;i.bind.Register(new e);o=function(){function n(){this.Name="checkbox"}return n.prototype.Todo=function(n){n.dom.checked=n.Scop.Value},n.prototype.OnError=function(){},n.prototype.OnInitialize=function(n,t){this.Todo(n,t);n.addEventListener("change","change",n);n.Handle=this.Handle},n.prototype.OnScopDisposing=function(){},n.prototype.Handle=function(n){var t=n.dom.checked;n.Scop.Value=t==null?null:!!t},n}();n.CheckBox=o;i.bind.Register(new o);s=function(){function n(){this.checks={};this.Name="number";this.reg=function(n){return!!n.match(/^[+-]?\d+(?:\.\d+)?$/)}}return n.prototype.Todo=function(n){if(!n.Ischanging){n.Ischanging=!0;try{var t=n.Scop.Value;t=t==null?n._store.def:t;n.dom instanceof HTMLInputElement?n.dom.value=t:n.dom.textContent=t}catch(e){}n.Ischanging=!1}},n.prototype.OnInitialize=function(n,t){var r=this,i=n.dom,f=i.getAttribute("db-check");n.addValue("max",parseFloat(i.getAttribute("max")||"9999999999"));n.addValue("min",parseFloat(i.getAttribute("min")||"-9999999999"));n.addValue("def",parseFloat(i.getAttribute("default")||"0.00"));f==="readonly"?i.contentEditable="false":(n.Handle=this.handleEvent,n.addEventListener("ochange",u(i)?"change":"textContentChanged",function(t){r.handleEvent(n,t)}));this.Todo(n,t)},n.prototype.handleEvent=function(n){var t,r,u,i;if(!n.Ischanging){n.Ischanging=!0;try{t=n.dom;r=t.value;this.reg(r)?(u=Math.round(parseFloat(r)*1e3)/1e3,i=Math.max(n.getValue("min"),Math.min(u,n.getValue("max"))),n.Scop.Value=i,u!=i&&(t.value=i.toString())):t.value=String(Math.round((n.Scop.Value||0)*1e3)/1e3)}catch(e){}n.Ischanging=!1}},n.prototype.OnScopDisposing=function(n){n.removeEventListener("ochange")},n}();n.FloatJob=s;h=function(){function n(){this.checks={};this.Name="select"}return n.prototype.Todo=function(n){var r=n.getValue("db-const"),i=n.getValue("db-style"),u=n.Scop.Value,t;try{t=n.dom;r===u?t.classList.add(i):t.classList.remove(i)}catch(e){}},n.prototype.OnError=function(){},n.prototype.OnInitialize=function(n,t){var i=n.dom,r=this.callback.bind(n);n.addValue("__",r);n.addValue("db-const",i.getAttribute("db-const"));n.addValue("db-style",i.getAttribute("db-style"));this.Todo(n,t);i.addEventListener("click",r)},n.prototype.callback=function(){var n=this,t;try{t=n.getValue("db-const");n.Scop.Value=t}catch(e){}},n.prototype.OnScopDisposing=function(){},n}();n.AccordionSelectJob=h;n.LabelJob=i.bind.Register({Name:"readonly",Todo:function(n){for(var r=n.getValue("target"),u=!n.Scop.Value,i=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT),t;i.nextNode();)t=i.currentNode,typeof t.readOnly=="boolean"&&(t.readOnly=u)},OnInitialize:function(n,t){n.addValue("target",c(n));this.Todo(n,t)}});n.LabelJob=i.bind.Register({Name:"toggleText",Todo:function(n){var t=n.getValue("data"),i=n.Scop.Value;n.dom.textContent=t[i]},OnInitialize:function(n,t){var i=n.dom.attributes.getNamedItem("data");if(i)try{n.addValue("data",JSON.parse(i.value))}catch(t){n.addValue("data",{})}else n.addValue("data",{});this.Todo(n,t)}});n.LabelJob=i.bind.Register(new i.bind.Job("label",function(n){var t=n.dom;t.textContent=n.Scop.Value||""},null,null,function(n){var t=n.dom;t.textContent=n.Scop.Value||""},function(){}));n.LabelJob=i.bind.Register({Name:"html",Todo:function(n){var t=n.dom;t.innerHTML=n.Scop.Value||""},OnInitialize:function(n,t){this.Todo(n,t)}});var w=621355968000000000,b=1e4,k=864e13,d=function(n){var i,t,r;return isNaN(n)?"NANA-NA-NATNA:NA:BA.TMAN":(i=n-w,t=i/b,t>k)?"+WHOAWH-OA-ISTOO:FA:RA.WAYZ":(r=new Date(t),r.toISOString())};i.bind.Register({Name:"cdate",OnInitialize:function(n,t){this.Todo(n,t)},Todo:function(n){var i=n.dom,r=n.Scop.Value,t=new Date(p(r));i instanceof HTMLInputElement?n.dom.valueAsDate=t:n.dom.textContent=t.toLocaleString()}});a={"true":3,2:2,3:3};n.LabelJob=i.bind.Register({Name:"date",OnInitialize:function(n,t){var r=n.dom,i=a[r.getAttribute("db-twoway")];n._store.tw=i=i===undefined?1:parseInt(i);(i&2)==2&&n.addEventListener("change",u(r)?"change":"textContentChanged",{handleEvent:function(){var t=n.dom;this.self.Scop.Value=t instanceof HTMLInputElement?t.valueAsDate:new Date(t.textContent)},self:n});this.Todo(n,t)},Todo:function(n){var r=n._store.tw;if((r&1)==1){var u=n.dom,t=n.Scop.Value,i=t==null?new Date(0):t instanceof Date?t:typeof t=="number"?new Date(t):typeof t=="string"?Date.parse(t):new Date(0);u instanceof HTMLInputElement?n.dom.valueAsDate=i:n.dom.textContent=i.toLocaleString()}}});n.LabelJob=i.bind.Register(new i.bind.Job("rinput",function(n){n.dom.value=n.Scop.Value},null,null,function(n){n.dom.value=n.Scop.Value},function(){}));n.textboxJob=i.bind.Register(new i.bind.Job("textbox",function(n){var t=n.dom;t.innerText=n.Scop.Value},null,null,function(n){var t=n.dom;t.innerText=n.Scop.Value},function(){}));n.LabelJob=i.bind.Register(new i.bind.Job("price",function(n){var t=n.dom;t.innerText=i.math.round(n.Scop.Value||0,2)+" DZD"},null,null,function(n){var t=n.dom;t.innerText=i.math.round(n.Scop.Value||0,2)+" DZD"},function(){}));n.ratingJob=i.bind.Register(new i.bind.Job("rateing",function(n){for(var i=n.dom,r=Math.round(n.Scop.Value||0),u=i.childElementCount,t=0;t<r;t++)i.children[t].style.visibility="visible";for(t=r;t<u;t++)i.children[t].style.visibility="hidden"},null,null,function(t,i){n.ratingJob.Todo(t,i)}));n.LabelJob=i.bind.Register({Name:"enable",Todo:function(n){n.dom.style.pointerEvents=n.Scop.Value?"all":"none"},OnInitialize:function(n,t){this.Todo(n,t)}});n.LabelJob=i.bind.Register({Name:"applyStyle",Todo:function(n){var t=n.getValue("target"),i=n.getValue("data")||l,u=this.getType(n),r=n.Scop.Value;u&&(r=r instanceof u);t.classList.add.apply(t.classList,r?i[1]:i[0]);t.classList.remove.apply(t.classList,r?i[0]:i[1])},OnInitialize:function(n,t){var u=n.dom,i=u.getAttribute("db-data"),r;i&&(i=i.split(","),i.length==1?i=[i[0].split(" "),"none"]:(i[0]=i[0].split(" "),i[1]=i[1].split(" ")),n.addValue("data",i));r=u.getAttribute("ofType");r&&n.addValue("ofType",r);n.addValue("target",c(n));this.Todo(n,t)},getType:function(n){var t=n.getValue("ofType");return typeof t=="string"&&(t=r.context.GetType(t),t instanceof Function&&n.addValue("ofType",t)),t},getTarget:function(n){var r=n.dom.getAttribute("target"),i;if(r){for(var u=r.split("/"),f=parseInt(u[0])||0,e=u[1],t=n.dom;f!=0;)f--,t=t.parentElement||t;e&&(i=$(e,t),i&&(i instanceof Array?i.length!=0&&(t=i[0]):t=i));n.addValue("target",t||n.dom.parentElement||n.dom)}}});n.LabelJob=i.bind.Register({Name:"show",Todo:function(n){var u=n.getValue("target"),i=n.getValue("data")||l,r=this.getType(n),t=n.Scop.Value;r&&(t=t instanceof r);u.style.display=t?i[1]:i[0]},OnInitialize:function(n,t){var u=n.dom,i=u.getAttribute("db-data"),r;i&&(i=i.split(","),i.length==1&&(i=[i[0],"none"]),n.addValue("data",i));r=u.getAttribute("ofType");r&&n.addValue("ofType",r);n.addValue("target",c(n));this.Todo(n,t)},getType:function(n){var t=n.getValue("ofType");return typeof t=="string"&&(t=r.context.GetType(t),t instanceof Function&&n.addValue("ofType",t)),t}});n.LabelJob=i.bind.Register({Name:"editable",Todo:function(n){for(var r,u=!n.Scop.Value,i=$("input",n.dom),t=0;t<i.length;t++)r=i[t],r.disabled=u},OnInitialize:function(n){this.Todo(n)},OnScopDisposing:function(){}});l=["none",""];n.LabelJob=i.bind.Register({Name:"toggle",Todo:function(){},OnInitialize:function(n){n.addEventListener("domclick","click",function(){n.Scop.Value=!!!n.Scop.Value})},OnScopDisposing:function(n){n.removeEventListener("domclick")}});n.LabelJob=i.bind.Register(new i.bind.Job("showIf",function(n){var r=n.dom,i=r.parentElement,t=i.style.display,u=n.Scop.Value;if(u===!1){if(t=="none")return;n.addValue("display",t);i.style.display="none"}else i.style.display=t=="none"?n.getValue("display"):t},null,null,function(n){var r=n.dom,i=r.parentElement,t=i.style.display,u=n.Scop.Value;if(u===!1){if(t=="none")return;n.addValue("display",t);i.style.display="none"}else i.style.display=t=="none"?n.getValue("display"):t},function(){}));n.LabelJob=i.bind.Register(new i.bind.Job("hideIf",function(n){var r=n.dom,i=r.parentElement,t=i.style.display,u=n.Scop.Value;if(u===!0){if(t=="none")return;n.addValue("display",t);i.style.display="none"}else i.style.display=t=="none"?n.getValue("display"):t},null,null,function(n){var r=n.dom,i=r.parentElement,t=i.style.display,u=n.Scop.Value;if(u===!0){if(t=="none")return;n.addValue("display",t);i.style.display="none"}else i.style.display=t=="none"?n.getValue("display"):t},function(){}));n.TextJob=i.bind.Register(f.Instance());n.TextJob=i.bind.Register(new s);n.TextJob=i.bind.Register(new h);n.CheckJob=i.bind.Register(new i.bind.Job("check",function(n){var t=n.dom;t.innerText=n.Scop.Value},null,null,function(n){var t=n.dom;t.innerText=n.Scop.Value},function(){}))}(h=t.Jobs||(t.Jobs={}))});define("sys/Thread",["require","exports"],function(n,t){"use strict";function e(n){var i,t;if(!n)return n;if(typeof n=="object"){i={};for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i}return n instanceof Array?n.splice(0):n}var t,i,f,u,r;Object.defineProperty(t,"__esModule",{value:!0});typeof t=="undefined"&&(t={});i=typeof importScripts=="function"&&!(typeof window!="undefined"&&window instanceof Window);typeof t=="undefined"&&typeof window!="undefined"&&(window.exports={}),function(n){var t;(function(t){function o(n,t){return n?n.indexOf("__")===0&&n.lastIndexOf("__")===n.length-2?!1:t?(r[n]=t,!0):!1:!1}function s(n){return n.indexOf("__")===0&&n.lastIndexOf("__")===n.length-2?!1:r[n]}function h(n){return n?n.indexOf("__")===0&&n.lastIndexOf("__")===n.length-2?!1:delete r[n]:!1}function u(n,t,i,r){try{return n&&n.apply(r,i)}catch(u){return(i=i.slice()).unshift(u),t&&t.apply(r,i)}}function l(){n.WebWorker.registerHandler("fetch",function(n){var t=n.Msg.Data,i,r;n.keepAlive=!0;n.Handled=!0;i=n.e.ports&&n.e.ports.slice();r=n.e.origin;fetch(new Request(t.request.request)).then(function(){t.response={data:!0};n.Thread.postMessage({Data:t,Id:n.Msg.Id,IsError:!1,keepAlive:!1},r,i,i)})})}var r={},c,f,e;t.registerHandler=o;t.getHandler=s;t.unregisterHandler=h;c=!1;f=function(){function n(){this.onPostMessageError=function(n,t){this.postMessage({Id:t.Id,IsError:!0,Data:"UnExpectedError",keepAlive:!1})}.bind(this);this.Start()}return n.prototype.Start=function(){this._worker=self;this._worker.addEventListener("error",this._onerror.bind(this),{capture:!0});this._worker.addEventListener("message",this._onmessage.bind(this),{capture:!0})},n.prototype._onerror=function(){},n.prototype._onmessage=function(n){var i=n.data,f=r[i.Handler],t={e:n,Msg:i,Result:undefined,Handled:!1,Thread:this},e=u(f,this._onHandlerError,[t],this);t.Handled||this.postMessage({Id:i.Id,Data:t.Result||e,keepAlive:t.keepAlive},n.origin,n.ports,n.ports.slice())},n.prototype._onHandlerError=function(n,t){t.Error=!0;t.Handled=!0;this.postMessage({Id:t.Msg.Id,IsError:!0,Data:n,keepAlive:!1})},n.prototype.postMessage=function(n,t,r,f){var o,e;if(f&&f.length!=0)for(o=[n],e=0;e<f.length;e++)u(f[e].postMessage,this.onPostMessageError,o,f[e]);else o=i?[n,r]:[n,t?t:void 0,r],u(this._worker.postMessage,this.onPostMessageError,o,this._worker)},n.Start=function(){this.Default=new n},n}();t.Server=f;e=function(){function n(n){this._url=n;this._quee={};this.Start()}return n.prototype.Start=function(){this._worker=new Worker(this._url);this._worker.addEventListener("error",this._onerror.bind(this),{capture:!0});this._worker.addEventListener("message",this._onmessage.bind(this),{capture:!0})},n.prototype.Send=function(n){var t=performance.now();n.Id=t;this._quee[t]=n;this._worker.postMessage({Id:t,Data:n.data,Handler:n.handler})},n.prototype._onmessage=function(n){var t=n.data,i=this._quee[t.Id];i&&(u(i.callback,undefined,[i,t],i),t.keepAlive||delete this._quee[t.Id])},n.prototype._onerror=function(){},n.counter=0,n}();t.Client=e,function(){function n(n,t){r[n]=t}n("getValue",function(n){return self[n.Msg.Data]});n("__close__",function(){return i&&self.close(),i});n("__loadScripts__",function(n){importScripts(n.Msg.Data)});n("__hasHandler__",function(n){return r[n.Msg.Handler]instanceof Function});n("__href__",function(){return location.href});n("__getHandlers__",function(){return Object.keys(r)});l()}()})(t=n.WebWorker||(n.WebWorker={}))}(f=t.Workers||(t.Workers={}));r=function(){function n(){}return n.Start=function(n,t){return navigator.serviceWorker.register(n,t?{scope:t}:void 0).then(function(n){u=e(u);console.log("SW registration succeeded. Scope is "+n.scope)}).catch(function(n){console.error("SW registration failed with error "+n)})},n.postMessageToSW=function(n){return new Promise(function(t,i){navigator.serviceWorker.getRegistration().then(function(r){var u=new MessageChannel;r.active.postMessage(n,[u.port2]);u.port1.onmessage=function(r){var u=r.data;(u.IsError?i:t)(u.IsError?{IsError:!0,Action:n,Result:u}:{Action:n,Result:u})}}).catch(function(t){i({IsError:!0,Action:n,Result:t})})})},n}();t.ServiceWorker=r;typeof window!="undefined"&&(window.SW=r);r.postMessageToSW({Data:{request:"/index.html"}}).then(function(){})});define("sys/Facebook",["require","exports"],function(n,t){"use strict";var i,r,e;Object.defineProperty(t,"__esModule",{value:!0}),function(n){n[n.email=0]="email";n[n.public_profile=1]="public_profile";n[n.read_custom_friendlists=2]="read_custom_friendlists";n[n.user_about_me=3]="user_about_me";n[n.user_birthday=4]="user_birthday";n[n.user_education_history=5]="user_education_history";n[n.user_friends=6]="user_friends";n[n.user_hometown=7]="user_hometown";n[n.user_location=8]="user_location";n[n.user_relationship_details=9]="user_relationship_details";n[n.user_relationships=10]="user_relationships";n[n.user_religion_politics=11]="user_religion_politics";n[n.user_work_history=12]="user_work_history";n[n.publish_actions=13]="publish_actions";n[n.invitable_friends=14]="invitable_friends";n[n.manage_pages=15]="manage_pages";n[n.read_page_mailboxes=16]="read_page_mailboxes"}(i=t.Scops||(t.Scops={}));var u="394907654315490",f=function(){function n(n,t){var i,f,e;if(n===void 0&&(n=u),t===void 0&&(t=!0),this.AppID=n,this.scops=[],r!=null)throw null;r=this;f=document.getElementsByTagName("script")[0];document.getElementById("facebook-jssdk")||(i=document.createElement("script"),i.id="facebook-jssdk",e="https://connect.facebook.net/en_US/all/debug.js",i.src=e||(t?"https://connect.facebook.net/en_US/sdk/debug.js":"https://connect.facebook.net/en_US/sdk.js"),f.parentNode.insertBefore(i,f));this.init=this.init.bind(this);this.init()}return Object.defineProperty(n.prototype,"IsConnected",{get:function(){return this.status==="connected"?!0:this.status==="not_authorized"?!1:null},enumerable:!0,configurable:!0}),n.prototype._parseResponse=function(n){if(this.status=n.status,n.authResponse)for(var t in n.authResponse)this[t]=n.authResponse[t];else this.accessToken="",this.expiresIn=0,this.grantedScopes="",this.signedRequest="",this.userID=""},n.prototype.AsyncIsConnected=function(n){var t=this;FB.getLoginStatus(function(i){t._parseResponse(i);n&&n(t,i.status==="connected")})},n.prototype.AllScops=function(){var t=[],n,r;for(n in i)r=i[n],typeof r=="string"&&t.push(i[n]);this.RegisterScop(t)},n.prototype.Connect=function(n){var t=this;FB.login(function(i){t._parseResponse(i);n&&n(t)},{scope:this.scops.join(","),enable_profile_selector:!0,return_scopes:!0})},n.prototype.fbAsyncInit=function(){FB.init({appId:this.AppID,cookie:!0,xfbml:!0,version:"v2.8"});this.AsyncIsConnected()},n.prototype.init=function(){var n=this;window.fbAsyncInit&&setTimeout(this.init,200);window.fbAsyncInit=function(){window.fbAsyncInit=undefined;n.fbAsyncInit()}},n.prototype.Login=function(n){FB.login(n)},n.prototype.getFriendsList=function(n){this.AsyncIsConnected(function(t){t.IsConnected&&FB.api("/"+t.userID+"/friendlists",function(i){n(t,i)})})},Object.defineProperty(n.prototype,"Scops",{get:function(){return this.scops},enumerable:!0,configurable:!0}),n.prototype.RegisterScop=function(n){var u=this._processedArrays==null,t,f,r;u&&(this._processedArrays=[]);switch(typeof n){case"number":t=i[n];typeof t=="string"&&this.scops.indexOf(t)===-1&&this.scops.push(t);break;case"string":t=n;f=i[t];typeof f=="number"&&this.scops.indexOf(n)===-1&&this.scops.push(n);break;case"object":if(n instanceof Array){if(this._processedArrays.indexOf(n)!==-1)return;for(this._processedArrays.push(n),r=0;r<n.length;r++)this.RegisterScop(n[r])}}u&&(this._processedArrays=null)},n.prototype.someApi=function(){FB.login(function(){stop()},{scope:"public_profile,email,invitable_friends"})},n.Default=function(t,i){return r||(r=new n(t,i))},n}();t.Facebook=f;r=null;t.Fields_Names=["about","id","address","admin_notes","age_range","birthday","can_review_measurement_request","context","cover","currency","devices","education","email","employee_number","favorite_athletes","favorite_teams","first_name","gender","hometown","inspirational_people","install_type","installed","interested_in","is_payment_enabled","is_shared_login","is_verified","labels","languages","last_ad_referral","last_name","link","local_news_megaphone_dismiss_status","local_news_subscription_status","locale","location","meeting_for","middle_name","name","name_format","payment_pricepoints","political","profile_pic","public_key","quotes","relationship_status","religion","security_settings","shared_login_upgrade_required_by","short_name","significant_other","sports","test_group","third_party_id","timezone","token_for_business","updated_time","verified","video_upload_limits","viewer_can_send_gift","website","work"],function(n){n.about="about";n.id="id";n.address="address";n.admin_notes="admin_notes";n.age_range="age_range";n.birthday="birthday";n.can_review_measurement_request="can_review_measurement_request";n.context="context";n.cover="cover";n.currency="currency";n.devices="devices";n.education="education";n.email="email";n.employee_number="employee_number";n.favorite_athletes="favorite_athletes";n.favorite_teams="favorite_teams";n.first_name="first_name";n.gender="gender";n.hometown="hometown";n.inspirational_people="inspirational_people";n.install_type="install_type";n.installed="installed";n.interested_in="interested_in";n.is_payment_enabled="is_payment_enabled";n.is_shared_login="is_shared_login";n.is_verified="is_verified";n.labels="labels";n.languages="languages";n.last_ad_referral="last_ad_referral";n.last_name="last_name";n.link="link";n.local_news_megaphone_dismiss_status="local_news_megaphone_dismiss_status";n.local_news_subscription_status="local_news_subscription_status";n.locale="locale";n.location="location";n.meeting_for="meeting_for";n.middle_name="middle_name";n.name="name";n.name_format="name_format";n.payment_pricepoints="payment_pricepoints";n.political="political";n.profile_pic="profile_pic";n.public_key="public_key";n.quotes="quotes";n.relationship_status="relationship_status";n.religion="religion";n.security_settings="security_settings";n.shared_login_upgrade_required_by="shared_login_upgrade_required_by";n.short_name="short_name";n.significant_other="significant_other";n.sports="sports";n.test_group="test_group";n.third_party_id="third_party_id";n.timezone="timezone";n.token_for_business="token_for_business";n.updated_time="updated_time";n.verified="verified";n.video_upload_limits="video_upload_limits";n.viewer_can_send_gift="viewer_can_send_gift";n.website="website";n.work="work"}(e=t.EFields||(t.EFields={}));t.Edges_fields=["accounts","achievements","ad_studies","adaccounts","adcontracts","adnetworkanalytics","albums","apprequestformerrecipients","apprequests","asset3ds","assigned_ad_accounts","assigned_monetization_properties","assigned_pages","assigned_product_catalogs","books","business_activities","business_users","businesses","conversations","curated_collections","custom_labels","domains","events","family","favorite_requests","friendlists","friends","games","groups","ids_for_apps","ids_for_business","ids_for_pages","invitable_friends","leadgen_forms","likes","live_encoders","live_videos","movies","music","objects","permissions","personal_ad_accounts","photos","picture","promotable_domains","promotable_events","request_history","rich_media_documents","session_keys","stream_filters","taggable_friends","tagged_places","television","threads","video_broadcasts","videos","checkins","feed","friendrequests","home","inbox","locations","mutualfriends","notifications","outbox","questions","scores","subscribers","subscribedto"]});define("sys/Initializer",["require","exports","sys/Corelib","sys/UI"],function(n,t,i,r){"use strict";function o(){return undefined}function s(n,t){return t.value=t.value=="true"?i.bind.BindingMode.TwoWay:t.value=="false"?i.bind.BindingMode.SourceToTarget:isNaN(Number(t.value))?i.bind.BindingMode[t.value]||i.bind.BindingMode.SourceToTarget:Number(t.value),!0}function h(n,t){var s=n.e.dom,f=n.parent.Scop,u=n.Scop,v=n.e.Jobs,o=t.value,h,c=o.split("->"),e=c[0]||"",r=c[1]||"",l,a;if(r.length!==0&&(r[0]==="#"&&(h=!0,r=r.substr(1)),r.length!==0)){if(e[0]=="."?(f=u||f,e=e.substr(1)):f==null&&(f=u),e.length>0&&(u=i.bind.Scop.Create(e,f,o.indexOf("<->")!==-1?i.bind.BindingMode.TwoWay:o.indexOf("->")?i.bind.BindingMode.SourceToTarget:i.bind.BindingMode.TargetToSource)),h)return i.ScopicCommand.Call(r,s,u);l=r=="."?u.GetJob(r.substring(1)):i.bind.GetJob(r);a=u.AddJob(l,s);v.push(a)}}function c(n,t){for(var f,a,o=n.Scop,e=n.controller,s=""+t.value,r=3;r>0;r--)if(s.indexOf(u[r])!=-1){f=r;break}if(f){var h=s.split(u[f]),c=i.bind.Scop.GenerateScop(h[0],o,3,e),l=i.bind.Scop.GenerateScop(h[1],o,3,e);c&&l&&(a=new i.bind.TwoBind(f,c,l,i.bind.Scop.DPValue,i.bind.Scop.DPValue),e.OnDisposing=function(){a.Dispose()})}}function l(n,t){return(n.parent.Scop||n.Scop)&&(n.parent.Scop||n.Scop).setAttribute(t.value,undefined),undefined}function a(n,t){var s=function(n,t){if(n){var r=i.mvc.MvcDescriptor.Get(n);t=r.Create()}else throw"template args not setted";return t},r=n.e.dom,f=s(t.value,r),e,u,o;if(r!=f){for(e=0;e<r.attributes.length;e++)(u=r.attributes.item(e),u.name!=="compiled"&&u.name.indexOf("db-")!==0)&&f.setAttribute(u.name,u.value);r.parentNode.replaceChild(f,r);r=f}return o=i.Processor.Compile(n.New(r)),o||stop(),{e:o||n.e,Break:!0}}function v(n,t){var r=t.manager.getProcessorByAttribute("db-twoway");return n.e.Scop=t.value?i.bind.Scop.Create(t.value,n.parent.Scop,r&&r.value,n.controller)||n.parent.Scop:n.parent.Scop,n.e.IsNew=n.e.Scop!=n.parent.Scop,n.e.Scop||(n.e.Scop=n.parent.Scop||n.controller.Scop),undefined}function y(n){var t=i.bind.StringScop.GetStringScop(n.Dom.textContent,n.Scop,n.controller);return typeof t=="string"?undefined:(t.AttacheTo(n.Dom),n.e.Scop=t,n.e.IsNew=!0,n.e.Scop||(n.e.Scop=n.parent.Scop||n.controller.Scop),undefined)}function p(n,t){for(var i in t.value)n.Scop.setAttribute(i,t.value[i]);return undefined}function w(n,t){var r=t.manager.getProcessorByAttribute("db-twoway");return n.e.Scop=i.bind.CreateFilter(t.value,n.Scop,r&&r.value||3),undefined}function b(n,t){for(var u=n.e,h=n.parent.Control,v=n.parent.Scop,c=u.Jobs,o=t.value.split("|"),f=0,l=o.length;f<l;f++){var s=o[f],a=s[0]=="."?n.Scop.GetJob(s.substring(1)):i.bind.GetJob(o[f]),e=n.Scop.AddJob(a,u.dom);c.push(e);u.Control||(e.Control instanceof r.UI.JControl&&(e.Control.Parent=h),u.Control=e.Control)}return undefined}function k(n){for(var t=n.firstChild,i;t;){if(t instanceof Element)return t;!i&&t instanceof Node&&(i=t);t=t.nextSibling}return i}function d(n,t){var o=n.parent.Scop,s=n.parent.Control,h=n.controller,r=n.e,u=k(r.dom),f,e;return r.dom.removeAttribute("db-control"),f=i.ScopicControl.create({name:t.value,dom:u,currentScop:n.Scop||o,parentScop:o,parentControl:s,controller:h,e:r}),r.Control=f,f.Parent=s,e=r.dom.parentNode||r.dom.parentElement,e&&u!==r.dom&&(e.replaceChild(u,r.dom),r.dom=u),undefined}function g(n,t){var e=n.parent.Scop,o=n.parent.Control,s=n.controller,r=n.e,h=t.manager.getProcessorByAttribute("db-twoway"),u=n.Scop||e,f,c;return t.value&&(u=i.bind.Scop.Create(t.value,u,h&&h.value,s)),f=i.ScopicControl.create({name:"foreach",dom:r.dom,currentScop:u,parentScop:e,parentControl:o,controller:s,e:r}),r.Control=f,f.Parent=o,c=r.dom.parentNode||r.dom.parentElement,undefined}function f(n,t,i){for(var r=t;r;){try{if(r.setName)if(r.setName(n,i.dom,t,i)==!1)continue;else return!0}catch(u){}r=r.Parent}}function e(n,t){var r=t.value,u=n.controller.CurrentControl,i=n.e;return f(r,i.Control,i)||f(r,u,i),undefined}function nt(n,t){var u=n.parent.Scop,f=n.e,e=n.controller,r=i.bind.Scop.Create(t.value,u,0,e);return r&&n.Scop.AddJob({scopFunction:r,Todo:i.bind.Todo.prototype.Todo},f.dom),undefined}function tt(n,t){for(var f,r=0,u=t.value.split("|");r<u.length;r++)f=u[r],i.ScopicCommand.Call(f,n.e.dom,n.Scop);return undefined}var u,it;Object.defineProperty(t,"__esModule",{value:!0}),function(n){n[n["<->"]=3]="<->";n[n["->"]=1]="->";n[n["<-"]=2]="<-"}(u||(u={}));i.Processor.Register({name:"twoway",attribute:"db-twoway",execute:o,check:s,isPrimitive:!0});i.Processor.Register({name:"bind",attribute:"db-bind",execute:v,isPrimitive:!0});i.Processor.Register({name:"str",attribute:"db-str",execute:y,isPrimitive:!0});i.Processor.Register({name:"filter",attribute:"db-filter",execute:w,isPrimitive:!0});i.Processor.Register({name:"init",attribute:"db-init",execute:p,isPrimitive:!0});i.Processor.Register({name:"dec",attribute:"db-dec",execute:l,isPrimitive:!0});i.Processor.Register({name:"set",attribute:"db-set",execute:c,isPrimitive:!0});i.Processor.Register({name:"template",attribute:"db-template",execute:a,isPrimitive:!0});i.Processor.Register({name:"foreach",attribute:"db-foreach",execute:g,isPrimitive:!0});i.Processor.Register({name:"control",attribute:"db-control",execute:d,isPrimitive:!0});i.Processor.Register({name:"cmd",attribute:"db-cmd",execute:tt,isFinalizer:!0});i.Processor.Register({name:"job",attribute:"db-job",execute:b,isFinalizer:!0});i.Processor.Register({name:"exec",attribute:"db-exec",execute:h,isFinalizer:!0});i.Processor.Register({name:"todo",attribute:"db-todo",execute:nt,isFinalizer:!0});i.Processor.Register({name:"prop",attribute:"db-prop",execute:e,isFinalizer:!0,priority:9007199254740991});i.Processor.Register({name:"name",attribute:"db-name",execute:e,isFinalizer:!0,priority:Number.MAX_VALUE}),function(n){function t(){}n.load=t}(it=t.bom||(t.bom={}))});define("sys/Services",["require","exports","sys/Corelib","sys/System","sys/UI","sys/QModel"],function(n,t,i,r,u,f){"use strict";function s(n){o=n;r.Controller.Register(new e.AlertMessage);r.Controller.Register(new e.ConfirmMessage);r.Controller.Register(new e.SpeechMessage);r.Controller.Register(new e.InfoNotification);r.Controller.Register(new e.notfication);r.Controller.Register({Name:"guid",OnResponse:function(n,t,r){var u=r.sdata;if(typeof u=="number")i.basic.setGuidRange(u,u+2e3-1);else if(u instanceof Array)i.basic.setGuidRange(u[0],u[1]);else throw"Invalide Exception";}})}Object.defineProperty(t,"__esModule",{value:!0});var o,e;(function(n){var h=function(){function n(){this.Name="alert"}return n.prototype.OnResponse=function(n,t,i){u.UI.Modal.ShowDialog(i.sdata.Title,i.sdata.Content,null,"OK",null)},n}(),t,r,e,s;n.AlertMessage=h;t=function(){function n(){this.Name="confirm"}return n.prototype.OnResponse=function(n,t,r){var c=this,s=new i.encoding.SerializationContext(!0),e=s.FromJson(r.sdata,f.models.Message,null),o,h;s.Dispose();switch(e.Type){case 0:case 1:n.callBack&&n.callBack(n,r,undefined);return;case 2:case 3:e.Callback={ProxyCallback:n,Request:t.current,QueeDownloader:t};o=document.createElement("div");o.innerHTML=e.Content;h=new u.UI.TControl(o,e.Data);u.UI.Modal.ShowDialog(e.Title,h,function(n){return c.OnMessageClosed(n,e)},e.OKText,e.CancelText,e.AbortText);return}},n.prototype.OnMessageClosed=function(n,t){t.Action=u.UI.MessageResult[n.Result].toLowerCase();o.Post(f.models.Message,t,null,function(n,i,r){if(r){var u=t.Callback;u.QueeDownloader.Insert(u.Request);t.Dispose()}else t.Dispose()})},n}();n.ConfirmMessage=t;r=function(){function n(){this.Name="speech"}return n.prototype.OnResponse=function(n,t,r){var c=this,s=new i.encoding.SerializationContext(!0),e=s.FromJson(r.sdata,f.models.Message,null),o,h;s.Dispose();switch(e.Type){case 0:case 1:n.callBack&&n.callBack(n,r,undefined);return;case 2:case 3:e.Callback={ProxyCallback:n,Request:t.current,QueeDownloader:t};o=document.createElement("div");o.innerHTML=e.Content;h=new u.UI.TControl(o,e.Data);u.UI.Modal.ShowDialog(e.Title,h,function(n){return c.OnMessageClosed(n,e)},e.OKText,e.CancelText,e.AbortText);return}},n.prototype.OnMessageClosed=function(n,t){t.Action=u.UI.MessageResult[n.Result].toLowerCase();t.privateDecompress=!0;o.Post(f.models.Message,t,null,function(n,i,r,u){t.Callback.ProxyCallback.Callback(t.Callback.QueeDownloader,u)})},n}();n.SpeechMessage=r;e=function(){function n(){this.Name="notification"}return n.prototype.OnResponse=function(n,t,i){u.UI.InfoArea.push(i.sdata.Content,i.sdata.IsInfo,i.sdata.Expire)},n}();n.InfoNotification=e;s=function(){function n(){this.Name="notfication"}return n.prototype.OnResponse=function(n,t,i){var r=document.location.origin;window.location.assign(r+"/admin");localStorage.clear();document.cookie="id=;";document.close();i.dropRequest=!0;u.UI.InfoArea.push(i.sdata.Content,i.sdata.IsInfo,i.sdata.Expire)},n}();n.notfication=s})(e||(e={}));t.Load=s});define("sys/Critere",["require","exports","sys/Corelib","sys/UI"],function(n,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=Boolean,u=new i.collection.Dictionary("test"),f;(function(n){var t=function(n){function t(){var t=n.call(this)||this;return t.Scop=new i.bind.ValueScop(t,i.bind.BindingMode.TwoWay),t}return __extends(t,n),t.prototype.Check=function(n){return this.isMatch(n)},t.prototype.convertFromString=function(){throw new Error("Method not implemented.");},t.prototype.Begin=function(n,t){return this.deb=n,this.fin=n+t,!this.IsQuerable()},t.prototype.IsMatch=function(n,t){return n>=this.deb&&n<this.fin&&this.isMatch(t)},t.prototype.equals=function(n){return n==this},t.prototype.Activate=function(){this.Scop.setAttribute("activate",!0);var n=this.Scop.getScop("activate")},t.prototype.Disactivate=function(){this.Scop.setAttribute("activate",!1)},t.prototype.GetMatchs=function(n){var i,t,r;if(!this.IsQuerable())return n;for(i=[],t=0;t<n.length;t++)r=n[t],this.isMatch(r)&&i.push(r);return i},Object.defineProperty(t.prototype,"View",{get:function(){return this._view||(this._view=this.getView())},enumerable:!0,configurable:!0}),t.prototype.isMatch=function(n){return this._isMatch(n)},t.prototype.IsActivated=function(){var n=this.Scop.getScop("activate");return!!(n&&n.Value)},t.prototype.init=function(){for(var n,r=this.GetType().getFields(),t=0;t<r.length;t++)if(n=r[t],i.reflection.IsInstanceOf(n.Type,o))this.set(n,new o(n.Name));else if(i.reflection.IsInstanceOf(n.Type,h))this.set(n,new h(n.Name));else if(i.reflection.IsInstanceOf(n.Type,c))this.set(n,new c(n.Name));else if(i.reflection.IsInstanceOf(n.Type,s))this.set(n,new s(n.Name));else throw null;},t.getTypeOf=function(n){return this.Get(n).CritereType},t.prototype.smartClear=function(){var i=this.GetValues(),r,n;for(r in i)n=i[r],n instanceof t&&n.clear()},t.ctor=function(){this.Register(String,o,{},function(n,t,i,r){return new o(r&&r.label||t.Name)});this.Register(e,s,{},function(n,t,i,r){return new s(r&&r.label||t.Name)});this.Register(Number,h,{},function(n,t,i,r){return new h(r&&r.label||t.Name)});this.Register(Date,c,{},function(n,t,i,r){return new c(r&&r.label||t.Name)})},t.Register=function(n,t,i,r){u.Set(n,{CritereType:t,PropertyType:n,CreateView:r,Properties:i})},t.Get=function(n,t){return n instanceof i.reflection.GenericType?n=n.Constructor:n instanceof i.reflection.DelayedType&&(n=n.Type),u.Get(n)||(t?null:u.Get(String))},t.prototype.Open=function(n){var i=this,t;this.modal||(this.modal=new r.UI.Modal);t=this.modal;t.IsInit||(t.OnInitialized=function(n){n.Add(i.View);n.OkTitle("Search");n.Canceltitle("Cancel");n.Title("QSearch")});t.OnClosed.Add(function(t){t.Result==r.UI.MessageResult.ok&&n(i);t.Modal.OnClosed.Remove("")},"");t.Open()},t}(i.utils.Filter),f,l,o,s,h,a;n.Critere=t;f=function(n){function t(){return n.call(this)||this}return __extends(t,n),t.prototype.clear=function(){this.Value=null},t.__fields__=function(){return[this.DPValue]},t.CheckType=function(n){n.__this.CheckType(n)},t.DPValue=i.bind.DObject.CreateField("Value",Object,null,null,t.CheckType),t}(t);n.Unaire=f;l=function(n){function t(){return n.call(this)||this}return __extends(t,n),t.__fields__=function(){return[this.DPX,this.DPY]},t.CheckType=function(n){n.__this.CheckType(n)},t.DPX=i.bind.DObject.CreateField("X",Object,null,null,t.CheckType),t.DPY=i.bind.DObject.CreateField("Y",Object,null,null,t.CheckType),t}(t);n.Couple=l;o=function(n){function t(t){var i=n.call(this)||this;return i.Label=t||"Label",i}return __extends(t,n),t.prototype.clear=function(){this.Value=null},t.prototype.getView=function(){return new r.UI.TControl("templates.crtText",this.Scop)},Object.defineProperty(t.prototype,"Label",{set:function(n){this.Scop.setAttribute("label",n)},enumerable:!0,configurable:!0}),t.prototype.CheckType=function(n){n._new=n._new==null?null:String(n._new).toLowerCase()},t.prototype._isMatch=function(n){var t=this.Value;return t==null||t==""?!0:n==null?!1:n==t?!0:String(n).toLowerCase().indexOf(t)!=-1},Object.defineProperty(t.prototype,"Value",{get:function(){return this.get(f.DPValue)},set:function(n){this.set(f.DPValue,n)},enumerable:!0,configurable:!0}),t.prototype.IsQuerable=function(){return this.Value!=null&&String(this.Value).trim()!==""},t}(f);n.Text=o;s=function(n){function t(t){var i=n.call(this)||this;return i.Label=t||"Label",i}return __extends(t,n),t.prototype.clear=function(){this.Value=undefined},t.prototype.getView=function(){return new r.UI.TControl("templates.crtBool",this.Scop)},Object.defineProperty(t.prototype,"Label",{set:function(n){this.Scop.setAttribute("label",n)},enumerable:!0,configurable:!0}),t.prototype.CheckType=function(n){n._new=n._new==null?null:n._new===undefined?undefined:!!n._new},t.prototype._isMatch=function(n){var t=this.Value;return t===undefined?!0:t===n},t.prototype.IsQuerable=function(){return this.Value!=null},t}(f);n.Boolean=s;h=function(n){function t(t){var i=n.call(this)||this;return i.Title=t||"Vector Title",i.clear(),i}return __extends(t,n),t.prototype.getView=function(){return new r.UI.TControl("templates.crtVector",this.Scop)},t.prototype.CheckType=function(n){if(typeof n._new!="number")if(typeof n._new=="string")n._new=parseFloat(n._new);else{if(n._new==null)return;n._new=n._old}},t.prototype._isMatch=function(n){if(isNaN(n))return!0;var t=isNaN(this.X)?-Number.MAX_VALUE:this.X||0,i=isNaN(this.Y)?Number.MAX_VALUE:this.Y||0;return n>=t&&n<=i},Object.defineProperty(t.prototype,"Title",{get:function(){var n=this.Scop.getScop("title",!1);return n?n.Value:null},set:function(n){this.Scop.setAttribute("title",n)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.X=0;this.Y=0},t.prototype.IsQuerable=function(){return this.X!=null||this.Y!=null},t}(l);n.Vector=h;var v=new Date("1/1/1000"),y=new Date("12/12/9999"),c=function(n){function t(t){var i=n.call(this)||this;return i.Title=t||"Period Title",i}return __extends(t,n),t.prototype.getView=function(){return new r.UI.TControl("templates.crtPeriod",this.Scop)},t.prototype.CheckType=function(n){if(typeof n._new=="number"||typeof n._new=="string")n._new=new Date(n._new);else{if(n._new instanceof Date)return;if(n._new==null)return n._new=new Date;n._new=n._old}},t.prototype.IsQuerable=function(){return this.X!=null||this.Y!=null},t.prototype._isMatch=function(n){if(n==null)return!0;var t=n&&n.getTime();return t>=this.X.getTime()&&t<=this.Y.getTime()},Object.defineProperty(t.prototype,"Title",{get:function(){var n=this.Scop.getScop("title",!1);return n?n.Value:null},set:function(n){this.Scop.setAttribute("title",n)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.Y=new Date(Date.now());this.Y=new Date(0)},t}(l);n.Period=c;a=function(n){function f(){var t=n.call(this)||this;return t.init(),t}return __extends(f,n),Object.defineProperty(f.prototype,"Shema",{get:function(){return this.constructor.__shema},enumerable:!0,configurable:!0}),f.generateFieldsFrom=function(n,t){var f,e,u,r,o;for(t=t||i.bind.DObject.getFields(n),f=[],e=[],u=0;u<t.length;u++)r=t[u],i.reflection.IsInstanceOf(r.Type,i.collection.List)||(o=i.bind.DObject.CreateField(r.Name,this.getTypeOf(r.Type)),f.push(o),e.push({critereDP:o,propertyDP:r}));return this.__shema={critereType:this,proxyType:n,critereProperties:f,propertiesSheam:e},this.__shema.critereProperties},f.prototype.InitProperties=function(n){var u,r,i,f;for(n=n||{},u=this.Shema.propertiesSheam,r=0;r<u.length;r++)i=u[r],f=t.Get(i.propertyDP.Type),this.set(i.critereDP,f.CreateView(this,i.propertyDP,f,n[i.propertyDP.Name]))},f.prototype.init=function(){this.InitProperties()},f.prototype.getView=function(n){for(var o=n||new r.UI.DivControl("section"),i=this.Shema.propertiesSheam,s,e,i=i.sort(function(n){return u.IndexOf(n.propertyDP.Type)}),f=0;f<i.length;f++)s=i[f].critereDP,e=this.get(s),e instanceof t&&o.Add(e.View);return o},f.prototype.clear=function(){for(var f,r,u=i.bind.DObject.getFields(this.GetType()),n=0;n<u.length;n++)f=u[n],r=this.get(f),r instanceof t&&r.clear()},f.prototype.IsQuerable=function(){var i,n,r,t;for(this.indexes=[],i=this.Shema.propertiesSheam,n=0;n<i.length;n++)r=i[n],t=this.get(r.critereDP),t.IsActivated()&&t.IsQuerable()&&this.indexes.push({critereValue:t,propertyDP:r.propertyDP});return this.indexes.length!=0},f.prototype.isMatch=function(n){for(var i,t=0;t<this.indexes.length;t++)if(i=this.indexes[t],!i.critereValue.isMatch(n.GetValue(i.propertyDP)))return!1;return!0},f.prototype._isMatch=function(){throw new Error("Method not implemented.");},f}(t);n.ComplexCritere=a})(f=t.Critere||(t.Critere={}));window.Critere=f});define("components/ActionButton/script",["require","exports","sys/UI","sys/Corelib"],function(n,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u;(function(n){var t=function(n){function t(){var t=n.call(this,document.createElement("div"))||this;return t.applyStyle("pull-right","flat"),t}return __extends(t,n),t.__fields__=function(){return[this.DPSource,this.DPValue]},Object.defineProperty(t.prototype,"Value",{get:function(){return this.get(t.DPValue)},set:function(n){this.set(t.DPValue,n)},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){this.Caption=new i.UI.Label("").applyStyle("btn","btn-default","glyphicon","glyphicon-filter");this.Box=(new i.UI.Input).applyStyle("input","form-control");this.Box.setAttribute("style","min-width: 300px; margin-top: 1px; float: left; width: auto;").setAttribute("autocomplete","off").setAttribute("placeholder","Search ...");this.AutocompleteBox=new i.UI.ProxyAutoCompleteBox(this.Box,this.Source);this.AutocompleteBox.OnValueChanged(this,this.OnValueChanged);this.Add(this.Caption).Add(this.Box);this.AutocompleteBox.initialize()},t.prototype.OnSourceChanged=function(n){this.AutocompleteBox.DataSource=n._new},t.prototype.OnValueChanged=function(n,t,i){this.Value=i},t.DPSource=r.bind.DObject.CreateField("Source",r.collection.List,undefined,t.prototype.OnSourceChanged),t.DPValue=r.bind.DObject.CreateField("Value",Object),t}(i.UI.JControl);n.ActionButton=t})(u=t.components||(t.components={}))});define("sys/AI",["require","exports","json|../assets/Data/Primes.json","sys/Corelib"],function(n,t,i,r){"use strict";var u,f,e;Object.defineProperty(t,"__esModule",{value:!0});u=Math,function(n){var r,f,t,e;(function(n){function u(n){return n instanceof Array||String(n)===o}function t(n,i,r,f,e){var s=-1,h=n.length,o;for(r||(r=u),e||(e=[]);++s<h;)o=n[s],i>0&&r(o)?i>1?t(o,i-1,r,f,e):e.push(o):f||(e[e.length]=o);return e}function s(n){var i=n==null?0:n.length;return i?t(n,e):[]}var e=1/0,o="[object Arguments]",i,f,r;n.isFlattenable=u;n.baseFlatten=t;n.flattenDeep=s;i=function(){function n(n,t){this.Disposed=[];this.Last=this.Writer=new r(null,n,t)}return n.prototype.Next=function(){for(var n=this.Reader;n;){if(this.Cursor<=n.End)return this.Cursor++;this.Disposed.push(n);this.Reader=n=this.Reader.NextSegment}return undefined},n}();n.SegmentRunner=i;f=function(){function n(){this.runner=new i(0,1999);this.array=new Array(2e3)}return n.prototype.Read=function(){return this.runner.Next()},n.prototype.Write=function(){},n}();n.Iterator=f;r=function(){function n(n,t,i){t===void 0&&(t=0);i===void 0&&(i=0);this.Start=t;this.End=i;n&&(n.NextSegment=this)}return n}();n.Segment=r})(r=n.tools||(n.tools={})),function(n){function t(n,t){var i=null;if((i=o(n,t),i!=null)||(i=h(n,t),i!=null)||(i=s(n,t),i!=null))return i;var f=u(n.toUpperCase()),r=u(t.toUpperCase()),e=0,c=f.length+r.length;return f.forEach(function(n){for(var i,t=0;t<r.length;t++)if(i=r[t],n===i){e++;r.splice(t,1);break}}),2*e/c}function f(n,r){var u=r.map(function(i){return{target:i,rating:t(n,i)}});return{ratings:u,bestMatch:i(u)}}function i(n){for(var t,r=undefined,u=Number.NEGATIVE_INFINITY,i=0;i<n.length;i++)t=n[i],u<t.rating&&(u=t.rating,r=t);return r}function e(n){for(var r=n.length-1,i=[],t=0;t<r;t++)i[t]=n.substring(t,t+2);return i}function u(n){return r.flattenDeep(n.split(" ").map(e))}function o(n,t){return n.toUpperCase()==t.toUpperCase()?1:null}function s(n,t){if(n.length==1&&t.length==1)return 0}function h(n,t){return n.length==0&&t.length==0?1:n.length+t.length>0&&n.length*t.length==0?0:null}function c(n){return n.ratings.sort(l)}function l(n,t){return t.rating-n.rating}n.compareTwoStrings=t;n.findBestMatch=f;n.bestMatch=i;n.Sort=c}(f=n.StringSimiarity||(n.StringSimiarity={})),function(n){function e(n,t,i){return n>=i&&(n%=i),t>=i&&(t%=i),(n+t)%i}function o(n,t,i){n%=i;for(var r=1;t>0;)t&1&&(r=r*n%i),n=n*n%i,t>>=1;return r}function s(n,i){var f=performance.now(),r;i||(i=t.length-1);do{if(performance.now()-f>5e3)throw null;r=t[u.floor(u.random()*i)]}while(!n(r));return r}function h(n,t){var i,r,u;if(n>t){while(n%t!=0)r=n%t,n=t,t=r;i=t}else{while(t%n!=0)u=t%n,t=n,n=u;i=n}return i}function c(n,t){for(var r=n,i=t,u;i;)u=r,r=i,i=u%i;return r}function l(n,t,i){var u,r,n,t;for(i===void 0&&(i=0),u=n,r=t;r!=i&&r;)n=u,t=r,u=r,r=n%t;return{result:n,factor:t,rem:r,x:(n-i)/t}}function r(n,t){if(t==0)return new f(n,1,0);var i=r(t,n.mod(t)),e=i.FactorA-i.FactorB*u.floor(n/t);return i.SetValues(i.GCD,i.FactorB,e)}function a(n,t){return n.mod(t)>0?!1:!0}function v(n,t,i){var f=u.abs(i),v=n.mod(f),h=t.mod(f),e=r(v,f),s=[],c,o,l;if(!a(h,e.GCD))return s;for(c=(e.FactorA*(h/e.GCD)).mod(f),o=0;o<e.GCD;o++)l=(c+o*(f/e.GCD)).mod(f),s.push(l);return s.sort(function(n,t){return t-n})}var f=function(){function n(n,t,i){this.SetValues(n,t,i)}return n.prototype.SetValues=function(n,t,i){return this.GCD=n,this.FactorA=t,this.FactorB=i,this},n}(),t;n.GCDExtended=f;n.mul_mod=e;n.PowMod=o;t=i.value;n.getRandomPrime=s;n.get_common_denom=h;n.GCD=c;n.ExGCD=l;n.gcd_extended=r;n.SolveCongurentEqu=v;Number.prototype.mod=function(n){return(this%n+n)%n}}(t=n.Math||(n.Math={})),function(n){function u(n,r){var u=t.getRandomPrime(function(n){return n>100},100),o=t.getRandomPrime(function(t){if(t==u)return!1;var i=t*u;return i<n?!1:i>r?!1:!0},100),s=u*o,h=(u-1)*(o-1),c,l=performance.now(),f,e;do{if(performance.now()-l>5e3)throw null;if(f=t.getRandomPrime(function(n){return n<h&&n>3}),e=t.SolveCongurentEqu(f,1,h),e.length!=0){c=e[0];break}}while(1);return{Decripter:new i({n:s,e:c}),Encrypter:new i({n:s,e:f})}}function f(n,t,i){t===void 0&&(t=1e4);for(var r=performance.now(),u=t;--u;)n.apply(null,i);return performance.now()-r}var i=function(){function n(n){this.key=n}return n.prototype.transform=function(n){return t.PowMod(n,this.key.e,this.key.n)},n.prototype.isValideByte=function(n){return n>=0&&n<this.key.n},n}(),r;n.RSA=i;r=function(){function n(n){this.key=n;this.array=[]}return n.prototype.transform=function(n){return this.array[n]||(this.array[n]=t.PowMod(n,this.key.e,this.key.n))},n.prototype.isValideByte=function(n){return n>=0&&n<this.key.n},n}();n.FastRSA=r;n.GenerateRSAKey=u;n.test=f}(e=n.Encryption||(n.Encryption={}))}(f=t.AI||(t.AI={})),function(n){function t(){r.bind.DObject}n.Exec=t}(e=t.DataBindingQuee||(t.DataBindingQuee={}))});define("Core",["require","exports","context","sys/Syntaxer","sys/System","sys/Filters","sys/QModel","sys/Corelib","sys/Consts","sys/db","sys/Decorators","sys/Dom","sys/Encoding","sys/Jobs","sys/Thread","sys/Facebook","sys/Initializer","sys/Services","sys/Critere","components/ActionButton/script","sys/UI","sys/AI"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt){"use strict";function tt(n){for(var i in n)t.hasOwnProperty(i)||(t[i]=n[i])}Object.defineProperty(t,"__esModule",{value:!0});tt(i);tt(r);tt(u);tt(f);tt(e);tt(o);tt(s);tt(h);tt(c);tt(l);tt(a);tt(v);tt(y);tt(p);tt(w);tt(b);tt(k);tt(d);tt(g);tt(nt)});define("components/QSidebar/script",["require","exports","sys/Corelib","sys/UI","components/QUI/script","template|../../assets/Components/QSidebar/dom.html"],function(n,t,i,r,u,f){"use strict";function h(){var n=new u.Material.App,i,t;return document.body.innerHTML="",document.body.appendChild(n.View),i=new r.UI.Dom("div"),n.OnInitialized=function(n){t.menu=new o.SideNav([s]);n.Menu=t.menu},t={app:n,container:i,menu:undefined,canvas:undefined},n.Parent=r.UI.Desktop.Current,t}var e,o,s;Object.defineProperty(t,"__esModule",{value:!0});ValidateImport(f);typeof FB!="undefined"&&(FB.getLoginStatus(function(n){switch(n.status){}}),e=function(){stop()},FB.login(e,{})),function(t){var u=function(t){function u(n){var i=t.call(this,document.createElement("li"))||this;return i.item=n,i}return __extends(u,t),u.prototype.initialize=function(){this.anchore=document.createElement("a");this.item.Icon&&this._view.classList.add(this.item.Icon);this.anchore.innerText=this.item.Title;this.buildBadge();this.View.appendChild(this.anchore);this.buildChildren()},u.ctor=function(){n("style|../../assets/Components/QSidebar/style.css")},u.prototype.buildBadge=function(){var n=this.item.Badge;if(n==null||n==""){this.badge&&this.badge.remove();return}this.badge||(this.badge=document.createElement("span"),this.badge.classList.add("count"));this.badge.parentNode==null&&this.anchore.appendChild(this.badge);this.badge.innerText=String(n)},u.prototype.buildChildren=function(){var t=this.item.Children,n;if(t)for(this.applyStyle("has-children"),this.children=new r.UI.Dom("ul"),this.Add(this.children),n=0;n<t.length;n++)this.children.Add(new f(t[n],this));if(this.item.mode==="pop"){this.anchore.addEventListener("mouseenter",this);this._view.addEventListener("mouseleave",this);return}this.anchore.addEventListener("click",this)},u.prototype.handleEvent=function(n){if(this.item.mode==="pop")switch(n.type){case"mouseenter":if(this.item.mode==="pop"&&n.currentTarget===this.anchore)return this.IsActive=!0;case"mouseleave":if(this.item.mode==="pop"&&n.currentTarget===this._view)return this.IsActive=!1;default:return t.prototype.handleEvent.call(this,n)}else if(n.type==="click"&&n.currentTarget===this.anchore)if(this.IsActive)t.prototype.handleEvent.call(this,n);else if(i.$$(this._view).toggleClass("active"),this.IsActive){var r=[this];this.OnChildSelected(r);this.OnSelected&&this.OnSelected.Invoke.call(this.OnSelected.Owner,r)}},Object.defineProperty(u.prototype,"IsActive",{get:function(){return this._view.classList.contains("active")||this._view.classList.contains("hover")},set:function(n){this._view.classList[n?"add":"remove"](this.item.mode==="pop"?"hover":"active")},enumerable:!0,configurable:!0}),u}(r.UI.JControl);t.SideNavItem=u;var f=function(n){function t(t,i){var r=n.call(this,t)||this;return r.ParentNavItem=i,r}return __extends(t,n),t.prototype.OnChildSelected=function(n){var t=this.ParentNavItem;t&&(n.push(t),t.OnChildSelected(n))},t}(u),e=function(n){function t(t,i){var r=n.call(this,t)||this;return r.ParentNav=i,r}return __extends(t,n),t.prototype.OnChildSelected=function(n){this.ParentNav.OnChildSelected(n)},t}(u),o=function(n){function t(t){var i=n.call(this,document.createElement("nav"))||this;return i.data=t,i}return __extends(t,n),t.prototype.initialize=function(){this.applyStyle("cd-side-nav");for(var n=0;n<this.data.length;n++)this.buildChild(this.data[n])},t.prototype.OnChildSelected=function(n){this.OnItemSelected(n)},t.prototype.buildChild=function(n){var i=new r.UI.Dom(document.createElement("ul")),u=document.createElement("li"),t,f,o;for(u.classList.add("cd-label"),u.innerText=n.Title,i.View.appendChild(u),t=0;t<n.Items.length;t++)f=n.Items[t],o=new e(f,this),i.Add(o);this.Add(i)},t.prototype.OnItemSelected=function(n){var t,i,r;if(this.currentItems)for(t=0;t<this.currentItems.length;t++)i=this.currentItems[t],i.IsActive=!1;for(t=0;t<n.length;t++)i=n[t],r=i.item,r.mode!=="pop"&&(i.IsActive=!0);this.currentItems=n},t}(r.UI.JControl);t.SideNav=o}(o=t.Material||(t.Material={}));s={Title:"Main Menu",Items:[{Title:"Overview",Badge:"1",Icon:"overview"},{Title:"Menu",Badge:"2",Icon:"comments",Children:[{Title:"Item 1"},{Title:"Item 3"},{Title:"Item 2"}],mode:"pop"},{Title:"Menu",Badge:"2",Icon:"notifications",Children:[{Title:"Item 1"},{Title:"Item 3"},{Title:"Item 2"}],mode:"sub"}]};t.counter=0;t.test=h});define("components/QUI/script",["require","exports","sys/Corelib","sys/UI","context","components/Canvas3D/script","template|../../assets/Components/QUI/dom.html"],function(n,t,i,r,u,f,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});ValidateImport(e);var o;(function(t){var e=function(t){function e(){var n=t.call(this,e._getView())||this;return n.searchWrapper=function(){var n=document.createElement("li");return n.classList.add("cd-serch-wrapper"),n}(),n.resizing=!1,n.Controller=i.bind.Controller.Attach(n,n),n.Controller.OnCompiled={Invoke:n.OnCompileEnd,Owner:n},n}return __extends(e,t),Object.defineProperty(e.prototype,"IsAuthentication",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.showPage=function(n){this.Content=n},e.prototype.OnKeyDown=function(n){var t=this.SelectedPage;t&&t.OnKeyDown(n)},e.prototype.Check=function(n){return n===this.Foot||n instanceof r.UI.Page},e.prototype._getView=function(){var t=r.UI.Template.ToTemplate("templates.qui-app",!1),n=t.CreateShadow();return n.Parent=this,n},e._getView=function(){return r.UI.ListAdapter._getTemplateShadow("templates.qui-app")},e.prototype.IsCompiled=function(){return this.Controller.getStat()>=2},Object.defineProperty(e.prototype,"Content",{get:function(){return this._content},set:function(n){var t=this;n!==this._content&&(this.IsCompiled&&this._content&&(this._content.Parent=null,this._content.View.remove()),n?this.Controller.OnCompiled={Invoke:function(){if(n.Parent)throw new Error("The Control has connection with other Control");t._pageContent.appendChild(n.View);n.Parent=t;t._content=n},Owner:this}:this._content=n)},enumerable:!0,configurable:!0}),e.prototype.setContent=function(){},Object.defineProperty(e.prototype,"Menu",{get:function(){return this._menu},set:function(n){var t=this;n!==this._menu&&(this._menu&&(this._menu.Parent=null),n?this.Controller.OnCompiled={Invoke:function(){t._sideMenu.appendChild(n.View);n.Parent=t;t._menu=n},Owner:this}:this._menu=n)},enumerable:!0,configurable:!0}),e.prototype.handleEvent=function(n){var t=n.srcElement,r=t.getAttribute("db-name");switch(r){case"coverLayer":case"closeSuggetions":this.toggleSearchForm(!0);break;case"searchTrigger":n.preventDefault();this.toggleSearchForm()||this.onSearch();break;case"navigationTrigger":n.preventDefault();i.$$([this._mainHeader,this._navigation,this._pageContent]).toggleClass("nav-is-visible")}},e.prototype.setName=function(n,t,i,r){this["_".concat(n)]=t;n==="searchTrigger"&&this._searchTrigger.addEventListener("click",this);n==="navigationWrapper"&&(this._pages=r.IsNew?r.Control:null)},e.prototype.onSearch=function(){var n=this._txt_search.value;n&&n.length>5&&this.Suggestions.Add({Data:"Iam",Title:n})},e.prototype.toggleSearchForm=function(n){return n=n===undefined?this._searchTrigger.classList.contains("search-form-visible"):n,n?(this._searchTrigger.classList.remove("search-form-visible"),this._searchForm.classList.remove("is-visible"),this._coverLayer.classList.remove("search-form-visible"),!1):(this._searchTrigger.classList.add("search-form-visible"),this._coverLayer.classList.add("search-form-visible"),this._searchForm.classList.add("is-visible"),!0)},Object.defineProperty(e.prototype,"NFBHeight",{set:function(n){var i,r,t,u;if(!e.BlackAppRule)for(i=e.links[1].sheet,r=i.cssRules||i.rules,t=0;t<r.length;t++)if(u=r[t],u.selectorText===".BlackApp"){e.BlackAppRule=u;break}e.BlackAppRule?e.BlackAppRule.style.setProperty(e.navbarFixedBottomHeightName,n+"px"):document.documentElement.style.setProperty(e.navbarFixedBottomHeightName,n+"px")},enumerable:!0,configurable:!0}),e.prototype.css=function(n){var t=document.styleSheets;return n.matches=n.matches||n.webkitMatchesSelector||n.msMatchesSelector,[]},e.prototype.initialize=function(){var c=this,l,s,h,n,o;if(window.k=this,t.prototype.initialize.call(this),this.applyStyle("BlackApp"),l=r.UI.Desktop.Current.CurrentApp,this.Foot=new r.UI.ServiceNavBar(this,!1),s=new f.Material.Canvas3D,h=new r.UI.Page(this,"Canvas 3D","Canvas 3D"),h.Add(s),this.Pages=new i.collection.List(Object,[]),this.Suggestions=new i.collection.List(Object,[{Data:"Iam",Title:"Test Title then if you see this then you are ok"}]),e.links)for(n=0;n<e.links.length;n++)o=e.links[n],o.parentNode==null&&document.head.appendChild(o);else e.links=[r.UI.JControl.LoadCss(u.context.GetPath("Reset.css")),r.UI.JControl.LoadCss(u.context.GetPath("style.css"))];this.moveNavigation=this.moveNavigation.bind(this);window.addEventListener("resize",function(){return c.checkResize()});this.Add(this.Foot)},e.prototype.OnCompileEnd=function(){var n=this;this._navigationTrigger.addEventListener("click",this);this._closeSuggetions.addEventListener("click",this);this._closeSuggetions.addEventListener("click",this);this.checkResize();this._pages.OnItemSelected.On=function(t,i){return n.SelectedPage=n.Pages.Get(i)}},e.prototype.checkResize=function(){this.resizing||(this.resizing=!0,window.requestAnimationFrame?window.requestAnimationFrame(this.moveNavigation):setTimeout(this.moveNavigation,300))},e.prototype.checkWindowWidth=function(){return window.getComputedStyle(this._mainHeader,"::before").getPropertyValue("content").replace(/"/g,"").replace(/'/g,"")},e.prototype.moveNavigation=function(){var n=this.checkWindowWidth(),t;n=="desktop"&&i.$$(this._navigationTrigger).siblings(i.query.hasClass,"cd-main-search").length==0?(i.$$(this._searchForm).detach().insertBefore(this._navigationTrigger),i.$$(this._navigationWrapper).detach().insertBefore(this._searchForm),this.searchWrapper.remove()):n!="mobile"||i.$$(this._mainHeader).children(i.query.hasClass,"cd-main-nav-wrapper").length==0||(i.$$(this._navigationWrapper).detach().insertAfter(this._pageContent),t=this.searchWrapper,i.$$(this._searchForm).detach().appendTo(t),this._navigation.appendChild(this.searchWrapper));this.resizing=!1},e.ctor=function(){this.DPCategories=e.CreateField("Categories",i.collection.List);this.DPFastLinks=e.CreateField("FastLinks",i.collection.List);this.DPSuggestions=e.CreateField("Suggestions",i.collection.List);this.DPLogo=e.CreateField("Logo",String);n("style|./../../assets/Components/QUI/style.css");n("style|./../../assets/Components/QUI/Reset.css")},e.prototype.CloseMenu=function(){this._body.classList.add("hide-menu")},e.prototype.OpenMenu=function(){this._body.classList.remove("hide-menu")},Object.defineProperty(e.prototype,"IsMenuOpen",{get:function(){return this._body.classList.contains("hide-menu")},enumerable:!0,configurable:!0}),e.__fields__=function(){return[this.DPCategories,this.DPFastLinks,this.DPSuggestions,this.DPLogo]},e.navbarFixedBottomHeightName="--navbar-fixed-bottom-height",e}(r.UI.Layout);t.App=e})(o=t.Material||(t.Material={}))});define("components/Canvas3D/script",["require","exports","sys/Corelib","sys/UI","template|../../assets/Components/Canvas3D/dom.html"],function(n,t,i,r,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});ValidateImport(u);var f;(function(t){function c(){return o||(o=new e)}function l(){return s||(s=u.template["qui-3ditem"])}function v(n){if(this.events){n.preventDefault();n.stopImmediatePropagation();try{this.callback(n,this)}catch(n){}for(var t=0;t<this.events.length;t++)this.itemToHide.removeEventListener(this.events[t],this);delete this.events;delete this.itemToHide;delete this.handleEvent}}var f={Title:"Achour",Data:null,Icon:null},o,s,a=function(t){function e(){var n=t.call(this,u.template["qui-Canvas3D"],r.UI.TControl.Me)||this;return n.Items=new i.collection.List(Object,[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f]),n.count=0,n}return __extends(e,t),e.prototype.setName=function(n,t,i){this[n]=t;n==="galleryItems"&&(this.cnt_galleryItems=i,this.cnt_galleryItems.Template=c())},e.prototype.initialize=function(){t.prototype.initialize.call(this)},e.ctor=function(){var t=u.template;n("style|../../assets/Components/Canvas3D/style.css")},e}(r.UI.TControl),e;t.Canvas3D=a;var h=function(n){function t(i,r){var u=n.call(this,r||l().Create(),t._createScop(i))||this;return u.data=i,u.selectedIndex=0,u.items=[],u}return __extends(t,n),t._createScop=function(n){var t=n instanceof i.bind.Scop;return t?n:new i.bind.ValueScop(n)},t.prototype.setName=function(n,t){var i,r;if(this[n]=t,n==="visionTrigger")this.visionTrigger.addEventListener("click",this);else if(n==="Next")this.Next.addEventListener("click",this);else if(n==="Prev")this.Prev.addEventListener("click",this);else if(n==="itemsWrapper")for(i=0;i<t.children.length;i++)r=t.children[i],this.items.push(r)},t.prototype.handleEvent=function(n){var t=n.srcElement,i=t.getAttribute("db-name");switch(i){case"visionTrigger":return this.onVisionTriggerClick(n);case"Next":this.GoNext();break;case"Prev":this.GoPrev()}},t.prototype.onVisionTriggerClick=function(){this._view.classList.contains("active")?(this.View.classList.remove("active"),this.hideNavigation()):(this.View.classList.add("active"),this.updateNavigation())},t.prototype.hideNavigation=function(){this.Next.classList.remove("visible");this.Prev.classList.remove("visible")},t.prototype.updateNavigation=function(){this.ActiveNext=this.IsNextActive;this.ActivePrev=this.IsPrevActive},Object.defineProperty(t.prototype,"ActiveNext",{set:function(n){this.Next.classList[n?"add":"remove"]("visible")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ActivePrev",{set:function(n){this.Prev.classList[n?"add":"remove"]("visible")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsPrevActive",{get:function(){return this.selectedIndex>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsNextActive",{get:function(){return this.selectedIndex<this.items.length-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SelectedIndex",{get:function(){return this.selectedIndex},set:function(n){this.selectedIndex=n<=0?0:n>=this.items.length?this.items.length-1:n},enumerable:!0,configurable:!0}),t.prototype.Update=function(){for(var t,r=this.items,u=this.SelectedIndex,i=u+1,n=0;n<r.length;n++)t=r[n],t.classList.remove("cd-item-front","cd-item-middle","cd-item-back","cd-item-out","move-right","hidden"),n<i?t.classList.add("move-right","hidden"):n===i?t.classList.add("cd-item-front"):n===i+1&&t.classList.add("cd-item-middle")},t.prototype.GoNext=function(){var t=this.items,n=this.SelectedIndex,i=++this.SelectedIndex;if(n===i||i>=this.items.length)return this.ActiveNext=!1;this.showNextSlide(t[n],t[n+1],t[n+2],t[n+3]);n+1>=this.items.length-1&&(this.ActiveNext=!1);n>=0&&(this.ActivePrev=!0)},t.prototype.GoPrev=function(){var n=this.items,t=this.SelectedIndex,i=--this.SelectedIndex;if(t===i||t<=0)return this.ActivePrev=!1;this.showPreviousSlide(n[t],n[t+1],n[i],n[t+2]);i<=0&&(this.ActivePrev=!1);i<n.length&&(this.ActiveNext=!0)},t.prototype.updateCss=function(n,t,i){var r=this.items[n];r&&(i&&r.classList.add.apply(r.classList,i),t&&r.classList.remove.apply(r.classList,t))},t.prototype.showNextSlide=function(n,t,i,r){n&&(n.classList.add("move-right"),n.classList.remove("cd-item-front"),this.createEvent(n,"webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend".split(" "),function(n,t){t.itemToHide.classList.add("hidden");t.data.swap()},this));t&&(t.classList.add("cd-item-front"),t.classList.remove("cd-item-middle"));i&&(i.classList.add("cd-item-middle"),i.classList.remove("cd-item-back"));r&&(r.classList.add("cd-item-back"),r.classList.remove("cd-item-out"))},t.prototype.showPreviousSlide=function(n,t,i,r){if(i&&(i.classList.remove("hidden"),i.classList.add("cd-item-front")),n&&(n.classList.remove("cd-item-front"),n.classList.add("cd-item-middle")),t&&(t.classList.remove("cd-item-middle"),t.classList.add("cd-item-back")),r&&(r.classList.remove("cd-item-back"),r.classList.add("cd-item-out")),i){var u={stop:0,t:this};u.stop=setInterval(this.myTimer,100,i,u)}},t.prototype.myTimer=function(n,t){n.classList.contains("hidden")||(n.classList.remove("move-right"),window.clearInterval(t.stop),t.t.swap())},t.prototype.createEvent=function(n,t,i,r){var f,u;if(n)for(f={callback:i,events:t,itemToHide:n,handleEvent:v,data:r},u=0;u<t.length;u++)n.addEventListener(t[u],f)},t.prototype.swap=function(){var i,r,n,t;if(0)for(i=this.SelectedIndex,r=i+2,n=0;n<this.items.length;n++)t=this.items[n],n<i&&(t.classList.remove("move-right","hidden","cd-item-front","cd-item-middle","cd-item-back","cd-item-out"),t.classList.add("move-right","hidden")),n>r&&(t.classList.remove("move-right","hidden","cd-item-front","cd-item-middle","cd-item-back","cd-item-out"),t.classList.add("cd-item-out"))},t}(r.UI.ScopicTemplateShadow);t.GalleryItem=h;e=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.CreateShadow=function(n){return new h(n)},t}(r.UI.Template);t.Template=e})(f=t.Material||(t.Material={}));i.ScopicControl.register("Material.Canvas3D",function(n){return n.Result=new f.Canvas3D});i.ScopicControl.register("Material.GalleryItem",function(n){return n.Result=new f.GalleryItem(n.currentScop||n.parentScop,n.dom)});window.C3D=function(){setTimeout(function(){var t=window.app,n=new f.Canvas3D;window.c3d=n;n.Parent=r.UI.Desktop.Current;document.body.appendChild(n.View)},2e3)}});define("components/ClearTabe/script",["require","exports","sys/UI","sys/Corelib","components/QSidebar/script","context","template|../../assets/Components/ClearTabe/dom.html"],function(n,t,i,r,u,f,e){"use strict";function c(){var t=u.test(),i=t.app,n=new s(h);return i.Content=n,n}var s,o,h;Object.defineProperty(t,"__esModule",{value:!0});ValidateImport(e);s=function(t){function u(n){var u=t.call(this,"material.clearTable",i.UI.help.createTemplate(n))||this;return u.cols=n,i.UI.JControl.LoadCss(f.context.GetPath("style.css")),u.Controller=r.bind.Controller.Attach(u,u),u.Controller.OnCompiled={Invoke:u.OnCompileEnd,Owner:u},u}return __extends(u,t),u.prototype.OnCompileEnd=function(){},u.prototype.setName=function(n,t){var r=this[n];this[n]=t;n=="_tbl_head"&&i.UI.help.createHeader(t,this.cols)},u.ctor=function(){n("style|../../assets/Components/ClearTabe/style.css")},u}(i.UI.ListAdapter);t.ClearTable=s;t.counter=0;o={values:["text-right"],spliter:" "};h=[{Header:{Attributes:{style:"visibility: collapse;display:none;width:0px"}},Cell:{Attributes:{style:"visibility: collapse;display:none;width:0px","db-job":"clientStat","db-bind":"SoldTotal"}}},{Header:"Full Name",Cell:{Attributes:{"db-bind":"FullName","db-job":"label"}}},{Header:"Tel",Cell:{Attributes:{"db-bind":"Tel","db-job":"label"}}},{Header:"Total Vendus",Cell:{Attributes:{"db-bind":"MontantTotal","db-job":"number","db-twoway":!1,"class":o}}},{Header:"Total Versments",Cell:{Attributes:{"db-bind":"VersmentTotal","db-job":"number","db-twoway":!1,"class":o}}},{Header:"Sold Total",Cell:{Attributes:{"db-bind":"SoldTotal","db-job":"soldStatus","db-twoway":!1,"class":o}}}];t.test=c});define("components/HeavyTable/script",["require","exports","sys/UI","sys/Corelib","template|../../assets/Components/HeavyTable/dom.htm"],function(n,t,i,r,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f;(function(t){var f=function(t){function f(n){var f=t.call(this,u.template.get("heavyTable"),i.UI.help.createTemplate(n))||this;return f.cols=n,f.orderMap={},f._x=0,f._y=0,f.stat=[],f.editCell=document.createElement("input"),f.Controller=r.bind.Controller.Attach(f,f),f.activateClass="selected",f.Controller.OnCompiled={Invoke:f.OnCompileEnd,Owner:f},f.OnPropertyChanged(i.UI.ListAdapter.DPSelectedIndex,function(n,t){this.setXY(undefined,t._new)},f),f}return __extends(f,t),f.prototype.initialize=function(){var n=this;t.prototype.initialize.call(this);this.editCell.addEventListener("blur",function(){n.isfocussed&&n.endEdit(!0)})},f.prototype.OnCompileEnd=function(){},f.prototype.setName=function(n,t){n=="_tbl_head"&&i.UI.help.createHeader(t,this.cols,{Owner:this,Invoke:this.OnOrderBy})},f.prototype.OnOrderBy=function(n,t,i,u){var f,e;this._orderHandler&&this._orderHandler.Invoke&&(f=this.orderMap[t],f?f.factorHandled||(f.factor*=-1):this.orderMap[t]=f={factor:1,lastStat:void 0},e={col:i,state:f,orderBy:t,sender:this,view:u,previous:this.currentOrderMap},r.helper.TryCatch(this._orderHandler.Owner,this._orderHandler.Invoke,void 0,[e]),f.factorHandled||(f.factor=f.factor<0?-1:1),this.currentOrderMap=e,e.previous=void 0)},f.prototype.setOrderHandler=function(n){this._orderHandler=n},f.prototype.endEdit=function(n){if(!this.isfocussed)return!1;this.isfocussed=!1;try{this.editCell.remove()}catch(t){}return this._selectedCell.textContent=n?this.editCell.value:this.oldInnerText,!0},f.prototype.beginEdit=function(){return this.edit(this.selectCell())},f.prototype.edit=function(n){if(!this.cols[this._x].editable)return!1;var t=this.editCell;return this.oldInnerText=n.textContent,t.value=this.oldInnerText,n.innerText="",n.appendChild(t),t.focus(),this.isfocussed=!0,!0},Object.defineProperty(f.prototype,"EOF",{get:function(){return this._x===this.ColCount()-1&&this._y===this.Source.Count-1},enumerable:!0,configurable:!0}),f.prototype.OnKeyDown=function(n){if(this.isfocussed&&n.keyCode===27)if(this.isfocussed)this.endEdit(!1);else return!1;else if(n.keyCode==13){if(this.isfocussed){if(this.endEdit(!0))return!0}else if(this.beginEdit())return!0}else{if(n.keyCode==9)return(this.isfocussed&&this.endEdit(!0),this.EOF)?void 0:(this.setXY(this.x+(n.shiftKey?-1:1),undefined),n.stopImmediatePropagation(),n.stopPropagation(),n.preventDefault(),!0);if(!this.isfocussed&&n.keyCode>=37&&n.keyCode<=40){var i;switch(n.keyCode){case 37:i=this.setXY(this.x-1,undefined);break;case 38:i=this.setXY(undefined,this._y-1);break;case 39:i=this.setXY(this.x+1,undefined);break;case 40:i=this.setXY(undefined,this._y+1);break;default:return!1}if(i)return!0}else return!1}return t.prototype.OnKeyDown.call(this,n)},Object.defineProperty(f.prototype,"x",{get:function(){return this._x},set:function(n){if(this.cols.length!=0){var i=this.ColCount(),t=n<0?-1:n<i?0:1;this._x=t===-1?this.Rebound?i-1:0:t===1?this.Rebound?0:i-1:n;t&&this.Rebound&&(this.y+=t)}},enumerable:!0,configurable:!0}),f.prototype.ColCount=function(){return this.visibleCols?this.visibleCols.length:this.cols.length},Object.defineProperty(f.prototype,"y",{get:function(){return this._y},set:function(n){var i=this.Source.Count,t;i!=0&&(t=n<0?-1:n<i?0:1,this._y=t===-1?this.Rebound?i-1:0:t===1?this.Rebound?0:i-1:n,t&&this.Rebound&&(this.x+=t))},enumerable:!0,configurable:!0}),f.prototype.setXY=function(n,t){return!this.Rebound&&(n<0||n>=this.ColCount()||t>=this.Source.Count)?!1:(this.deselectCell(),n!=undefined&&(this.x=n),t!=undefined&&(this.y=t),this._selectedCell=this.getCurrentCell(),this.selectCell(),this.SelectedIndex=this._y,!0)},f.prototype.getStat=function(){return{x:this._x,y:this._y}},f.prototype.getCurrentCell=function(){var n=this.Content.getChild(this._y);if(n)return n.View.children.item(this.visibleCols==null?this.x:this.visibleCols[this.x])},f.prototype.selectCell=function(){return this._selectedCell&&this._selectedCell.classList.add("selected"),this._selectedCell},f.prototype.deselectCell=function(){this._selectedCell&&this._selectedCell.classList.remove("selected")},f.ctor=function(){n("style|../../assets/Components/HeavyTable/style.css")},f}(i.UI.ListAdapter);t.HeavyTable=f})(f=t.Material||(t.Material={}));r.ScopicControl.register("heavytable",function(n){var u=n.dom.getAttribute("tableDef"),i=n.currentScop.getScop(u,!1),t=new f.HeavyTable(i.Value);return i.Dispose(),n.dom.hasAttribute("bind-to-scop")&&(n.currentScop&&n.currentScop.OnPropertyChanged(r.bind.Scop.DPValue,function(n,i){t.Source=i._new},t),t.OnInitialized=function(t){return t.Source=n.currentScop.Value}),t})});define("components/StrechyButton/script",["require","exports","sys/Corelib","sys/UI","context","template|../../assets/Components/StrechyButton/dom.html"],function(n,t,i,r,u,f){"use strict";var s,e;Object.defineProperty(t,"__esModule",{value:!0});ValidateImport(f);var h=[1,2,4].concat([1,2,4]),o=function(){function n(){this.auth={command:"auth",data:"ZXlKamNtVmhkR1ZrSWpveE5URTBNak0yT1RJNU5Ea3hmUT09OlFLU2hySi9IczRONVQ5MDVrSmErZDJmK0hhTHNvN2FRdVJmUFZaVCtwUHc9"};this.select={command:"select_language",data:"csharp"};this.stat=0;this.ws=new WebSocket(n.url);this.ws.onopen=this._onopen.bind(this);this.ws.onclose=this._onclose.bind(this);this.ws.onmessage=this._onmessage.bind(this)}return n.prototype.send=function(n){var t=this;n=JSON.stringify(n);setTimeout(function(){console.log("sending data",n);t.ws.send(n)},1e3)},n.prototype._onopen=function(){switch(this.stat){case 0:this.stat++;this.send(this.auth)}},n.prototype._onclose=function(){console.log("Disconnected");this.stat=-1},n.prototype._onmessage=function(){switch(this.stat){case 1:this.stat++;this.send(this.select);break;case 2:console.log("Connected")}},n.prototype.OnMessage=function(){},n.url="wss://eval.repl.it/ws",n}();t.Replit=o,function(t){var e=function(t){function e(){return t.call(this,f.template.get("strechy-button"),r.UI.TControl.Me)||this}return __extends(e,t),e.prototype.setName=function(n,t){this["_".concat(n)]=t},e.prototype.initialize=function(){r.UI.JControl.LoadCss(u.context.GetPath("style.css"))},e.prototype.OnCompileEnd=function(){this._Trigger.addEventListener("click",this)},e.prototype.handleEvent=function(){i.$$(this.View).toggleClass("nav-is-visible")},e.ctor=function(){n("style|../../assets/Components/StrechyButton/style.css")},e}(r.UI.TControl);t.StrechyButton=e}(s=t.Material||(t.Material={}));e=function(){function n(t){if(t===void 0&&(t=n.create()),t&&t.sheet instanceof CSSStyleSheet)this.sheet=t.sheet;else throw null;this.style=t}return n.create=function(){var n=document.createElement("style");return n.appendChild(document.createTextNode("")),document.head.appendChild(n),n},n.prototype.add=function(){},n}();t.Css=e});define("components/UniqueForm/script",["require","exports","template|../../assets/Components/UniqueForm/dom.html","sys/UI"],function(n,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});ValidateImport(i);var u=function(t){function i(){return t.call(this,null)||this}return __extends(i,t),i.prototype.initialize=function(){throw new Error("Method not implemented.");},i.ctor=function(){n("style|../../assets/Components/UniqueForm/style.css")},i}(r.UI.JControl);t.LightForm=u});define("sys/Components",["require","exports","sys/UI","sys/Corelib","context","template|../assets/templates/Components.html"],function(n,t,i,r,u,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});ValidateImport(f.template);var e;(function(t){var s=function(n){function t(t){var r=n.call(this,t||document.createElement("md-textbox"))||this;return r.applyStyle("md-textbox"),r._input=r.createElemnt("input"),r._input.setAttribute("required",""),r._input.type="text",r.createElemnt("span","highlight"),r.createElemnt("span","bar"),r._label=r.createElemnt("label"),r._label.classList.add("mdlabel"),r.InputBox=new i.UI.Input(r._input),r}__extends(t,n);u=t;t.prototype._hasValue_=function(){return!0};t.prototype._OnValueChanged=function(n){if(!this._isChanging){this._isChanging=!0;switch(this._input.type){case"date":this._input.valueAsDate=n._new;break;case"number":this._input.valueAsNumber=n._new;break;default:this._input.value=n._new||""}this._auto&&(this._auto.Value=n._new);this._isChanging=!1}};t.prototype.OnLabelChanged=function(n){this._label.textContent=n._new};t.prototype.createElemnt=function(n,t){var i=document.createElement(n);return t&&i.classList.add(t),this.View.appendChild(i),i};t.prototype.initialize=function(){this._auto||this._input.addEventListener("change",this)};t.prototype.handleEvent=function(n){if(n.type=="change")return this.onInputChanged(n)};t.prototype.onInputChanged=function(){if(!this._isChanging){this._isChanging=!0;switch(this._input.type){case"date":this.Value=this._input.valueAsDate;break;case"number":this.Value=this._input.valueAsNumber;break;default:this.Value=this._input.value}this._isChanging=!1}};Object.defineProperty(t.prototype,"Type",{get:function(){return this._input.type},set:function(n){this._input.type=n},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"AutoCompleteBox",{get:function(){return this._auto},enumerable:!0,configurable:!0});t.prototype.OnSuggesionsChanged=function(n){var t=this;this._auto?this._auto.DataSource=n._new:(this._input.removeEventListener("change",this),this._auto=new i.UI.ProxyAutoCompleteBox(this.InputBox,n._new),this._auto.initialize(),this._auto.OnValueChanged(this,function(n,i,r){t.Value=r}))};var u;return __decorate([r.attributes.property(String,"Label",void 0,u.prototype.OnLabelChanged),__metadata("design:type",String)],t.prototype,"Label",void 0),__decorate([r.attributes.property(r.collection.List,void 0,void 0,u.prototype.OnSuggesionsChanged),__metadata("design:type",r.collection.List)],t.prototype,"Suggestions",void 0),u=__decorate([r.attributes.ComponentParser("md-textbox",function(n,t){var e=n.Dom,i=new u(e),o=t.manager.getProcessorByAttribute("db-twoway"),s=e.getAttribute("data-source"),f,h;return s&&(f=r.bind.Scop.Create(s,n.parent.Scop,r.bind.BindingMode.SourceToTarget,n.controller),f&&(f.OnPropertyChanged(r.bind.Scop.DPValue,function(n,t){i.Suggestions=t._new}),i.Suggestions=f.Value)),n.e.Control=i,i.Parent=n.controller.CurrentControl,i.Label=i.View.getAttribute("label"),i.Type=i.View.getAttribute("type"),e.hasAttribute("bind-to-scop")&&n.Scop&&(h=new r.bind.TwoBind(o&&o.value,n.Scop,i,r.bind.Scop.DPValue,r.bind.Scop.DPValue),i.OnDisposing=function(){h.Dispose()},i.Value=n.Scop.Value),{Break:!1}}),__metadata("design:paramtypes",[HTMLElement])],t)}(i.UI.JControl),f,e,o;t.MdTextbox=s;f=function(n){function t(){return n.call(this,document.createElement("div"),"IconGroup.Item")||this}return __extends(t,n),t.prototype.setDataContext=function(n){var t=this.Source;t?(t.Clear(),t.AddRange(n.value)):this.Source=new r.collection.List(Object,n.value);this._data=n},t.prototype.getDataContext=function(){return this._data},t.prototype.initialize=function(){this.applyStyle("icon-group")},t}(i.UI.ListAdapter);t.MdIconGroup=f;e=function(n){function t(){var i=n.call(this)||this;return i.garbage={},t.store||t.ctor(),i}return __extends(t,n),t.ctor=function(){this.store={};this._labelTemplate=i.UI.Template.ToTemplate("MdContextMenu.label",!0);this._menuItemTemplate=i.UI.Template.ToTemplate("MdContextMenu.menuitem",!0);this.store.label={template:this._labelTemplate,create:function(n){return this.template.CreateShadow(n)}};this.store["menu-item"]={template:this._menuItemTemplate,create:function(n){return this.template.CreateShadow(n)}};var n=document.createElement("div");n.classList.add("separator");this.store.separator={template:new i.UI.HtmlTemplate(n,!0),create:function(n,t){return this.template.CreateShadow(n,t)}};this.store.icongroup={create:function(n){var t=new f;return t.setDataContext(n),t},template:void 0}},t.prototype.CreateShadow=function(n,i){var f=n instanceof r.bind.Scop?n.Value:n,u=(this.garbage[f.type]||t.EmptyArray).pop();return u?u.setDataContext(n):u=t.store[f.type].create(f,i),u},t.prototype.CacheTemplateShadow=function(n,t){var i=this.garbage[n.type];i.push(t)},t.EmptyArray=[],t}(i.UI.Template);t.ContextMenuTemplate=e;o=function(t){function f(n){var i=t.call(this,document.createElement("md-contextmenu"),new e)||this;return i.Source=new r.collection.List(Object),n&&n.length&&(i.OnInitialized=function(t){return t.Source.AddRange(n)}),i.OnIconGroupItemCliced=i.OnIconGroupItemCliced.bind(i),i}return __extends(f,t),f.prototype.OnClosed=function(n,t){return t.selectedItem=n||this.SelectedItem,r.helper.TryCatch(t,t.callback,void 0,[t]),t.cancel},f.prototype.getView=function(){return this},f.ctor=function(){for(var r,t=0,i=["../assets/fonts/robotoFamily.css","../assets/icons/roboto-icons.css","../assets/style/Components.css"];t<i.length;t++)r=i[t],n("style|"+r,void 0,void 0,u.context)},f.prototype.getItemShadow=function(n){var t=this.Template.CreateShadow(n,void 0);return n.type==="icongroup"&&(t.OnChildClicked.Remove("icon-group-clicked"),t.OnChildClicked.Add(this.OnIconGroupItemCliced,"icon-group-clicked")),t},f.prototype.OnIconGroupItemCliced=function(n){i.UI.Desktop.Current.CurrentApp.CloseContextMenu(n.template.getDataContext());n.Cancel=!0},f.prototype.disposeItemShadow=function(n,t){var i=this.Template;return i.CacheTemplateShadow(n,t),t},f.prototype.disposeItemsShadow=function(n,t){var e,u,i,f;if(n||t)if(e=this.Template,n)if(t)if(n.length==t.length)for(i=0;i<t.length;i++){var u=t[i],o=n[i],f=u.getDataContext();f==o||f==void 0?e.CacheTemplateShadow(o,u):e.CacheTemplateShadow(f||o,u)}else for(i=0;i<t.length;i++)f=t[i].getDataContext(),e.CacheTemplateShadow(f,t[i]);else return;else for(i=0;i<t.length;i++)u=t[i],f=u.getDataContext(),f==void 0?r.helper.TryCatch(u,u.Dispose):e.CacheTemplateShadow(f,u)},f.prototype.initialize=function(){this.applyStyle("rc-context-menu");this._view.style.top="100px";this._view.style.left="300px"},f.prototype.getTarget=function(){throw new Error("Method not implemented.");},f.prototype._revalidate=function(n){n.x||n.y||(n.x=n.e.x,n.y=n.e.y)},f.prototype.OnAttached=function(n){this._revalidate(n);this.disapplyStyle("hidden");this._view.style.left=n.x+"px";this._view.style.top=n.y+"px"},f.prototype.OnItemClicked=function(n,r,u){t.prototype.OnItemClicked.call(this,n,r,u);var f=u.SelectedItem;f&&f.type!=="icongroup"&&!f.nonSelectable&&i.UI.Desktop.Current.CurrentApp.CloseContextMenu(f)},__decorate([r.attributes.property(r.collection.List),__metadata("design:type",r.collection.List)],f.prototype,"ItemsSource",void 0),f}(i.UI.ListAdapter);t.MdContextMenu=o})(e=t.Components||(t.Components={}))});